const _0x33d7d9=_0x4e67;function _0x4e67(_0x3b1e13,_0x276ae6){const _0x391913=_0x3919();return _0x4e67=function(_0x4e67ec,_0x1e395d){_0x4e67ec=_0x4e67ec-0x12d;let _0x47044f=_0x391913[_0x4e67ec];return _0x47044f;},_0x4e67(_0x3b1e13,_0x276ae6);}(function(_0xc7e39c,_0x30ee70){const _0xc9d450=_0x4e67,_0x2e3c90=_0xc7e39c();while(!![]){try{const _0xe84f0b=parseInt(_0xc9d450(0x147))/0x1+-parseInt(_0xc9d450(0x163))/0x2+-parseInt(_0xc9d450(0x208))/0x3+parseInt(_0xc9d450(0x1b7))/0x4*(-parseInt(_0xc9d450(0x191))/0x5)+parseInt(_0xc9d450(0x185))/0x6*(parseInt(_0xc9d450(0x1ae))/0x7)+-parseInt(_0xc9d450(0x22c))/0x8+-parseInt(_0xc9d450(0x244))/0x9*(-parseInt(_0xc9d450(0x176))/0xa);if(_0xe84f0b===_0x30ee70)break;else _0x2e3c90['push'](_0x2e3c90['shift']());}catch(_0x522274){_0x2e3c90['push'](_0x2e3c90['shift']());}}}(_0x3919,0x45f14));function generateAttackPathInternal(_0x145f67){const _0x3b5849=_0x4e67;try{if(!_0x145f67||!gameCanvas)return[];const _0x1a948d=_0x145f67[_0x3b5849(0x242)]===ENEMY3_TYPE?BOSS_WIDTH:_0x145f67[_0x3b5849(0x242)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x307ad9=_0x145f67[_0x3b5849(0x242)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x145f67[_0x3b5849(0x242)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x190267=_0x1a948d*0.5,_0x376377=gameCanvas[_0x3b5849(0x1d7)],_0x287d91=gameCanvas[_0x3b5849(0x215)];let _0x5d7dd7=[];const _0x22279d={'x':_0x145f67['x'],'y':_0x145f67['y']},_0x5348bd=Math[_0x3b5849(0x188)](_0x287d91*0.06,_0x307ad9*1.8),_0x9c3f5a=Math[_0x3b5849(0x188)](_0x376377*0.04,_0x1a948d*1.2),_0x4045df=_0x145f67['x']+_0x1a948d/0x2<_0x376377/0x2?0x1:-0x1,_0x18e8a6={'x':_0x22279d['x']-_0x4045df*_0x9c3f5a*0.6,'y':_0x22279d['y']-_0x5348bd};_0x18e8a6['x']=Math[_0x3b5849(0x15a)](_0x190267,Math[_0x3b5849(0x188)](_0x376377-_0x190267-_0x1a948d,_0x18e8a6['x'])),_0x18e8a6['y']=Math[_0x3b5849(0x15a)](_0x190267,_0x18e8a6['y']);const _0x471df8={'x':_0x22279d['x']+_0x4045df*_0x9c3f5a*0.1,'y':_0x22279d['y']-_0x5348bd*1.4},_0x23a094={'x':_0x18e8a6['x']+_0x4045df*_0x9c3f5a*0.3,'y':_0x22279d['y']-_0x5348bd*1.5},_0x306483={'p0':_0x22279d,'p1':_0x471df8,'p2':_0x23a094,'p3':_0x18e8a6};_0x5d7dd7[_0x3b5849(0x1e1)](_0x306483);const _0x3381f8=_0x18e8a6,_0x32d3d7=_0x287d91*0.45,_0x288c7d=_0x376377*0.22,_0x4dd085=_0x287d91*0.28,_0x3a2d2a=0.5,_0x19d101=0.6,_0xc36c7d=_0x287d91*0.85,_0x2c0894=Math[_0x3b5849(0x1a7)](Math[_0x3b5849(0x1cc)]()*0x3);let _0x3d0b42=[];if(_0x2c0894===0x0){const _0x37f88b=_0x32d3d7+Math[_0x3b5849(0x1cc)]()*_0x287d91*0.1,_0x51ca99=_0x288c7d+Math[_0x3b5849(0x1cc)]()*_0x376377*0.08,_0xac4969=_0x4dd085+Math[_0x3b5849(0x1cc)]()*_0x287d91*0.08,_0x5de846=_0x3381f8['x']+_0x4045df*_0x51ca99*0.5,_0x5d1181=Math['min'](_0xc36c7d,_0x3381f8['y']+_0x37f88b),_0x14f237=_0x5de846+_0x4045df*_0x51ca99*0.5,_0x1bace7=Math[_0x3b5849(0x15a)](_0x3381f8['y']+0x14,_0x5d1181-_0xac4969),_0x518de0=_0x14f237-_0x4045df*_0x51ca99*0.9,_0x1a71ad=Math[_0x3b5849(0x15a)](_0x3381f8['y']+0x28,_0x1bace7+_0xac4969*0.6),_0xde3c03=_0x518de0-_0x4045df*_0x51ca99*0.3,_0x360e4d=_0x287d91+_0x307ad9*0x2,_0x5dc99d=Math[_0x3b5849(0x15a)](_0x190267,Math[_0x3b5849(0x188)](_0x376377-_0x190267-_0x1a948d,_0x5de846)),_0x41ce5f=Math['max'](_0x190267,Math[_0x3b5849(0x188)](_0x376377-_0x190267-_0x1a948d,_0x14f237)),_0x9ed7d1=Math[_0x3b5849(0x15a)](_0x190267,Math[_0x3b5849(0x188)](_0x376377-_0x190267-_0x1a948d,_0x518de0)),_0x13a103={'x':_0x3381f8['x'],'y':_0x3381f8['y']+_0x37f88b*_0x19d101*0.5},_0x279c2e={'x':_0x5dc99d-_0x4045df*_0x51ca99*_0x3a2d2a,'y':_0x5d1181},_0xb8d2b3={'x':_0x5dc99d,'y':_0x5d1181},_0x25266c={'x':_0x5dc99d+_0x4045df*_0x51ca99*_0x3a2d2a,'y':_0x5d1181},_0x1ee599={'x':_0x41ce5f,'y':_0x1bace7+_0xac4969*_0x19d101},_0x28a396={'x':_0x41ce5f,'y':_0x1bace7},_0x478ffa={'x':_0x41ce5f,'y':_0x1bace7-_0xac4969*_0x19d101*0.5},_0x3ef14d={'x':_0x9ed7d1+_0x4045df*_0x51ca99*_0x3a2d2a,'y':_0x1a71ad},_0x34bb36={'x':_0x9ed7d1,'y':_0x1a71ad},_0x2660b2={'x':_0x34bb36['x'],'y':_0x34bb36['y']+_0x287d91*0.1},_0x5c2845={'x':_0xde3c03,'y':_0x360e4d-_0x287d91*0.2},_0x49149b={'x':_0xde3c03,'y':_0x360e4d};_0x3d0b42=[{'p0':_0x3381f8,'p1':_0x13a103,'p2':_0x279c2e,'p3':_0xb8d2b3},{'p0':_0xb8d2b3,'p1':_0x25266c,'p2':_0x1ee599,'p3':_0x28a396},{'p0':_0x28a396,'p1':_0x478ffa,'p2':_0x3ef14d,'p3':_0x34bb36},{'p0':_0x34bb36,'p1':_0x2660b2,'p2':_0x5c2845,'p3':_0x49149b}];}else{if(_0x2c0894===0x1){const _0xfcd712=_0x32d3d7*0.8+Math[_0x3b5849(0x1cc)]()*_0x287d91*0.1,_0x4a3e73=_0x288c7d*1.2+Math[_0x3b5849(0x1cc)]()*_0x376377*0.1,_0x434420=_0x4dd085*0.7+Math[_0x3b5849(0x1cc)]()*_0x287d91*0.1,_0x5f2d5d=_0x3381f8['x']+_0x4045df*_0x4a3e73*0.4,_0x282547=Math[_0x3b5849(0x188)](_0xc36c7d-_0x434420*0.5,_0x3381f8['y']+_0xfcd712*0.6),_0x3b5126=_0x5f2d5d+_0x4045df*_0x4a3e73*0.6,_0x506b30=Math['min'](_0xc36c7d,_0x282547+_0x434420),_0x2d861f=_0x3b5126-_0x4045df*_0x4a3e73*0.5,_0x11b294=_0x287d91+_0x307ad9*0x2,_0x4e33c4=Math[_0x3b5849(0x15a)](_0x190267,Math[_0x3b5849(0x188)](_0x376377-_0x190267-_0x1a948d,_0x5f2d5d)),_0x186c93=Math[_0x3b5849(0x15a)](_0x190267,Math[_0x3b5849(0x188)](_0x376377-_0x190267-_0x1a948d,_0x3b5126)),_0x1e5d2a={'x':_0x3381f8['x']-_0x4045df*_0x4a3e73*0.1,'y':_0x3381f8['y']+_0xfcd712*0.3},_0x1b241d={'x':_0x4e33c4-_0x4045df*_0x4a3e73*_0x3a2d2a*0.8,'y':_0x282547+_0x434420*_0x19d101*0.4},_0x100cf1={'x':_0x4e33c4,'y':_0x282547},_0x5780f0={'x':_0x4e33c4+_0x4045df*_0x4a3e73*_0x3a2d2a*0.8,'y':_0x282547-_0x434420*_0x19d101*0.4},_0x47da9e={'x':_0x186c93+_0x4045df*_0x4a3e73*_0x3a2d2a*0.6,'y':_0x506b30+_0x434420*_0x19d101*0.5},_0x74b2ba={'x':_0x186c93,'y':_0x506b30},_0x587b4={'x':_0x186c93-_0x4045df*_0x4a3e73*0.2,'y':_0x506b30+_0x287d91*0.1},_0x37bf67={'x':_0x2d861f,'y':_0x11b294-_0x287d91*0.3},_0x323850={'x':_0x2d861f,'y':_0x11b294};_0x3d0b42=[{'p0':_0x3381f8,'p1':_0x1e5d2a,'p2':_0x1b241d,'p3':_0x100cf1},{'p0':_0x100cf1,'p1':_0x5780f0,'p2':_0x47da9e,'p3':_0x74b2ba},{'p0':_0x74b2ba,'p1':_0x587b4,'p2':_0x37bf67,'p3':_0x323850}];}else{const _0x2ef7f1=_0x32d3d7*0.6+Math[_0x3b5849(0x1cc)]()*_0x287d91*0.05,_0x491166=_0x288c7d*0.7+Math[_0x3b5849(0x1cc)]()*_0x376377*0.05,_0x492808=_0x4dd085*0.6+Math[_0x3b5849(0x1cc)]()*_0x287d91*0.05,_0x4ee5fd=_0x492808*1.5,_0x381f71=_0x3381f8['x']+_0x4045df*_0x491166*0.5,_0x34b282=Math[_0x3b5849(0x188)](_0xc36c7d-_0x4ee5fd,_0x3381f8['y']+_0x2ef7f1),_0x2bc9e1=_0x381f71+_0x4045df*_0x491166*0.5,_0xd39b9e=_0x34b282+_0x492808,_0x389a9f=_0x2bc9e1-_0x4045df*_0x491166*0.8,_0x26bd9f=Math[_0x3b5849(0x188)](_0xc36c7d,_0xd39b9e+_0x4ee5fd*0.7),_0x112f5a=_0x389a9f+_0x4045df*_0x491166*0.4,_0x114d6b=_0x26bd9f+_0x492808*0.8,_0x444914=_0x112f5a,_0x4a6d8e=_0x287d91+_0x307ad9*0x2,_0x27f4d0=Math[_0x3b5849(0x15a)](_0x190267,Math[_0x3b5849(0x188)](_0x376377-_0x190267-_0x1a948d,_0x381f71)),_0x4ce4d2=Math[_0x3b5849(0x15a)](_0x190267,Math[_0x3b5849(0x188)](_0x376377-_0x190267-_0x1a948d,_0x2bc9e1)),_0x217efa=Math['max'](_0x190267,Math['min'](_0x376377-_0x190267-_0x1a948d,_0x389a9f)),_0x17d4ef=Math[_0x3b5849(0x15a)](_0x190267,Math[_0x3b5849(0x188)](_0x376377-_0x190267-_0x1a948d,_0x112f5a)),_0x5b2725={'x':_0x3381f8['x'],'y':_0x3381f8['y']+_0x2ef7f1*0.5},_0xfbe4f8={'x':_0x27f4d0-_0x4045df*_0x491166*_0x3a2d2a,'y':_0x34b282+_0x492808*_0x19d101*0.3},_0x449a1d={'x':_0x27f4d0,'y':_0x34b282},_0x48fb3f={'x':_0x27f4d0+_0x4045df*_0x491166*_0x3a2d2a,'y':_0x34b282-_0x492808*_0x19d101*0.3},_0x4c311f={'x':_0x4ce4d2+_0x4045df*_0x491166*_0x3a2d2a,'y':_0xd39b9e+_0x492808*_0x19d101*0.5},_0x23640b={'x':_0x4ce4d2,'y':_0xd39b9e},_0x27c13a={'x':_0x4ce4d2-_0x4045df*_0x491166*_0x3a2d2a,'y':_0xd39b9e-_0x492808*_0x19d101*0.5},_0x5073bd={'x':_0x217efa-_0x4045df*_0x491166*_0x3a2d2a,'y':_0x26bd9f+_0x492808*_0x19d101*0.4},_0x503cf6={'x':_0x217efa,'y':_0x26bd9f},_0x95bf64={'x':_0x217efa+_0x4045df*_0x491166*_0x3a2d2a,'y':_0x26bd9f-_0x492808*_0x19d101*0.4},_0x3c9388={'x':_0x17d4ef+_0x4045df*_0x491166*_0x3a2d2a,'y':_0x114d6b+_0x492808*_0x19d101*0.6},_0x6d4d6c={'x':_0x17d4ef,'y':_0x114d6b},_0x691ba5={'x':_0x17d4ef-_0x4045df*_0x491166*0.1,'y':_0x114d6b+_0x287d91*0.05},_0x12844f={'x':_0x444914,'y':_0x4a6d8e-_0x287d91*0.2},_0x101969={'x':_0x444914,'y':_0x4a6d8e};_0x3d0b42=[{'p0':_0x3381f8,'p1':_0x5b2725,'p2':_0xfbe4f8,'p3':_0x449a1d},{'p0':_0x449a1d,'p1':_0x48fb3f,'p2':_0x4c311f,'p3':_0x23640b},{'p0':_0x23640b,'p1':_0x27c13a,'p2':_0x5073bd,'p3':_0x503cf6},{'p0':_0x503cf6,'p1':_0x95bf64,'p2':_0x3c9388,'p3':_0x6d4d6c},{'p0':_0x6d4d6c,'p1':_0x691ba5,'p2':_0x12844f,'p3':_0x101969}];}}return _0x5d7dd7[_0x3b5849(0x1e1)](..._0x3d0b42),_0x5d7dd7;}catch(_0x58bc45){return console[_0x3b5849(0x1c8)](_0x3b5849(0x1bc)+_0x145f67?.['id']+':',_0x58bc45),[];}}window[_0x33d7d9(0x1ee)]=generateAttackPathInternal;function resetAllMessagesInternal(){showReadyMessage=![],isShowingIntro=![],showCsHitsMessage=![],showPerfectMessage=![],showCsBonusScoreMessage=![],showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showExtraLifeMessage=![],isShowingCaptureMessage=![],isShowingPlayerGameOverMessage=![],isShowingCoopPlayersReady=![],csHitsMessageStartTime=0x0,perfectMessageStartTime=0x0,csBonusScoreMessageStartTime=0x0,csClearMessageStartTime=0x0,extraLifeMessageStartTime=0x0,readyMessageStartTime=0x0,captureMessageStartTime=0x0,playerGameOverMessageStartTime=0x0,csCompletionDelayStartTime=0x0,introDisplayStartTime=0x0,coopPlayersReadyStartTime=0x0;}window[_0x33d7d9(0x161)]=resetAllMessagesInternal;function stopAllGameSoundsInternal(){const _0xca2c25=_0x33d7d9,_0x199133=[playerShootSound,explosionSound,gameOverSound,lostLifeSound,entranceSound,bossGalagaDiveSound,levelUpSound,enemyShootSound,butterflyDiveSound,startSound,coinSound,beeHitSound,butterflyHitSound,bossHit1Sound,bossHit2Sound,gridBackgroundSound,extraLifeSound,csPerfectSound,csClearSound,waveUpSound,menuMusicSound,readySound,tripleAttackSound,captureSound,shipCapturedSound,dualShipSound,resultsMusicSound,hiScoreSound];_0x199133[_0xca2c25(0x229)](_0x31cbbf=>{const _0x468dd1=_0xca2c25;if(_0x31cbbf&&typeof _0x31cbbf[_0x468dd1(0x19e)]===_0x468dd1(0x211))try{_0x31cbbf[_0x468dd1(0x19e)](),typeof _0x31cbbf['currentTime']===_0x468dd1(0x18f)&&(_0x31cbbf['currentTime']=0x0);}catch(_0x182c87){}}),isGridSoundPlaying=![];}window['stopAllGameSounds']=stopAllGameSoundsInternal;function resetGameInternal(){const _0x48edda=_0x33d7d9;score=0x0,level=0x1,playerLives=0x3;if(isTwoPlayerMode){player1Lives=0x3,player2Lives=0x3,player1Score=0x0,player2Score=0x0,currentPlayer=0x1,player1CompletedLevel=-0x1,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet[_0x48edda(0x182)]();else player1LifeThresholdsMet=new Set();if(player2LifeThresholdsMet instanceof Set)player2LifeThresholdsMet['clear']();else player2LifeThresholdsMet=new Set();player1IsDualShipActive=![],player2IsDualShipActive=![],isPlayer1ShipCaptured=![],isPlayer2ShipCaptured=![],isPlayer1WaitingForRespawn=![],isPlayer2WaitingForRespawn=![],isPlayer1Invincible=![],isPlayer2Invincible=![],player1RespawnTime=0x0,player2RespawnTime=0x0,player1InvincibilityEndTime=0x0,player2InvincibilityEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![];if(selectedGameMode===_0x48edda(0x13c)){playerLives=0x0;if(gameCanvas&&gameCanvas[_0x48edda(0x1d7)]>0x0&&gameCanvas[_0x48edda(0x215)]>0x0){const _0x26d128=gameCanvas[_0x48edda(0x1d7)]/0x2-gameCanvas[_0x48edda(0x1d7)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x409425=gameCanvas[_0x48edda(0x1d7)]/0x2+gameCanvas['width']*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2,_0x356f6c=gameCanvas[_0x48edda(0x215)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;ship1={'x':_0x26d128,'y':_0x356f6c,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x26d128,'id':'p1'},ship2={'x':_0x409425,'y':_0x356f6c,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x409425,'id':'p2'},isCoopAIDemoActive&&(smoothedShip1X=_0x26d128,smoothedShip2X=_0x409425,aiShip1TargetEnemy=null,aiShip2TargetEnemy=null,aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0,aiShip1LastShotTime=0x0,aiShip2LastShotTime=0x0,aiNeedsStabilization=![],aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0);}else{const _0x3b8f65=0x96,_0x35e641=0xfa;ship1={'x':_0x3b8f65,'y':0x1f4,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x3b8f65,'id':'p1'},ship2={'x':_0x35e641,'y':0x1f4,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x35e641,'id':'p2'},isCoopAIDemoActive&&(smoothedShip1X=_0x3b8f65,smoothedShip2X=_0x35e641,aiNeedsStabilization=![],aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0);}ship=null;}else{if(!ship&&gameCanvas&&gameCanvas[_0x48edda(0x1d7)]>0x0&&gameCanvas[_0x48edda(0x215)]>0x0)ship={'x':Math[_0x48edda(0x1ed)](gameCanvas['width']/0x2-SHIP_WIDTH/0x2),'y':gameCanvas[_0x48edda(0x215)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':'main'},ship[_0x48edda(0x1a8)]=ship['x'];else ship&&gameCanvas&&gameCanvas[_0x48edda(0x1d7)]>0x0&&gameCanvas[_0x48edda(0x215)]>0x0&&(ship['x']=Math[_0x48edda(0x1ed)](gameCanvas['width']/0x2-SHIP_WIDTH/0x2),ship[_0x48edda(0x1a8)]=ship['x'],ship['y']=gameCanvas[_0x48edda(0x215)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}}else{player1Lives=0x3,player1Score=0x0,player1MaxLevelReached=0x1;if(player1LifeThresholdsMet instanceof Set)player1LifeThresholdsMet[_0x48edda(0x182)]();else player1LifeThresholdsMet=new Set();if(!ship&&gameCanvas&&gameCanvas[_0x48edda(0x1d7)]>0x0&&gameCanvas['height']>0x0)ship={'x':Math[_0x48edda(0x1ed)](gameCanvas['width']/0x2-SHIP_WIDTH/0x2),'y':gameCanvas[_0x48edda(0x215)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':0x0,'id':_0x48edda(0x228)},ship[_0x48edda(0x1a8)]=ship['x'];else ship&&gameCanvas&&gameCanvas[_0x48edda(0x1d7)]>0x0&&gameCanvas[_0x48edda(0x215)]>0x0&&(ship['x']=Math['round'](gameCanvas[_0x48edda(0x1d7)]/0x2-SHIP_WIDTH/0x2),ship[_0x48edda(0x1a8)]=ship['x'],ship['y']=gameCanvas[_0x48edda(0x215)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);ship1=null,ship2=null;}isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,isDualShipActive=![];if(!isTwoPlayerMode)player1IsDualShipActive=![];fallingShips=[],visualOffsetX=-0x14,gameOverSequenceStartTime=0x0,isShowingResultsScreen=![],gameStartTime=Date[_0x48edda(0x237)](),gameJustStarted=!![],gameJustStartedAndWaveLaunched=![],currentGridOffsetX=0x0,gridMoveDirection=0x1,gridJustCompleted=![],isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,lastGridFireCheckTime=0x0,player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,scoreEarnedThisCS=0x0,challengingStageEnemiesHit=0x0,aiNeedsStabilization=!![],aiStabilizationEndTime=0x0,smoothedShipX=undefined,aiCanShootTime=0x0,aiLastShotTime=0x0,aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0,playerLastShotTime=0x0,player1LastShotTime=0x0,player2LastShotTime=0x0,p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],isShowingCoopPlayersReady=![],coopPlayersReadyStartTime=0x0,resetWaveInternal();}window[_0x33d7d9(0x1da)]=resetGameInternal;function resetWaveInternal(){const _0x4efedc=_0x33d7d9;isWaveTransitioning=![],readyForNextWave=![],readyForNextWaveReset=![],isEntrancePhaseActive=!![],firstEnemyLanded=![],captureAttemptMadeThisLevel=![],gameJustStartedAndWaveLaunched=![],aiPlayerActivelySeekingCaptureById=null,coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0,player1CaptureRespawnX=0x0,player2CaptureRespawnX=0x0,player1NeedsRespawnAfterCapture=![],player2NeedsRespawnAfterCapture=![],enemies=[],bullets=[],enemyBullets=[],explosions=[],floatingScores=[],hitSparks=[];Array[_0x4efedc(0x181)](enemySpawnTimeouts)&&enemySpawnTimeouts['forEach'](clearTimeout);enemySpawnTimeouts=[],squadronCompletionStatus={},squadronEntranceFiringStatus={},totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;const _0x234f9f=getWaveTypeInternal(level);isChallengingStage=_0x234f9f===_0x4efedc(0x1bf),isFullGridWave=_0x234f9f===_0x4efedc(0x170),challengingStageEnemiesHit=0x0,scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null;(isFullGridWave||isChallengingStage)&&(isEntrancePhaseActive=![]);const _0x3dc9df=isShowingDemoText;resetAllMessagesInternal();_0x3dc9df&&(isShowingDemoText=!![]);if(isTwoPlayerMode&&selectedGameMode===_0x4efedc(0x13c)&&level===0x1)isCoopAIDemoActive?(isShowingIntro=![],introStep=0x2):(isShowingIntro=![],introStep=0x0);else{if(isChallengingStage){introStep=0x3,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{if(level===0x1){introStep=0x1,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}else{introStep=0x2,isShowingIntro=!![];if(!isManualControl)isShowingDemoText=!![];}}}isShowingIntro&&!(isTwoPlayerMode&&selectedGameMode===_0x4efedc(0x13c)&&level===0x1)&&(introDisplayStartTime=Date[_0x4efedc(0x237)]());playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],currentWaveDefinition=generateWaveDefinitionInternal(level);if(selectedGameMode!==_0x4efedc(0x13c)){if(ship&&gameCanvas&&gameCanvas[_0x4efedc(0x1d7)]>0x0&&gameCanvas[_0x4efedc(0x215)]>0x0&&(forceCenterShipNextReset||!isManualControl)){let _0x55d714=ship[_0x4efedc(0x1d7)];isDualShipActive&&(_0x55d714=DUAL_SHIP_OFFSET_X+SHIP_WIDTH),ship['x']=Math[_0x4efedc(0x1ed)](gameCanvas[_0x4efedc(0x1d7)]/0x2-_0x55d714/0x2),ship[_0x4efedc(0x1a8)]=ship['x'],ship['y']=gameCanvas[_0x4efedc(0x215)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;}else ship&&gameCanvas&&gameCanvas[_0x4efedc(0x215)]>0x0&&(ship['y']=gameCanvas[_0x4efedc(0x215)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);}else{if(gameCanvas&&gameCanvas[_0x4efedc(0x1d7)]>0x0&&gameCanvas[_0x4efedc(0x215)]>0x0){const _0x4d59f2=ship1&&player1Lives>0x0,_0x40e1f3=ship2&&player2Lives>0x0;if(isCoopAIDemoActive){if(_0x4d59f2&&_0x40e1f3){const _0x132d7a=gameCanvas[_0x4efedc(0x1d7)]/0x2-gameCanvas[_0x4efedc(0x1d7)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1&&(ship1['targetX']=_0x132d7a,smoothedShip1X=_0x132d7a);const _0x40038f=gameCanvas['width']/0x2+gameCanvas[_0x4efedc(0x1d7)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2['targetX']=_0x40038f,smoothedShip2X=_0x40038f);}else{if(_0x4d59f2&&ship1){const _0x10d6b7=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x631b2a=Math['round'](gameCanvas[_0x4efedc(0x1d7)]/0x2-_0x10d6b7/0x2);ship1[_0x4efedc(0x1a8)]=_0x631b2a,smoothedShip1X=_0x631b2a;}else{if(_0x40e1f3&&ship2){const _0x7c5497=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x1eb4c8=Math[_0x4efedc(0x1ed)](gameCanvas[_0x4efedc(0x1d7)]/0x2-_0x7c5497/0x2);ship2[_0x4efedc(0x1a8)]=_0x1eb4c8,smoothedShip2X=_0x1eb4c8;}}}}else _0x4d59f2&&ship1&&(ship1['y']=gameCanvas[_0x4efedc(0x215)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN),_0x40e1f3&&ship2&&(ship2['y']=gameCanvas[_0x4efedc(0x215)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN);}}forceCenterShipNextReset=![];if(!isManualControl&&aiNeedsStabilization&&selectedGameMode!==_0x4efedc(0x13c)&&!isCoopAIDemoActive){aiStabilizationEndTime=Date['now']()+AI_STABILIZATION_DURATION;if(ship)smoothedShipX=ship['x'];}}window[_0x33d7d9(0x1ad)]=resetWaveInternal;function getWaveTypeInternal(_0x3019b9){const _0x3e9159=_0x33d7d9,_0x6dd03d=(_0x3019b9-0x1)%0x4;switch(_0x6dd03d){case 0x0:return _0x3e9159(0x170);case 0x1:return _0x3e9159(0x17c);case 0x2:return'challenging_stage';case 0x3:return _0x3e9159(0x168);default:return'unknown';}}window[_0x33d7d9(0x20c)]=getWaveTypeInternal;function generateWaveDefinitionInternal(_0x4f0a30){const _0x27c0d7=_0x33d7d9;let _0x32f815=[];currentWavePatternIndex=-0x1;const _0x1e00de=getWaveTypeInternal(_0x4f0a30);if(typeof waveEntrancePatterns===_0x27c0d7(0x238)||!Array[_0x27c0d7(0x181)](waveEntrancePatterns)||waveEntrancePatterns[_0x27c0d7(0x14d)]<0x2)return[];if(_0x1e00de===_0x27c0d7(0x1bf))_0x32f815=[];else{if(_0x1e00de===_0x27c0d7(0x170)){currentWavePatternIndex=0x0;const _0x2b9dbe=waveEntrancePatterns[0x0];if(!_0x2b9dbe||_0x2b9dbe[_0x27c0d7(0x14d)]===0x0)_0x32f815=[];else try{_0x32f815=JSON[_0x27c0d7(0x12e)](JSON[_0x27c0d7(0x24f)](_0x2b9dbe),(_0x1cdd4e,_0x2fb4fd)=>{const _0x2a3ec5=_0x27c0d7;return _0x2fb4fd&&typeof _0x2fb4fd===_0x2a3ec5(0x204)&&_0x2fb4fd[_0x2a3ec5(0x242)]===ENEMY3_TYPE&&typeof _0x2fb4fd[_0x2a3ec5(0x1c9)]===_0x2a3ec5(0x238)&&(_0x2fb4fd[_0x2a3ec5(0x1c9)]=![]),_0x2fb4fd;});}catch(_0xccbe1a){_0x32f815=[];}}else{if(_0x1e00de===_0x27c0d7(0x17c)){currentWavePatternIndex=0x0;const _0x1eeff3=waveEntrancePatterns[0x0];if(!_0x1eeff3||_0x1eeff3[_0x27c0d7(0x14d)]===0x0)_0x32f815=[];else try{_0x32f815=JSON['parse'](JSON[_0x27c0d7(0x24f)](_0x1eeff3),(_0x5b4dd1,_0x2e2ecc)=>{const _0x286f87=_0x27c0d7;return _0x2e2ecc&&typeof _0x2e2ecc===_0x286f87(0x204)&&_0x2e2ecc[_0x286f87(0x242)]===ENEMY3_TYPE&&typeof _0x2e2ecc[_0x286f87(0x1c9)]===_0x286f87(0x238)&&(_0x2e2ecc[_0x286f87(0x1c9)]=![]),_0x2e2ecc;});}catch(_0x361732){_0x32f815=[];}}else{if(_0x1e00de===_0x27c0d7(0x168)){currentWavePatternIndex=0x1;const _0x1f261a=waveEntrancePatterns[0x1];if(!_0x1f261a||_0x1f261a['length']===0x0)_0x32f815=[];else try{_0x32f815=JSON[_0x27c0d7(0x12e)](JSON[_0x27c0d7(0x24f)](_0x1f261a),(_0x1a43c8,_0x12984a)=>{const _0x163272=_0x27c0d7;return _0x12984a&&typeof _0x12984a===_0x163272(0x204)&&_0x12984a['type']===ENEMY3_TYPE&&typeof _0x12984a[_0x163272(0x1c9)]==='undefined'&&(_0x12984a[_0x163272(0x1c9)]=![]),_0x12984a;});}catch(_0x2bd415){_0x32f815=[];}}else _0x32f815=[];}}}if(_0x1e00de!==_0x27c0d7(0x1bf)){if(typeof normalWaveEntrancePaths===_0x27c0d7(0x238)||Object['keys'](normalWaveEntrancePaths)['length']===0x0)return _0x32f815;for(let _0x1ce044=_0x32f815[_0x27c0d7(0x14d)]-0x1;_0x1ce044>=0x0;_0x1ce044--){const _0x4e4707=_0x32f815[_0x1ce044];if(!normalWaveEntrancePaths?.[_0x4e4707['pathId']]){_0x32f815[_0x27c0d7(0x15d)](_0x1ce044,0x1);continue;}if(_0x4e4707['enemies']&&Array['isArray'](_0x4e4707['enemies'])){for(let _0x32b785=_0x4e4707[_0x27c0d7(0x18e)][_0x27c0d7(0x14d)]-0x1;_0x32b785>=0x0;_0x32b785--){const _0x451c77=_0x4e4707[_0x27c0d7(0x18e)][_0x32b785];(!_0x451c77||!normalWaveEntrancePaths?.[_0x451c77['entrancePathId']])&&_0x4e4707[_0x27c0d7(0x18e)][_0x27c0d7(0x15d)](_0x32b785,0x1),_0x451c77&&_0x451c77[_0x27c0d7(0x242)]===ENEMY3_TYPE&&typeof _0x451c77[_0x27c0d7(0x1c9)]===_0x27c0d7(0x238)&&(_0x451c77[_0x27c0d7(0x1c9)]=![]);}_0x4e4707['enemies'][_0x27c0d7(0x14d)]===0x0&&_0x32f815[_0x27c0d7(0x15d)](_0x1ce044,0x1);}else _0x32f815[_0x27c0d7(0x15d)](_0x1ce044,0x1);}}return _0x32f815;}window[_0x33d7d9(0x1e3)]=generateWaveDefinitionInternal;const createBulletSimple=(_0x40d7a4,_0x5acad5=null)=>{const _0x455fc0=_0x33d7d9;let _0x37f50f=null,_0xc656fa=![];if(isTwoPlayerMode&&selectedGameMode===_0x455fc0(0x13c)){const _0x276b0e=ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured,_0xc5ec7f=ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured;if(_0x276b0e&&_0xc5ec7f)_0x37f50f=Math[_0x455fc0(0x1cc)]()<0.5?ship1:ship2,_0xc656fa=!![];else{if(_0x276b0e)_0x37f50f=ship1,_0xc656fa=!![];else _0xc5ec7f&&(_0x37f50f=ship2,_0xc656fa=!![]);}}else ship&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn&&(_0x37f50f=ship,_0xc656fa=!![]);if(!_0x40d7a4||!isInGameState||!_0xc656fa||!_0x37f50f)return![];const _0x94a38a=scaleValue(level,BASE_ENEMY_BULLET_SPEED,MAX_ENEMY_BULLET_SPEED),_0x5da254=_0x5acad5?_0x5acad5['x']:_0x40d7a4['x']+_0x40d7a4['width']/0x2,_0xbe46c9=_0x5acad5?_0x5acad5['y']:_0x40d7a4['y']+_0x40d7a4[_0x455fc0(0x215)]/0x2;let _0x12d6d8=0x0,_0x1dc0e8=_0x94a38a;const _0x30befc=_0x37f50f['x']+_0x37f50f[_0x455fc0(0x1d7)]/0x2-_0x5da254,_0x652c85=_0x37f50f['y']+_0x37f50f['height']/0x2-_0xbe46c9,_0x3fac6e=Math[_0x455fc0(0x15e)](_0x30befc*_0x30befc+_0x652c85*_0x652c85);if(_0x3fac6e>0x0){let _0x11efc6=0x0;!isChallengingStage&&(_0x11efc6=scaleValue(level,BASE_ENEMY_AIM_FACTOR,MAX_ENEMY_AIM_FACTOR));let _0x5c6226=Math['atan2'](_0x652c85,_0x30befc);_0x12d6d8=Math[_0x455fc0(0x233)](_0x5c6226)*_0x94a38a*_0x11efc6,_0x1dc0e8=Math[_0x455fc0(0x15e)](_0x94a38a**0x2-_0x12d6d8**0x2),_0x1dc0e8=Math['max'](_0x94a38a*(0x1-_0x11efc6)*0.5,_0x1dc0e8);if(_0x652c85<0x0&&_0x1dc0e8>0x0){}if(_0x652c85<0x0)_0x1dc0e8=Math[_0x455fc0(0x1f4)](_0x1dc0e8);return enemyBullets[_0x455fc0(0x1e1)]({'x':_0x5da254-ENEMY_BULLET_WIDTH/0x2,'y':_0xbe46c9,'width':ENEMY_BULLET_WIDTH,'height':ENEMY_BULLET_HEIGHT,'vx':_0x12d6d8,'vy':_0x1dc0e8,'type':_0x40d7a4['type']}),!![];}return![];};function scheduleSingleEntranceSquadron(_0x3dba22,_0x2e4507,_0x289e9){const _0x4f4ec6=_0x33d7d9;if(isFullGridWave||isChallengingStage)return console[_0x4f4ec6(0x1b0)](_0x4f4ec6(0x17e)+level+',\x20isFullGrid:\x20'+isFullGridWave+_0x4f4ec6(0x203)+isChallengingStage+_0x4f4ec6(0x153)),_0x3dba22?.[_0x4f4ec6(0x18e)]?.[_0x4f4ec6(0x14d)]>0x0&&(enemiesSpawnedThisWave+=_0x3dba22[_0x4f4ec6(0x18e)][_0x4f4ec6(0x14d)],squadronCompletionStatus[_0x2e4507]&&(squadronCompletionStatus[_0x2e4507]['completed']=squadronCompletionStatus[_0x2e4507][_0x4f4ec6(0x130)])),![];const _0x145bad=normalWaveEntrancePaths,_0x1f99e1=_0x3dba22[_0x4f4ec6(0x1ac)],_0x100c90=_0x145bad[_0x1f99e1];if(!_0x100c90||_0x100c90[_0x4f4ec6(0x14d)]===0x0)return console['error'](_0x4f4ec6(0x22f)+_0x1f99e1+_0x4f4ec6(0x22e)+_0x2e4507+_0x4f4ec6(0x1e0)),_0x3dba22?.[_0x4f4ec6(0x18e)]?.['length']>0x0&&(enemiesSpawnedThisWave+=_0x3dba22[_0x4f4ec6(0x18e)]['length'],squadronCompletionStatus[_0x2e4507]&&(squadronCompletionStatus[_0x2e4507][_0x4f4ec6(0x23a)]=squadronCompletionStatus[_0x2e4507]['total'])),![];const _0x170dbf=setTimeout(()=>{const _0x5e9909=_0x4f4ec6,_0x59d248=enemySpawnTimeouts['indexOf'](_0x170dbf);if(_0x59d248>-0x1)enemySpawnTimeouts[_0x5e9909(0x15d)](_0x59d248,0x1);let _0x43f8b3=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x43f8b3=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x43f8b3=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0x43f8b3||isFullGridWave){_0x3dba22?.['enemies']?.[_0x5e9909(0x14d)]>0x0&&(enemiesSpawnedThisWave+=_0x3dba22[_0x5e9909(0x18e)][_0x5e9909(0x14d)],squadronCompletionStatus[_0x2e4507]&&(squadronCompletionStatus[_0x2e4507]['completed']=squadronCompletionStatus[_0x2e4507][_0x5e9909(0x130)]));return;}try{squadronEntranceFiringStatus[_0x2e4507]?(squadronEntranceFiringStatus[_0x2e4507][_0x5e9909(0x151)]=Date[_0x5e9909(0x237)]()+_0x289e9,squadronEntranceFiringStatus[_0x2e4507][_0x5e9909(0x1f8)]=![]):(console[_0x5e9909(0x1b0)](_0x5e9909(0x15b)+_0x2e4507+_0x5e9909(0x1e5)),squadronEntranceFiringStatus[_0x2e4507]={'hasFired':![],'scheduledStartTime':Date[_0x5e9909(0x237)]()+_0x289e9});const _0x5d7edf=ENEMY_SPAWN_DELAY_IN_SQUADRON,_0x51b481=_0x5d7edf*0x2,_0x1ab06b=0x1;_0x3dba22[_0x5e9909(0x18e)][_0x5e9909(0x229)]((_0x42b5ac,_0x9d7198)=>{const _0x2f44be=_0x5e9909;if(!_0x42b5ac||!_0x42b5ac['type']||typeof _0x42b5ac[_0x2f44be(0x1d5)]===_0x2f44be(0x238)||typeof _0x42b5ac[_0x2f44be(0x13f)]===_0x2f44be(0x238)||!_0x42b5ac[_0x2f44be(0x20e)]){console['error'](_0x2f44be(0x14b)+_0x2e4507+_0x2f44be(0x1d2)+_0x1f99e1+_0x2f44be(0x1ce)+_0x9d7198+_0x2f44be(0x194)),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x2e4507]&&squadronCompletionStatus[_0x2e4507][_0x2f44be(0x23a)]++;return;}const _0x29e92b=_0x145bad[_0x42b5ac[_0x2f44be(0x20e)]];(!_0x29e92b||_0x29e92b['length']===0x0)&&console['warn'](_0x2f44be(0x157)+_0x42b5ac[_0x2f44be(0x20e)]+_0x2f44be(0x169)+_0x2e4507+_0x2f44be(0x1c3)+_0x9d7198+_0x2f44be(0x218)+_0x1f99e1+'\x22.');let _0x57d63f=0x0;const _0x2c881e=getWaveType(level),_0x573104=_0x2c881e===_0x2f44be(0x168)&&(_0x2e4507===0x2||_0x2e4507===0x3);if(_0x573104){const _0x5b8f1c=Math[_0x2f44be(0x1a7)](_0x9d7198/0x2);_0x9d7198%0x2===0x0?_0x57d63f=_0x5b8f1c*_0x51b481:_0x57d63f=_0x5b8f1c*_0x51b481+_0x1ab06b;}else _0x57d63f=_0x9d7198*ENEMY_SPAWN_DELAY_IN_SQUADRON;const _0x88ebdf=setTimeout(()=>{const _0x43638b=_0x2f44be,_0x2fc391=enemySpawnTimeouts[_0x43638b(0x1ec)](_0x88ebdf);if(_0x2fc391>-0x1)enemySpawnTimeouts[_0x43638b(0x15d)](_0x2fc391,0x1);let _0x71b8e=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x71b8e=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x71b8e=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||!_0x71b8e||isFullGridWave){enemiesSpawnedThisWave++;squadronCompletionStatus[_0x2e4507]&&squadronCompletionStatus[_0x2e4507][_0x43638b(0x23a)]++;return;}try{let _0x3cb7bb=_0x42b5ac[_0x43638b(0x242)],_0x540f13=_0x3cb7bb===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x4ddba8,_0x1124c4;if(_0x3cb7bb===ENEMY1_TYPE)_0x4ddba8=ENEMY1_WIDTH,_0x1124c4=ENEMY1_HEIGHT;else _0x3cb7bb===ENEMY3_TYPE?(_0x4ddba8=BOSS_WIDTH,_0x1124c4=BOSS_HEIGHT):(_0x4ddba8=ENEMY_WIDTH,_0x1124c4=ENEMY_HEIGHT);let _0x5eda14=0x0,_0x1bc97e=0x0;if(_0x100c90&&_0x100c90[0x0]?.['p0'])_0x5eda14=_0x100c90[0x0]['p0']['x'],_0x1bc97e=_0x100c90[0x0]['p0']['y'];else throw new Error(_0x43638b(0x1f1)+_0x1f99e1);let _0x1362fb,_0x81ff79;try{const {x:_0x2bffcb,y:_0x55dc94}=getCurrentGridSlotPosition(_0x42b5ac[_0x43638b(0x1d5)],_0x42b5ac['gridCol'],_0x4ddba8);_0x1362fb=_0x2bffcb,_0x81ff79=_0x55dc94;}catch(_0x53dee9){console[_0x43638b(0x1c8)](_0x43638b(0x1b1)+_0x42b5ac[_0x43638b(0x242)]+_0x43638b(0x162)+_0x42b5ac[_0x43638b(0x1d5)]+','+_0x42b5ac['gridCol']+']',_0x53dee9),_0x1362fb=gameCanvas?.[_0x43638b(0x1d7)]/0x2||0xc8,_0x81ff79=ENEMY_TOP_MARGIN+_0x42b5ac['gridRow']*(ENEMY_HEIGHT+ENEMY_V_SPACING);}let _0x3fd43e=0x0;const _0x46fa59=_0x573104,_0x337642=_0x46fa59&&_0x9d7198%0x2!==0x0;_0x337642?_0x3fd43e=-ENTRANCE_PAIR_PATH_T_OFFSET:_0x3fd43e=-_0x9d7198*PATH_T_OFFSET_PER_ENEMY;const _0x52a0e1={'x':_0x5eda14,'y':_0x1bc97e,'width':_0x4ddba8,'height':_0x1124c4,'targetGridX':_0x1362fb,'targetGridY':_0x81ff79,'speed':0x0,'state':_0x43638b(0x1c1),'gridRow':_0x42b5ac[_0x43638b(0x1d5)],'gridCol':_0x42b5ac[_0x43638b(0x13f)],'type':_0x3cb7bb,'health':_0x540f13,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x1f99e1,'pathSegmentIndex':0x0,'pathT':_0x3fd43e,'squadronId':_0x2e4507,'squadronEnemyIndex':_0x9d7198,'id':_0x43638b(0x177)+_0x2e4507+'-'+_0x9d7198+'-'+Date[_0x43638b(0x237)]()+'-'+Math[_0x43638b(0x1cc)]()[_0x43638b(0x199)](0x24)['substring'](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x43638b(0x1fe),'hasCapturedShip':_0x3cb7bb===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x3cb7bb===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies[_0x43638b(0x1e1)](_0x52a0e1),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x2e4507]&&squadronCompletionStatus[_0x2e4507][_0x43638b(0x23a)]++;if(_0x9d7198===0x0){let _0x128f5c=0x5dc;(_0x2e4507===0x0||_0x2e4507===0x1)&&(_0x128f5c=0xfa);const _0xd9e824=_0x52a0e1['id'],_0x3709ca=setTimeout(()=>{const _0xb3cc95=_0x43638b,_0x49e067=enemySpawnTimeouts[_0xb3cc95(0x1ec)](_0x3709ca);if(_0x49e067>-0x1)enemySpawnTimeouts[_0xb3cc95(0x15d)](_0x49e067,0x1);let _0x3cdb8e=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x3cdb8e=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x3cdb8e=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x3cdb8e||isChallengingStage||isWaveTransitioning||isFullGridWave)return;fireFixedEnemyBurst(_0xd9e824,null,0x0,0x3);},_0x128f5c);enemySpawnTimeouts[_0x43638b(0x1e1)](_0x3709ca);}}catch(_0x12e079){console['error'](_0x43638b(0x145)+_0x2e4507+_0x43638b(0x1df)+_0x9d7198+_0x43638b(0x1ea)+_0x1f99e1+'):',_0x12e079),enemiesSpawnedThisWave++,squadronCompletionStatus[_0x2e4507]&&squadronCompletionStatus[_0x2e4507][_0x43638b(0x23a)]++;}},_0x57d63f);enemySpawnTimeouts[_0x2f44be(0x1e1)](_0x88ebdf);});}catch(_0x108528){console[_0x5e9909(0x1c8)]('Entrance\x20Wave:\x20Error\x20processing\x20enemies\x20for\x20squadron\x20'+_0x2e4507+_0x5e9909(0x1d2)+_0x1f99e1+'):',_0x108528),_0x3dba22?.[_0x5e9909(0x18e)]?.[_0x5e9909(0x14d)]>0x0&&(enemiesSpawnedThisWave+=_0x3dba22[_0x5e9909(0x18e)][_0x5e9909(0x14d)],squadronCompletionStatus[_0x2e4507]&&(squadronCompletionStatus[_0x2e4507]['completed']=squadronCompletionStatus[_0x2e4507]['total']));}},_0x289e9);return enemySpawnTimeouts['push'](_0x170dbf),!![];};function scheduleEntranceFlightWave(){const _0x2c652f=_0x33d7d9;if(isFullGridWave||isChallengingStage||!currentWaveDefinition||currentWaveDefinition[_0x2c652f(0x14d)]===0x0){console['warn'](_0x2c652f(0x174)+level+_0x2c652f(0x1ca)+isFullGridWave+',\x20isCS:\x20'+isChallengingStage+',\x20def\x20length:\x20'+currentWaveDefinition?.[_0x2c652f(0x14d)]),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}enemySpawnTimeouts[_0x2c652f(0x229)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x2b142d=0x0,_0x489ffd=0x0;currentWaveDefinition[_0x2c652f(0x229)]((_0x1e9139,_0x407618)=>{const _0x441de3=_0x2c652f;_0x1e9139&&_0x1e9139[_0x441de3(0x18e)]&&Array[_0x441de3(0x181)](_0x1e9139[_0x441de3(0x18e)])&&_0x1e9139[_0x441de3(0x18e)]['length']>0x0?(totalEnemiesScheduledForWave+=_0x1e9139[_0x441de3(0x18e)][_0x441de3(0x14d)],squadronCompletionStatus[_0x407618]={'completed':0x0,'total':_0x1e9139[_0x441de3(0x18e)][_0x441de3(0x14d)],'hasFiredPostLanding':![]},squadronEntranceFiringStatus[_0x407618]={'hasFired':![],'scheduledStartTime':0x0},scheduleSingleEntranceSquadron(_0x1e9139,_0x407618,_0x2b142d)&&_0x489ffd++,_0x2b142d+=NORMAL_WAVE_SQUADRON_INTERVAL):console['warn']('Entrance\x20Wave:\x20Squadron\x20'+_0x407618+'\x20is\x20empty\x20or\x20invalid.');}),_0x489ffd===0x0&&totalEnemiesScheduledForWave===0x0?(console[_0x2c652f(0x1b0)](_0x2c652f(0x154)+level+_0x2c652f(0x134)),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![]):isEntrancePhaseActive=!![];}function _0x3919(){const _0x31eb74=['object','squadronEnemyIndex',')\x20for\x20','save','415194guFRhJ','initialCaptureAnimationY','grey','CS_LoopAttack_TL','getWaveType','naturalWidth','entrancePathId','CS:\x20No\x20squadrons\x20generated.\x20Skipping\x20CS\x20sequence.','captureAnimationRotation','function','Error\x20getting\x20grid\x20pos\x20within\x20\x27in_grid\x27\x20for\x20','showing_capture_message','attackPathT','height','size','NORMAL','\x20not\x20found.\x20Enemy\x20will\x20follow\x20squadron\x20path\x20\x22','Error\x20getting\x20grid\x20pos\x20after\x20FINAL\x20bezier\x20error\x20for\x20','destroyed','attacking','some','canFireThisDive','substring','Error\x20during\x20post-landing\x20fire\x20for\x20','\x20(invalid\x20attack\x20index):','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!','sin','Full\x20Grid:\x20Error\x20getting\x20target\x20grid\x20pos\x20for\x20enemy\x20','green','thresholdsMet','A\x20critical\x20error\x20occurred\x20in\x20the\x20game\x20loop.\x20Please\x20refresh.','middle','main','forEach','pathT','justReturned','2483472MCLrEf','attackGroupId','\x20for\x20squadron\x20','Entrance\x20Wave:\x20Path\x20','state','isDamaged','\x20for\x20path\x20','cos','lifetime','\x20path\x20index\x20','restore','now','undefined','landed','completed','\x20attacking,\x20index\x20','slice','CS:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','\x20attacking,\x20invalid\x20NEXT\x20segment\x20','string','pathSegmentIndex','getGamepads','type','back','1989LjdGGV','num','blue','CO-OP\x20GAME','\x20off\x20screen:','Error\x20in\x20renderGame:','[Destroyed\x20Boss\x20Score\x20-\x20Attack]\x20Boss\x20destroyed\x20on\x20first\x20hit?\x20Awarding\x20','center','rotationCompleted','right','player','stringify','keys','Error\x20starting\x20attack\x20for\x20','parse','CS:\x20Error\x20setting\x20up\x20spawns\x20for\x20squadron\x20','total','tintProgress','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','CS3_DiveLoopR_Sharp','.\x20Transitioning.','velocityX','single','clearRect','CS_LoopAttack_BR','attackFormationOffsetX','\x20in\x20moving_to_grid','\x20for\x20SHARED\x20path\x20','coop','sort','complete','gridCol','CS:\x20Path\x20','2UP','following_bezier_path','\x20in\x20moving_to_grid\x20state\x20without\x20target.\x20Recalculating.','Enemy\x20','Entrance\x20Wave:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','diving_to_capture_position','533951yaoCWO','FATAL\x20Error\x20in\x20moveEntities\x20(Restored\x20Conditions):',')!\x20Returning.','FATAL\x20Error\x20in\x20moveEntities:','Entrance\x20Wave:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','has','length','\x20has\x20invalid\x20enemy\x20data.','capturedShipLastFiredTime','Error\x20creating\x20player\x20bullet(s):','scheduledStartTime','Error\x20calculating\x20Normal\x20Bezier\x20point\x20for\x20enemy\x20',').\x20Skipping.','Entrance\x20Wave:\x20No\x20squadrons\x20or\x20enemies\x20scheduled\x20for\x20level\x20','Error\x20updating\x20target\x20grid\x20pos\x20for\x20enemy\x20','CS:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','Entrance\x20Wave:\x20Assigned\x20entrance\x20path\x20\x22','attackType','enemy-cs-','max','[scheduleSingleEntranceSquadron]\x20Firing\x20status\x20for\x20squadron\x20','captureStartTime','splice','sqrt','speed','Full\x20Grid:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','resetAllMessages','\x20at\x20[','768886PEGQIi','stack','20px\x20\x27Press\x20Start\x202P\x27','velocityY','totalRotation','entrance_flight_2','\x22\x20for\x20enemy\x20in\x20squadron\x20','player1','\x20after\x20missing\x20path','CS3_DiveLoopL_Sharp','.\x20Removing.','landedTime','START\x20GAME','full_grid','targetGridX','Full\x20Grid:\x20Error\x20placing\x20enemy\x20(Sq\x20','Error\x20during\x20enemy\x20burst\x20firing\x20(bullet\x20','[scheduleEntranceFlightWave]\x20Called\x20inappropriately\x20or\x20with\x20no\x20definition.\x20Level\x20','creationTime','21290eDGjCI','enemy-entr-','player2','alpha','1UP','Invalid\x20CS\x20Bezier\x20segment\x20','entrance_flight_1','lastFiredTime','[scheduleSingleEntranceSquadron]\x20Called\x20inappropriately\x20for\x20non-entrance\x20wave\x20type\x20(Level\x20','CS_LoopAttack_BL','moving_to_grid','isArray','clear','targetY','\x20invalid!\x20Skipping.','3666qSACeP','add','health','min','preparing_capture','Invalid\x20next\x20CS\x20Bezier\x20segment\x20','capturePrepareTimeout','capturedShipDimensions','in_grid','enemies','number','capturedShipY','288070yFtRRG','duration','playerId','.\x20Skipping.','every','map','show_results','attackPathSegments','toString','Error\x20getting\x20grid\x20pos\x20after\x20invalid\x20NEXT\x20attack\x20segment\x20for\x20','drawImage','attackPathSegmentIndex','boss_loop_right','pause','2\x20PLAYER','CRITICAL:\x20Failed\x20to\x20define\x20CS\x20paths!','currentLives','\x20(state:\x20','capturedShipX','\x20(no\x20attack\x20path):','currentScore','.\x20Enemy\x20','floor','targetX','filter','1\x20PLAYER','naturalHeight','pathId','resetWave','1981dMeVoQ','returnLogDone','warn','Error\x20getting\x20target\x20grid\x20pos\x20for\x20new\x20enemy\x20','rotationDirection','fillStyle','boss_loop_left','Error\x20calculating\x20bezier\x20point\x20during\x20attack\x20for\x20','Invalid\x20Normal\x20Bezier\x20segment\x20','4CGkRwf','diveStartTime','Error\x20creating\x20CO-OP\x20AI\x20bullet\x20for\x20','LOGO','switch_player','[DEBUG]\x20Error\x20generating\x20attack\x20path\x20for\x20enemy\x20','returning','left','challenging_stage','dual','following_entrance_path','newButtonStates',',\x20index\x20','\x20at\x20end\x20of\x20normal\x20path\x20','preparing_attack','Attempted\x20to\x20start\x20Full\x20Grid\x20wave\x20without\x20valid\x20definition\x20or\x20when\x20not\x20in\x20Full\x20Grid\x20mode.','Error\x20in\x20aiControl:','error','hasCapturedShip',',\x20isFullGrid:\x20','squadronId','random','targetPlayerId','),\x20index\x20','.\x20Switching\x20to\x20moving_to_grid.','Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20','\x20(Path\x20','\x20after\x20invalid\x20path\x20index','Error\x20updating\x20floating\x20scores:','gridRow','fillRect','width','Error\x20getting\x20grid\x20pos\x20for\x20','isPreparingForImmediateCapture','resetGame','sign','hasFiredPostLanding','targetGridY','CS_HorizontalFlyByL',',\x20Idx\x20','\x20invalid!\x20Skipping\x20squadron.','push','!\x20Returning.','generateWaveDefinition','Boss\x20','\x20not\x20found.','enemy-grid-','\x20after\x20bad\x20segment','\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!\x20Resetting\x20state\x20anyway.','HIGH\x20SCORE',',\x20Path\x20','rotation','indexOf','round','generateAttackPath','\x20points.\x20Health\x20was:\x20','\x20after\x20bezier\x20error','Invalid\x20start\x20segment\x20for\x20squadron\x20path\x20','capturing','[Capture\x20Message\x20End]\x20Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','abs','EASY','findIndex','find','hasFired','\x22\x20not\x20found!\x20Aborting\x20CS.','shipObj','shoot',')\x20during\x20shift:','CS_LoopAttack_TR','normal','playerNum','Error\x20during\x20FIXED\x20enemy\x20burst\x20firing\x20(bullet\x20','red','Failed\x20to\x20return\x20to\x20menu\x20after\x20critical\x20error:',',\x20isCS:\x20'];_0x3919=function(){return _0x31eb74;};return _0x3919();}function startChallengingStageSequence(){const _0x2f45f1=_0x33d7d9;currentWaveDefinition=[],isEntrancePhaseActive=![],enemySpawnTimeouts[_0x2f45f1(0x229)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronEntranceFiringStatus={};Object[_0x2f45f1(0x250)](challengingStagePaths)['length']===0x0&&defineChallengingStagePaths();if(Object['keys'](challengingStagePaths)[_0x2f45f1(0x14d)]===0x0){console[_0x2f45f1(0x1c8)](_0x2f45f1(0x1a0)),isWaveTransitioning=!![],setTimeout(()=>{const _0x5efbe8=_0x2f45f1;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode==='coop'&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x5efbe8(0x211)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}const _0x4512d1=[_0x2f45f1(0x16c),_0x2f45f1(0x133),_0x2f45f1(0x1de),'CS_HorizontalFlyByR'],_0x11792c=[_0x2f45f1(0x20b),_0x2f45f1(0x1fd),_0x2f45f1(0x17f),_0x2f45f1(0x138)],_0x18c2b3=[..._0x4512d1,..._0x11792c];for(const _0x52c825 of _0x18c2b3){if(!challengingStagePaths['hasOwnProperty'](_0x52c825)){console[_0x2f45f1(0x1c8)]('CRITICAL:\x20Required\x20CS\x20path\x20\x22'+_0x52c825+_0x2f45f1(0x1f9)),isWaveTransitioning=!![],setTimeout(()=>{const _0x109f8f=_0x2f45f1;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x109f8f(0x13c)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x109f8f(0x211)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}}let _0x5bde4d=[..._0x4512d1],_0x30a265=[..._0x11792c][_0x2f45f1(0x13d)](()=>Math[_0x2f45f1(0x1cc)]()-0.5);_0x5bde4d[_0x2f45f1(0x1e1)](..._0x30a265),currentWaveDefinition=[];for(let _0x450bdb=0x0;_0x450bdb<CHALLENGING_STAGE_SQUADRON_COUNT;_0x450bdb++){const _0xf7bc0c=_0x5bde4d[_0x450bdb],_0x175e3f={'pathId':_0xf7bc0c,'enemies':[]};for(let _0x2fdbb4=0x0;_0x2fdbb4<CHALLENGING_STAGE_SQUADRON_SIZE;_0x2fdbb4++){let _0x1f56c9=_0x2fdbb4<Math[_0x2f45f1(0x1a7)](CHALLENGING_STAGE_SQUADRON_SIZE/0x2)?ENEMY1_TYPE:ENEMY2_TYPE;_0x175e3f[_0x2f45f1(0x18e)][_0x2f45f1(0x1e1)]({'type':_0x1f56c9,'entrancePathId':_0xf7bc0c});}currentWaveDefinition[_0x2f45f1(0x1e1)](_0x175e3f);}challengingStageTotalEnemies=CHALLENGING_STAGE_ENEMY_COUNT,totalEnemiesScheduledForWave=challengingStageTotalEnemies,enemiesSpawnedThisWave=0x0;if(currentWaveDefinition[_0x2f45f1(0x14d)]>0x0){isEntrancePhaseActive=!![],enemySpawnTimeouts=[];let _0x590eca=0x0;const _0x5c567b=-0x1c,_0x305a51=Math['floor'](Math[_0x2f45f1(0x15a)](0x0,level-0x3)/0x4)+0x1,_0x4687c2=scaleValue(_0x305a51,BASE_CS_SPEED_MULTIPLIER,MAX_CS_SPEED_MULTIPLIER);currentWaveDefinition[_0x2f45f1(0x229)]((_0x1cfa39,_0x3a9f15)=>{const _0x2ab0f8=_0x2f45f1;let _0x56ff4f=0x0;if(_0x3a9f15<=0x1)_0x56ff4f=0x0;else _0x3a9f15<=0x3?_0x56ff4f=CHALLENGING_STAGE_SQUADRON_INTERVAL:_0x56ff4f=(_0x3a9f15-0x2)*CHALLENGING_STAGE_SQUADRON_INTERVAL;let _0x268d60=_0x4687c2;(_0x3a9f15===0x2||_0x3a9f15===0x3)&&(_0x268d60*=CS_HORIZONTAL_FLYBY_SPEED_FACTOR);const _0x3af615=setTimeout(()=>{const _0x3e71d3=_0x4e67,_0x3b991f=enemySpawnTimeouts[_0x3e71d3(0x1ec)](_0x3af615);if(_0x3b991f>-0x1)enemySpawnTimeouts[_0x3e71d3(0x15d)](_0x3b991f,0x1);let _0xec3e37=![];isTwoPlayerMode&&selectedGameMode===_0x3e71d3(0x13c)?_0xec3e37=player1Lives>0x0||player2Lives>0x0:_0xec3e37=playerLives>0x0;if(!isPaused&&isInGameState&&isEntrancePhaseActive&&isChallengingStage&&!isWaveTransitioning&&_0xec3e37)try{const _0x4f75dc=_0x1cfa39[_0x3e71d3(0x1ac)],_0x23e109=challengingStagePaths,_0x2037c9=_0x23e109[_0x4f75dc];if(!_0x2037c9||_0x2037c9[_0x3e71d3(0x14d)]===0x0){console['error'](_0x3e71d3(0x140)+_0x4f75dc+_0x3e71d3(0x22e)+_0x3a9f15+_0x3e71d3(0x184)),enemiesSpawnedThisWave+=_0x1cfa39['enemies']['length'];return;}let _0x1948df=CS_ENEMY_SPAWN_DELAY_IN_SQUADRON;if(_0x3a9f15>=0x2&&_0x3a9f15<=0x3)_0x1948df=CS_HORIZONTAL_FLYBY_SPAWN_DELAY;else _0x3a9f15>=0x4&&(_0x1948df=CS_LOOP_ATTACK_SPAWN_DELAY);_0x1cfa39[_0x3e71d3(0x18e)][_0x3e71d3(0x229)]((_0x25135c,_0x48cf49)=>{const _0x44886c=_0x3e71d3;if(!_0x25135c||!_0x25135c[_0x44886c(0x242)]){console['error'](_0x44886c(0x23d)+_0x3a9f15+_0x44886c(0x1c3)+_0x48cf49+_0x44886c(0x194)),enemiesSpawnedThisWave++;return;}const _0x396142=_0x48cf49*_0x1948df,_0x3bc9cf=setTimeout(()=>{const _0x347191=_0x44886c,_0xa6dfd3=enemySpawnTimeouts['indexOf'](_0x3bc9cf);if(_0xa6dfd3>-0x1)enemySpawnTimeouts['splice'](_0xa6dfd3,0x1);let _0x15c659=![];isTwoPlayerMode&&selectedGameMode===_0x347191(0x13c)?_0x15c659=player1Lives>0x0||player2Lives>0x0:_0x15c659=playerLives>0x0;if(isPaused||!isInGameState||!isEntrancePhaseActive||!isChallengingStage||isWaveTransitioning||!_0x15c659){enemiesSpawnedThisWave++;return;}try{let _0x34620c=_0x25135c[_0x347191(0x242)],_0x1bff12=_0x34620c===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x23f470,_0x5a7077;if(_0x34620c===ENEMY1_TYPE)_0x23f470=ENEMY1_WIDTH,_0x5a7077=ENEMY1_HEIGHT;else _0x34620c===ENEMY3_TYPE?(_0x23f470=BOSS_WIDTH,_0x5a7077=BOSS_HEIGHT):(_0x23f470=ENEMY_WIDTH,_0x5a7077=ENEMY_HEIGHT);let _0x5d7dd8=0x0,_0x4ec35f=0x0;if(_0x2037c9[0x0]?.['p0'])_0x5d7dd8=_0x2037c9[0x0]['p0']['x'],_0x4ec35f=_0x2037c9[0x0]['p0']['y'];else throw new Error('Invalid\x20start\x20segment\x20for\x20path\x20'+_0x4f75dc);(_0x3a9f15===0x0||_0x3a9f15===0x1)&&(_0x5d7dd8+=_0x5c567b);const _0x79c741=-_0x48cf49*PATH_T_OFFSET_PER_ENEMY,_0x5c5dfd={'x':_0x5d7dd8,'y':_0x4ec35f,'width':_0x23f470,'height':_0x5a7077,'targetGridX':0x0,'targetGridY':0x0,'speed':0x0,'state':_0x347191(0x142),'gridRow':-0x1,'gridCol':-0x1,'type':_0x34620c,'health':_0x1bff12,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x4f75dc,'pathSegmentIndex':0x0,'pathT':_0x79c741,'squadronId':_0x3a9f15,'id':_0x347191(0x159)+_0x3a9f15+'-'+_0x48cf49+'-'+Date[_0x347191(0x237)]()+'-'+Math[_0x347191(0x1cc)]()[_0x347191(0x199)](0x24)[_0x347191(0x21e)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':'normal','hasCapturedShip':_0x34620c===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x34620c===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':_0x268d60};enemies['push'](_0x5c5dfd),enemiesSpawnedThisWave++;}catch(_0x4eba32){console[_0x347191(0x1c8)](_0x347191(0x156)+_0x3a9f15+_0x347191(0x1df)+_0x48cf49+_0x347191(0x1ea)+_0x4f75dc+'):',_0x4eba32),enemiesSpawnedThisWave++;}},_0x396142);enemySpawnTimeouts[_0x44886c(0x1e1)](_0x3bc9cf),_0x590eca++;});}catch(_0x4fcf56){console[_0x3e71d3(0x1c8)](_0x3e71d3(0x12f)+_0x3a9f15+':',_0x4fcf56),enemiesSpawnedThisWave+=_0x1cfa39['enemies'][_0x3e71d3(0x14d)];}else _0x1cfa39?.['enemies']?.[_0x3e71d3(0x14d)]>0x0&&(enemiesSpawnedThisWave+=_0x1cfa39[_0x3e71d3(0x18e)][_0x3e71d3(0x14d)]);},_0x56ff4f);enemySpawnTimeouts[_0x2ab0f8(0x1e1)](_0x3af615);});}else console['warn'](_0x2f45f1(0x20f)),isWaveTransitioning=!![],setTimeout(()=>{const _0x339427=_0x2f45f1;(isInGameState||!isInGameState&&(isTwoPlayerMode&&selectedGameMode===_0x339427(0x13c)&&(player1Lives>0x0||player2Lives>0x0)||!isTwoPlayerMode&&playerLives>0x0))&&typeof resetWave===_0x339427(0x211)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);}function fireEnemyBurst(_0x9fe009,_0x284cd2,_0x21d50f){const _0x48cb02=_0x33d7d9;let _0x2950e2=![];isTwoPlayerMode&&selectedGameMode===_0x48cb02(0x13c)?_0x2950e2=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x2950e2=playerLives>0x0&&!isShipCaptured;if(!_0x9fe009||isPaused||!isInGameState||!_0x2950e2||isChallengingStage||isWaveTransitioning)return;const _0x21d70e=Math[_0x48cb02(0x1ed)](scaleValue(level,BASE_ENEMY_BULLET_BURST_COUNT,MAX_ENEMY_BULLET_BURST_COUNT));for(let _0x3f6cd1=0x0;_0x3f6cd1<_0x21d70e;_0x3f6cd1++){const _0x352e0b=_0x21d50f+_0x3f6cd1*ENTRANCE_FIRE_BURST_DELAY_MS,_0x273964=setTimeout(()=>{const _0x437ab2=_0x48cb02;try{const _0x2862ec=enemySpawnTimeouts[_0x437ab2(0x1ec)](_0x273964);_0x2862ec>-0x1&&enemySpawnTimeouts[_0x437ab2(0x15d)](_0x2862ec,0x1);let _0x5888e5=![];isTwoPlayerMode&&selectedGameMode===_0x437ab2(0x13c)?_0x5888e5=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x5888e5=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x5888e5||isChallengingStage||isWaveTransitioning)return;const _0xc0d1fa=enemies[_0x437ab2(0x1f7)](_0x1b3415=>_0x1b3415&&_0x1b3415['id']===_0x9fe009);_0xc0d1fa&&_0xc0d1fa[_0x437ab2(0x230)]===_0x284cd2&&(createBulletSimple(_0xc0d1fa)&&(_0x3f6cd1===0x0&&playSound(enemyShootSound),_0xc0d1fa[_0x437ab2(0x17d)]=Date[_0x437ab2(0x237)]()));}catch(_0x1bc603){console[_0x437ab2(0x1c8)](_0x437ab2(0x173)+(_0x3f6cd1+0x1)+'/'+_0x21d70e+_0x437ab2(0x206)+_0x9fe009+':',_0x1bc603);}},_0x352e0b);enemySpawnTimeouts['push'](_0x273964);}}function fireFixedEnemyBurst(_0x4fbe0b,_0x3f3ea3,_0x23f992,_0x3caf63){const _0x2f4298=_0x33d7d9;let _0x15d5c9=![];isTwoPlayerMode&&selectedGameMode===_0x2f4298(0x13c)?_0x15d5c9=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x15d5c9=playerLives>0x0&&!isShipCaptured;if(!_0x4fbe0b||isPaused||!isInGameState||!_0x15d5c9||isChallengingStage||isWaveTransitioning||_0x3caf63<=0x0)return;for(let _0x34e467=0x0;_0x34e467<_0x3caf63;_0x34e467++){const _0x5ccab7=_0x23f992+_0x34e467*ENTRANCE_FIRE_BURST_DELAY_MS,_0x49683c=setTimeout(()=>{const _0x2308b7=_0x2f4298;try{const _0x14cfd7=enemySpawnTimeouts[_0x2308b7(0x1ec)](_0x49683c);_0x14cfd7>-0x1&&enemySpawnTimeouts[_0x2308b7(0x15d)](_0x14cfd7,0x1);let _0x4039fc=![];isTwoPlayerMode&&selectedGameMode===_0x2308b7(0x13c)?_0x4039fc=player1Lives>0x0&&!isPlayer1ShipCaptured||player2Lives>0x0&&!isPlayer2ShipCaptured:_0x4039fc=playerLives>0x0&&!isShipCaptured;if(isPaused||!isInGameState||!_0x4039fc||isChallengingStage||isWaveTransitioning)return;const _0x153a44=enemies[_0x2308b7(0x1f7)](_0x31b054=>_0x31b054&&_0x31b054['id']===_0x4fbe0b);if(_0x153a44)createBulletSimple(_0x153a44)&&(_0x34e467===0x0&&playSound(enemyShootSound),_0x153a44['lastFiredTime']=Date[_0x2308b7(0x237)]());else{}}catch(_0x385a25){console[_0x2308b7(0x1c8)](_0x2308b7(0x200)+(_0x34e467+0x1)+'/'+_0x3caf63+_0x2308b7(0x206)+_0x4fbe0b+':',_0x385a25);}},_0x5ccab7);enemySpawnTimeouts[_0x2f4298(0x1e1)](_0x49683c);}}function startFullGridWave(){const _0x4155d0=_0x33d7d9;if(!currentWaveDefinition||currentWaveDefinition[_0x4155d0(0x14d)]===0x0||!isFullGridWave){console[_0x4155d0(0x1c8)](_0x4155d0(0x1c6)),isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}playSound(entranceSound),enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x178f8f=0x0;currentWaveDefinition['forEach']((_0x8ae21a,_0x4bca6d)=>{const _0xde08a7=_0x4155d0;let _0x1f661c=0x0;_0x8ae21a&&_0x8ae21a[_0xde08a7(0x18e)]&&Array[_0xde08a7(0x181)](_0x8ae21a[_0xde08a7(0x18e)])?(_0x1f661c=_0x8ae21a[_0xde08a7(0x18e)]['length'],_0x8ae21a[_0xde08a7(0x18e)][_0xde08a7(0x229)]((_0x140d68,_0x3ac7ef)=>{const _0x35e1fb=_0xde08a7;try{if(!_0x140d68||!_0x140d68[_0x35e1fb(0x242)]||typeof _0x140d68[_0x35e1fb(0x1d5)]===_0x35e1fb(0x238)||typeof _0x140d68[_0x35e1fb(0x13f)]==='undefined'){console[_0x35e1fb(0x1c8)](_0x35e1fb(0x160)+_0x4bca6d+_0x35e1fb(0x1c3)+_0x3ac7ef+_0x35e1fb(0x194));return;}let _0x1fee3b=_0x140d68['type'],_0x575266=_0x1fee3b===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x56f2e7,_0x1d761a;if(_0x1fee3b===ENEMY1_TYPE)_0x56f2e7=ENEMY1_WIDTH,_0x1d761a=ENEMY1_HEIGHT;else _0x1fee3b===ENEMY3_TYPE?(_0x56f2e7=BOSS_WIDTH,_0x1d761a=BOSS_HEIGHT):(_0x56f2e7=ENEMY_WIDTH,_0x1d761a=ENEMY_HEIGHT);let _0x3d5044,_0x1f468a;try{const {x:_0x162099,y:_0x4a33fb}=getCurrentGridSlotPosition(_0x140d68['gridRow'],_0x140d68[_0x35e1fb(0x13f)],_0x56f2e7);_0x3d5044=_0x162099,_0x1f468a=_0x4a33fb;}catch(_0x4b11cb){console[_0x35e1fb(0x1c8)](_0x35e1fb(0x223)+_0x140d68[_0x35e1fb(0x242)]+_0x35e1fb(0x162)+_0x140d68[_0x35e1fb(0x1d5)]+','+_0x140d68[_0x35e1fb(0x13f)]+']',_0x4b11cb),_0x3d5044=gameCanvas?.[_0x35e1fb(0x1d7)]/0x2||0xc8,_0x1f468a=ENEMY_TOP_MARGIN+_0x140d68[_0x35e1fb(0x1d5)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x4ecf6f={'x':_0x3d5044,'y':_0x1f468a,'width':_0x56f2e7,'height':_0x1d761a,'targetGridX':_0x3d5044,'targetGridY':_0x1f468a,'speed':0x0,'state':_0x35e1fb(0x18d),'gridRow':_0x140d68[_0x35e1fb(0x1d5)],'gridCol':_0x140d68[_0x35e1fb(0x13f)],'type':_0x1fee3b,'health':_0x575266,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':null,'pathSegmentIndex':0x0,'pathT':0x0,'squadronId':_0x4bca6d,'squadronEnemyIndex':_0x3ac7ef,'id':_0x35e1fb(0x1e6)+_0x4bca6d+'-'+_0x3ac7ef+'-'+Date[_0x35e1fb(0x237)]()+'-'+Math[_0x35e1fb(0x1cc)]()[_0x35e1fb(0x199)](0x24)[_0x35e1fb(0x21e)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':'normal','hasCapturedShip':_0x1fee3b===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x1fee3b===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies[_0x35e1fb(0x1e1)](_0x4ecf6f),_0x178f8f++;}catch(_0x54d7d3){console[_0x35e1fb(0x1c8)](_0x35e1fb(0x172)+_0x4bca6d+_0x35e1fb(0x1df)+_0x3ac7ef+'):',_0x54d7d3);}})):console[_0xde08a7(0x1b0)]('Full\x20Grid:\x20Squadron\x20'+_0x4bca6d+_0xde08a7(0x14e)),squadronCompletionStatus[_0x4bca6d]={'completed':_0x1f661c,'total':_0x1f661c};}),totalEnemiesScheduledForWave=_0x178f8f,enemiesSpawnedThisWave=_0x178f8f,isEntrancePhaseActive=![],gridJustCompleted=!![],!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound)),GRID_BREATH_ENABLED&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=Date[_0x4155d0(0x237)](),currentGridBreathFactor=0x0),lastGridFireCheckTime=Date[_0x4155d0(0x237)](),firstEnemyLanded=!![];}function renderGame(){const _0x1849d0=_0x33d7d9;try{if(!gameCtx||!gameCanvas){if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null;return;}gameCtx[_0x1849d0(0x137)](0x0,0x0,gameCanvas['width'],gameCanvas['height']);const _0x4b82e2=Date[_0x1849d0(0x237)]();gameCtx['save']();const _0x28ec5b=_0x1849d0(0x165),_0x2828c1=_0x1849d0(0x201),_0x362c15='white';let _0x5d4676,_0x352669,_0x529f63,_0x2e0696,_0x391986=![],_0x48f428=![],_0x3d2a37=![];if(isShowingResultsScreen){}else{if(gameOverSequenceStartTime>0x0&&!isShowingPlayerGameOverMessage){}else{if(isShowingPlayerGameOverMessage){}else{if(!isInGameState){}else{_0x529f63=highScore||0x0;if(!isManualControl){}else{if(isTwoPlayerMode&&selectedGameMode===_0x1849d0(0x13c)){_0x5d4676=player1Score,_0x352669=player2Score,_0x529f63=Math[_0x1849d0(0x15a)](highScore,player1Score,player2Score),_0x2e0696='1UP',_0x391986=!isShowingIntro&&!isPaused&&player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn,_0x48f428=!isShowingIntro&&!isPaused&&player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn;if(player1Score>=_0x529f63&&player1Score>0x0)_0x3d2a37=_0x391986;if(player2Score>=_0x529f63&&player2Score>0x0&&player2Score>player1Score)_0x3d2a37=_0x48f428;}else isTwoPlayerMode&&selectedGameMode===_0x1849d0(0x1fe)?(_0x5d4676=currentPlayer===0x1?score:player1Score,_0x352669=currentPlayer===0x2?score:player2Score,_0x529f63=Math['max'](highScore,player1Score,player2Score,score),_0x2e0696=_0x1849d0(0x17a),_0x391986=!isShowingIntro&&!isPaused&&currentPlayer===0x1&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x48f428=!isShowingIntro&&!isPaused&&currentPlayer===0x2&&playerLives>0x0&&!isShipCaptured&&!isWaitingForRespawn,_0x3d2a37=!isPaused&&!isShowingIntro&&score>0x0&&_0x529f63>0x0&&score>=_0x529f63):(_0x5d4676=score,_0x352669=0x0,_0x2e0696=_0x1849d0(0x17a));}}}}}let _0x32f6f4=![];if(_0x3d2a37){}typeof MARGIN_SIDE!=='undefined'&&typeof MARGIN_TOP!=='undefined'&&typeof SCORE_OFFSET_Y!==_0x1849d0(0x238)&&(drawTopUiElement(_0x2e0696,_0x5d4676,_0x1849d0(0x1be),MARGIN_SIDE,_0x391986),drawTopUiElement(_0x1849d0(0x1e9),_0x529f63,_0x1849d0(0x24b),gameCanvas[_0x1849d0(0x1d7)]/0x2,_0x32f6f4),drawTopUiElement(_0x1849d0(0x141),_0x352669,'right',gameCanvas[_0x1849d0(0x1d7)]-MARGIN_SIDE,_0x48f428));if(typeof shipImage!=='undefined'&&typeof LIFE_ICON_MARGIN_BOTTOM!==_0x1849d0(0x238)&&typeof LIFE_ICON_SIZE!=='undefined'&&typeof LIFE_ICON_MARGIN_LEFT!==_0x1849d0(0x238)&&typeof LIFE_ICON_SPACING!=='undefined'){if(shipImage[_0x1849d0(0x13e)]&&shipImage[_0x1849d0(0x1ab)]!==0x0){const _0x19166b=gameCanvas[_0x1849d0(0x215)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE;let _0x2335d3=0x0,_0x15e694=0x0;if(isTwoPlayerMode&&selectedGameMode===_0x1849d0(0x13c)){if(player1Lives>0x0)_0x2335d3=Math[_0x1849d0(0x15a)](0x0,player1Lives-0x1);if(player2Lives>0x0)_0x15e694=Math[_0x1849d0(0x15a)](0x0,player2Lives-0x1);}else{if(playerLives>0x0)_0x2335d3=Math['max'](0x0,playerLives-0x1);}const _0x3fe93b=0x5;for(let _0x173ffc=0x0;_0x173ffc<Math[_0x1849d0(0x188)](_0x2335d3,_0x3fe93b);_0x173ffc++){const _0x4e5364=LIFE_ICON_MARGIN_LEFT+_0x173ffc*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx[_0x1849d0(0x19b)](shipImage,Math[_0x1849d0(0x1ed)](_0x4e5364),Math[_0x1849d0(0x1ed)](_0x19166b),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}if(isTwoPlayerMode&&selectedGameMode===_0x1849d0(0x13c)){const _0x1e67a9=gameCanvas['width']-LIFE_ICON_MARGIN_RIGHT-Math[_0x1849d0(0x188)](_0x15e694,_0x3fe93b)*(LIFE_ICON_SIZE+LIFE_ICON_SPACING)+LIFE_ICON_SPACING;for(let _0x5c0ee8=0x0;_0x5c0ee8<Math[_0x1849d0(0x188)](_0x15e694,_0x3fe93b);_0x5c0ee8++){const _0x26aa2e=_0x1e67a9+_0x5c0ee8*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx['drawImage'](shipImage,Math[_0x1849d0(0x1ed)](_0x26aa2e),Math[_0x1849d0(0x1ed)](_0x19166b),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}}}}gameCtx['restore'](),gameCtx[_0x1849d0(0x207)]();if(isTwoPlayerMode&&selectedGameMode===_0x1849d0(0x13c)){if(ship1&&player1Lives>0x0&&!isPlayer1WaitingForRespawn&&!isPlayer1ShipCaptured){let _0x37761e=!![];if(isPlayer1Invincible){const _0x45391c=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x4b82e2%_0x45391c>=INVINCIBILITY_BLINK_ON_MS)_0x37761e=![];}if(_0x37761e){const _0x630bbc=ship1['x'],_0x3886eb=ship1['y'];typeof shipImage!==_0x1849d0(0x238)&&shipImage[_0x1849d0(0x13e)]?(gameCtx[_0x1849d0(0x19b)](shipImage,Math['round'](_0x630bbc),Math[_0x1849d0(0x1ed)](_0x3886eb),ship1['width'],ship1[_0x1849d0(0x215)]),player1IsDualShipActive&&gameCtx[_0x1849d0(0x19b)](shipImage,Math['round'](_0x630bbc+DUAL_SHIP_OFFSET_X),Math['round'](_0x3886eb),ship1[_0x1849d0(0x1d7)],ship1[_0x1849d0(0x215)])):(gameCtx[_0x1849d0(0x1b3)]=_0x1849d0(0x246),gameCtx[_0x1849d0(0x1d6)](Math[_0x1849d0(0x1ed)](_0x630bbc),Math[_0x1849d0(0x1ed)](_0x3886eb),ship1[_0x1849d0(0x1d7)],ship1[_0x1849d0(0x215)]));}}if(ship2&&player2Lives>0x0&&!isPlayer2WaitingForRespawn&&!isPlayer2ShipCaptured){let _0x6d7d43=!![];if(isPlayer2Invincible){const _0x2f223b=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x4b82e2%_0x2f223b>=INVINCIBILITY_BLINK_ON_MS)_0x6d7d43=![];}if(_0x6d7d43){const _0x5d1009=ship2['x'],_0x1e21a2=ship2['y'];typeof shipImage!==_0x1849d0(0x238)&&shipImage['complete']?(gameCtx['drawImage'](shipImage,Math[_0x1849d0(0x1ed)](_0x5d1009),Math[_0x1849d0(0x1ed)](_0x1e21a2),ship2[_0x1849d0(0x1d7)],ship2[_0x1849d0(0x215)]),player2IsDualShipActive&&gameCtx[_0x1849d0(0x19b)](shipImage,Math[_0x1849d0(0x1ed)](_0x5d1009+DUAL_SHIP_OFFSET_X),Math['round'](_0x1e21a2),ship2[_0x1849d0(0x1d7)],ship2[_0x1849d0(0x215)])):(gameCtx[_0x1849d0(0x1b3)]=_0x1849d0(0x224),gameCtx[_0x1849d0(0x1d6)](Math[_0x1849d0(0x1ed)](_0x5d1009),Math['round'](_0x1e21a2),ship2['width'],ship2[_0x1849d0(0x215)]));}}}else{if(ship&&!isShowingCaptureMessage){let _0x32a6d1=!![];if(isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isInvincible){const _0x113408=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS;if(_0x4b82e2%_0x113408>=INVINCIBILITY_BLINK_ON_MS)_0x32a6d1=![];}if(_0x32a6d1){let _0x3f4afd=ship['x'],_0x1088dc=(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0||!isInGameState||isShowingScoreScreen||isInGameState&&isShowingIntro&&!isManualControl&&(introStep===0x1||introStep===0x2||introStep===0x3))&&!isDualShipActive;_0x1088dc&&(_0x3f4afd=Math[_0x1849d0(0x1ed)](gameCanvas[_0x1849d0(0x1d7)]/0x2-ship[_0x1849d0(0x1d7)]/0x2));const _0x366514=ship['y'];typeof shipImage!==_0x1849d0(0x238)&&shipImage['complete']?(gameCtx['drawImage'](shipImage,Math[_0x1849d0(0x1ed)](_0x3f4afd),Math[_0x1849d0(0x1ed)](_0x366514),ship[_0x1849d0(0x1d7)],ship[_0x1849d0(0x215)]),isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isDualShipActive&&!isShipCaptured&&gameCtx[_0x1849d0(0x19b)](shipImage,Math[_0x1849d0(0x1ed)](_0x3f4afd+DUAL_SHIP_OFFSET_X),Math[_0x1849d0(0x1ed)](_0x366514),ship[_0x1849d0(0x1d7)],ship[_0x1849d0(0x215)])):(gameCtx[_0x1849d0(0x1b3)]='blue',gameCtx[_0x1849d0(0x1d6)](Math[_0x1849d0(0x1ed)](_0x3f4afd),Math[_0x1849d0(0x1ed)](_0x366514),ship[_0x1849d0(0x1d7)],ship['height']));}}}if(fallingShips[_0x1849d0(0x14d)]>0x0&&typeof shipImage!==_0x1849d0(0x238)&&shipImage[_0x1849d0(0x13e)]){}gameCtx[_0x1849d0(0x236)]();if(!isInGameState){if(isShowingScoreScreen){}else{gameCtx[_0x1849d0(0x207)]();const _0x3107b6=gameCanvas[_0x1849d0(0x1d7)],_0x220160=gameCanvas[_0x1849d0(0x215)],_0x53da0b=_0x3107b6/0x2;selectedButtonIndex===-0x1&&(isPlayerSelectMode||isFiringModeSelectMode||isGameModeSelectMode||!isPlayerSelectMode&&!isFiringModeSelectMode&&!isGameModeSelectMode)&&(selectedButtonIndex=0x0);let _0xf6e713=MENU_LOGO_APPROX_HEIGHT,_0x4f0713=_0xf6e713*(logoImage[_0x1849d0(0x20d)]/logoImage[_0x1849d0(0x1ab)]||0x1);typeof logoImage!==_0x1849d0(0x238)&&logoImage[_0x1849d0(0x13e)]&&logoImage['naturalHeight']!==0x0&&(_0xf6e713=logoImage[_0x1849d0(0x1ab)]*LOGO_SCALE_FACTOR,_0x4f0713=logoImage['naturalWidth']*LOGO_SCALE_FACTOR);const _0x10f330=getSubtitleApproxHeight(MENU_SUBTITLE_FONT),_0xfd92ca=_0xf6e713+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0x10f330;let _0x550e29=(_0x220160-_0xfd92ca)/0x2-0x46;_0x550e29+=MENU_GENERAL_Y_OFFSET;const _0x37a200=_0x53da0b-_0x4f0713/0x2,_0x2027cf=_0x550e29+MENU_LOGO_EXTRA_Y_OFFSET;typeof logoImage!==_0x1849d0(0x238)&&logoImage[_0x1849d0(0x13e)]&&logoImage[_0x1849d0(0x1ab)]!==0x0?gameCtx[_0x1849d0(0x19b)](logoImage,Math['round'](_0x37a200),Math[_0x1849d0(0x1ed)](_0x2027cf),_0x4f0713,_0xf6e713):drawCanvasText(_0x1849d0(0x1ba),_0x53da0b,_0x2027cf+_0xf6e713/0x2,'30px\x20Arial',_0x1849d0(0x20a));if(isGameModeSelectMode)drawCanvasButton('NORMAL\x20GAME',0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x1849d0(0x247),0x1,selectedButtonIndex===0x1);else{if(isFiringModeSelectMode)drawCanvasButton(_0x1849d0(0x1f5),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x1849d0(0x217),0x1,selectedButtonIndex===0x1);else isPlayerSelectMode?(drawCanvasButton(_0x1849d0(0x1aa),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x1849d0(0x19f),0x1,selectedButtonIndex===0x1)):(drawCanvasButton(_0x1849d0(0x16f),0x0,selectedButtonIndex===0x0),drawCanvasButton('GAME\x20EXIT',0x1,selectedButtonIndex===0x1));}const _0x1202ef=getMenuButtonRect(0x1);let _0x1f4b82;_0x1202ef?_0x1f4b82=_0x1202ef['y']+_0x1202ef[_0x1849d0(0x215)]+MENU_BUTTON_SUBTITLE_V_GAP+_0x10f330/0x2:_0x1f4b82=_0x550e29+_0xf6e713+MENU_LOGO_BOTTOM_TO_START_GAP+0x2*MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_SUBTITLE_V_GAP+_0x10f330/0x2,drawCanvasText(MENU_SUBTITLE_TEXT,_0x53da0b-0x1,Math[_0x1849d0(0x1ed)](_0x1f4b82),MENU_SUBTITLE_FONT,MENU_SUBTITLE_COLOR,_0x1849d0(0x24b),_0x1849d0(0x227),!![]),gameCtx[_0x1849d0(0x236)]();}}else{if(gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){gameCtx['save']();let _0x2cf043=!showReadyMessage&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!isCsCompletionDelayActive&&!isShowingIntro&&!isShowingCaptureMessage;_0x2cf043&&(bullets['forEach'](_0x46c4d8=>{}),enemyBullets[_0x1849d0(0x229)](_0xe0f427=>{}));enemies[_0x1849d0(0x229)](_0x3c32b6=>{});if(captureBeamActive&&capturingBossId&&captureBeamProgress>0x0){}renderExplosions(),renderFloatingScores(),renderHitSparks();let _0xf69115=![];const _0x268ec0=gameCanvas[_0x1849d0(0x215)]/0x2;if(isPaused){}else{if(isShowingCaptureMessage){}}gameCtx[_0x1849d0(0x236)]();}else{if(isShowingPlayerGameOverMessage){}else{if(gameOverSequenceStartTime>0x0){}}}}}catch(_0x4a2ce8){console[_0x1849d0(0x1c8)](_0x1849d0(0x249),_0x4a2ce8,_0x4a2ce8[_0x1849d0(0x164)]);}}function handleEnemyHit(_0x4458a0,_0x28f49b=null){const _0x4eb34c=_0x33d7d9;if(!_0x4458a0)return{'destroyed':![],'pointsAwarded':0x0};const _0x1954a5=Date[_0x4eb34c(0x237)]();let _0x251c8a=0x0,_0x1cbf7e=![],_0x360173=_0x4458a0[_0x4eb34c(0x231)],_0x34cc39=null;const _0x908510=_0x4458a0['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x4458a0['type']===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x497387=_0x4458a0['type']===ENEMY3_TYPE?BOSS_HEIGHT:_0x4458a0[_0x4eb34c(0x242)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x4643eb=_0x4458a0[_0x4eb34c(0x242)]===ENEMY3_TYPE&&_0x4458a0[_0x4eb34c(0x1c9)],_0x4b75cb=_0x4458a0[_0x4eb34c(0x242)]===ENEMY3_TYPE&&_0x4458a0[_0x4eb34c(0x18c)];let _0x4a7f2f=![],_0xd4ebb6=null;if(_0x4643eb){if(isTwoPlayerMode&&selectedGameMode===_0x4eb34c(0x13c)){if(isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x4458a0['id'])_0x4a7f2f=!![],_0xd4ebb6=_0x4eb34c(0x16a);else isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x4458a0['id']&&(_0x4a7f2f=!![],_0xd4ebb6='player2');}else!isTwoPlayerMode&&isShipCaptured&&capturedBossIdWithMessage===_0x4458a0['id']&&(_0x4a7f2f=!![]);}const _0x8df177=_0x4458a0['x']+_0x908510/0x2,_0x29aea6=_0x4458a0['y']+_0x497387*0.2;createHitSparks(_0x8df177,_0x29aea6),_0x4458a0[_0x4eb34c(0x187)]--;_0x4458a0[_0x4eb34c(0x242)]===ENEMY3_TYPE&&(_0x4458a0['isDamaged']=_0x4458a0[_0x4eb34c(0x187)]<ENEMY3_MAX_HITS);if(_0x4458a0[_0x4eb34c(0x187)]<=0x0){_0x1cbf7e=!![];isChallengingStage&&challengingStageEnemiesHit++;let _0x378451=null;if(_0x4643eb&&_0x4b75cb){if(isCoopAIDemoActive)_0x4a7f2f&&_0xd4ebb6?_0x378451=_0xd4ebb6:_0x378451=_0x28f49b;else{if(isTwoPlayerMode&&selectedGameMode===_0x4eb34c(0x13c)){if(_0x4a7f2f){if(isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x4458a0['id'])_0x378451=_0x4eb34c(0x16a);else{if(isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x4458a0['id'])_0x378451=_0x4eb34c(0x178);else _0x378451=_0x28f49b;}}else _0x378451=_0x28f49b;}else _0x378451=_0x28f49b;}if(_0x4458a0['capturedShipDimensions']){const _0x5d1100=_0x4458a0[_0x4eb34c(0x18c)]['width'],_0x32781f=_0x4458a0[_0x4eb34c(0x18c)][_0x4eb34c(0x215)],_0xd70ca7=_0x4458a0['x']+(_0x908510-_0x5d1100)/0x2+CAPTURED_SHIP_OFFSET_X,_0x4f0b03=_0x4458a0['y']+CAPTURED_SHIP_OFFSET_Y,_0x50eac5=fallingShips[_0x4eb34c(0x21c)](_0x5c2e7f=>Math['abs'](_0x5c2e7f['x']-_0xd70ca7)<0x1&&Math[_0x4eb34c(0x1f4)](_0x5c2e7f['y']-_0x4f0b03)<0x1);!_0x50eac5&&fallingShips[_0x4eb34c(0x1e1)]({'x':_0xd70ca7,'y':_0x4f0b03,'width':_0x5d1100,'height':_0x32781f,'creationTime':_0x1954a5,'tintProgress':0x1,'rotation':0x0,'rotationDirection':Math['random']()<0.5?-0x1:0x1,'totalRotation':0x0,'rotationCompleted':![],'targetPlayerId':_0x378451});}else console[_0x4eb34c(0x1c8)](_0x4eb34c(0x221));_0x4458a0['hasCapturedShip']=![],_0x4458a0[_0x4eb34c(0x18c)]=null;}else _0x4643eb&&!_0x4b75cb&&(console[_0x4eb34c(0x1c8)]('[handleEnemyHit]\x20CRITICAL:\x20Boss\x20'+_0x4458a0['id']+_0x4eb34c(0x1e8)),_0x4458a0[_0x4eb34c(0x1c9)]=![],_0x4458a0[_0x4eb34c(0x18c)]=null);if(isChallengingStage){let _0x466770=0x64;const _0x88b1b0=csLastHitTime;csLastHitTime=_0x1954a5,csLastChainHitPosition={'x':_0x4458a0['x'],'y':_0x4458a0['y']},csCurrentChainHits>0x0&&_0x1954a5-_0x88b1b0<CS_CHAIN_BREAK_TIME_MS?csCurrentChainHits++:(csCurrentChainHits=0x1,csCurrentChainScore=0x0),csCurrentChainHits>=CS_CHAIN_SCORE_THRESHOLD&&(_0x466770*=0x2),_0x251c8a=_0x466770,csCurrentChainScore+=_0x251c8a,scoreEarnedThisCS+=_0x251c8a,_0x34cc39=explosionSound;}else{if(_0x4458a0[_0x4eb34c(0x230)]===_0x4eb34c(0x18d))_0x251c8a=_0x4458a0['type']===ENEMY1_TYPE?0x32:_0x4458a0[_0x4eb34c(0x242)]===ENEMY2_TYPE?0x50:0x0,_0x4458a0[_0x4eb34c(0x242)]===ENEMY3_TYPE&&(_0x251c8a=0x96),_0x34cc39=explosionSound;else{_0x251c8a=_0x4458a0[_0x4eb34c(0x242)]===ENEMY1_TYPE?0x64:_0x4458a0['type']===ENEMY2_TYPE?0xa0:0x0;if(_0x4458a0[_0x4eb34c(0x242)]===ENEMY3_TYPE){if(_0x4643eb){const _0x5899ea=[0x3e8,0x5dc,0x7d0,0xbb8];_0x251c8a=_0x5899ea[Math[_0x4eb34c(0x1a7)](Math['random']()*_0x5899ea[_0x4eb34c(0x14d)])],_0x34cc39=bossHit2Sound;}else _0x360173?(_0x251c8a=0x190,_0x34cc39=bossHit2Sound):(_0x251c8a=0x0,console['warn'](_0x4eb34c(0x24a)+_0x251c8a+_0x4eb34c(0x1ef)+(_0x4458a0['health']+0x1)),_0x34cc39=explosionSound);}else _0x34cc39=explosionSound;if(_0x1cbf7e&&_0x251c8a>0x0){const _0x315da7=normalWaveLastHitTime;normalWaveLastHitTime=_0x1954a5,normalWaveLastChainHitPosition={'x':_0x4458a0['x'],'y':_0x4458a0['y']};normalWaveLastChainHitPosition&&_0x1954a5-_0x315da7<NORMAL_WAVE_CHAIN_BREAK_TIME_MS?normalWaveCurrentChainHits++:(normalWaveCurrentChainHits=0x1,normalWaveCurrentChainScore=0x0);if(NORMAL_WAVE_CHAIN_BONUS_ENABLED&&normalWaveCurrentChainHits>=NORMAL_WAVE_CHAIN_SCORE_THRESHOLD){const _0x87a6a3=[0x12c,0x258,0x3e8,0x5dc,0x7d0,0xbb8],_0x58d196=Math[_0x4eb34c(0x188)](_0x87a6a3[_0x4eb34c(0x14d)]-0x1,normalWaveCurrentChainHits-NORMAL_WAVE_CHAIN_SCORE_THRESHOLD),_0x466927=_0x87a6a3[_0x58d196];_0x251c8a+=_0x466927,normalWaveCurrentChainScore+=_0x466927;}}}}if(_0x251c8a>0x0){let _0x1ec556=null;if(!isManualControl){if(isCoopAIDemoActive){if(_0x28f49b===_0x4eb34c(0x16a))player1Score+=_0x251c8a,_0x1ec556=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(hiScoreSound))),checkAndAwardExtraLife(0x1);else{if(_0x28f49b===_0x4eb34c(0x178))player2Score+=_0x251c8a,_0x1ec556=()=>player2EnemiesHit++,player2Score>highScore&&(highScore=player2Score,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound(hiScoreSound))),checkAndAwardExtraLife(0x2);else{player1Score+=_0x251c8a,_0x1ec556=()=>player1EnemiesHit++;if(player1Score>highScore)highScore=player1Score;checkAndAwardExtraLife(0x1);}}}else score+=_0x251c8a,player1Score=score,_0x1ec556=()=>player1EnemiesHit++,score>highScore&&(highScore=score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(hiScoreSound))),checkAndAwardExtraLife(0x1);}else{if(isTwoPlayerMode&&selectedGameMode===_0x4eb34c(0x13c)){if(_0x28f49b===_0x4eb34c(0x16a))player1Score+=_0x251c8a,_0x1ec556=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(hiScoreSound))),checkAndAwardExtraLife(0x1);else _0x28f49b===_0x4eb34c(0x178)?(player2Score+=_0x251c8a,_0x1ec556=()=>player2EnemiesHit++,player2Score>highScore&&(highScore=player2Score,!player2TriggeredHighScoreSound&&(player2TriggeredHighScoreSound=!![],playSound(hiScoreSound))),checkAndAwardExtraLife(0x2)):(player1Score+=_0x251c8a,_0x1ec556=()=>player1EnemiesHit++,player1Score>highScore&&(highScore=player1Score,!player1TriggeredHighScoreSound&&(player1TriggeredHighScoreSound=!![],playSound(hiScoreSound))),checkAndAwardExtraLife(0x1));}else{score+=_0x251c8a;let _0x553013=score,_0x479862=null,_0x19b848=currentPlayer;currentPlayer===0x1||!isTwoPlayerMode?(player1Score=score,_0x1ec556=()=>player1EnemiesHit++,_0x479862=()=>{player1TriggeredHighScoreSound=!![];}):(player2Score=score,_0x1ec556=()=>player2EnemiesHit++,_0x479862=()=>{player2TriggeredHighScoreSound=!![];});if(_0x553013>highScore){highScore=_0x553013;const _0x391fbc=currentPlayer===0x1||!isTwoPlayerMode?player1TriggeredHighScoreSound:player2TriggeredHighScoreSound;!_0x391fbc&&_0x479862&&(_0x479862(),playSound(hiScoreSound));}checkAndAwardExtraLife(_0x19b848);}}_0x1ec556&&!isChallengingStage&&_0x1ec556();const _0x1740aa=_0x4458a0[_0x4eb34c(0x230)]===_0x4eb34c(0x18d)||isChallengingStage?FLOATING_SCORE_COLOR_GRID:FLOATING_SCORE_COLOR_ACTIVE;floatingScores[_0x4eb34c(0x1e1)]({'text':_0x251c8a[_0x4eb34c(0x199)](),'x':_0x4458a0['x']+_0x908510/0x2,'y':_0x4458a0['y'],'color':_0x1740aa,'creationTime':_0x1954a5,'displayStartTime':_0x1954a5+FLOATING_SCORE_APPEAR_DELAY});}createExplosion(_0x4458a0['x']+_0x908510/0x2,_0x4458a0['y']+_0x497387/0x2);_0x4458a0['id']===capturingBossId&&stopSound(captureSound);if(_0x4458a0[_0x4eb34c(0x230)]===_0x4eb34c(0x21b)||_0x4458a0[_0x4eb34c(0x230)]===_0x4eb34c(0x1c1)||_0x4458a0[_0x4eb34c(0x230)]==='diving_to_capture_position'||_0x4458a0[_0x4eb34c(0x230)]===_0x4eb34c(0x142)||_0x4458a0[_0x4eb34c(0x230)]===_0x4eb34c(0x1bd)||_0x4458a0['state']==='showing_capture_message'){if(_0x4458a0[_0x4eb34c(0x242)]===ENEMY3_TYPE)stopSound(bossGalagaDiveSound);else stopSound(butterflyDiveSound);}}else _0x1cbf7e=![],_0x4458a0[_0x4eb34c(0x242)]===ENEMY3_TYPE?(_0x34cc39=bossHit1Sound,_0x251c8a=0x0):_0x251c8a=0x0;return _0x34cc39&&playSound(_0x34cc39),{'destroyed':_0x1cbf7e,'pointsAwarded':_0x251c8a};}function createHitSparks(_0x11ea1a,_0x5e80ac){const _0xed341=_0x33d7d9;if(!gameCtx)return;const _0x7bbeef=Date['now']();for(let _0x9df7f8=0x0;_0x9df7f8<HIT_SPARK_COUNT;_0x9df7f8++){const _0x1379cd=Math[_0xed341(0x1cc)]()*Math['PI']*0x2,_0x226845=HIT_SPARK_SPEED*(0.7+Math[_0xed341(0x1cc)]()*0.6),_0x62bc6d=HIT_SPARK_LIFETIME*(0.8+Math['random']()*0.4);hitSparks[_0xed341(0x1e1)]({'x':_0x11ea1a,'y':_0x5e80ac,'vx':Math['cos'](_0x1379cd)*_0x226845,'vy':Math[_0xed341(0x222)](_0x1379cd)*_0x226845,'creationTime':_0x7bbeef,'lifetime':_0x62bc6d,'size':HIT_SPARK_SIZE,'color':HIT_SPARK_COLOR});}}function updateHitSparks(){const _0x46e576=_0x33d7d9,_0x2c41cd=Date['now']();for(let _0x31412c=hitSparks['length']-0x1;_0x31412c>=0x0;_0x31412c--){const _0x36e881=hitSparks[_0x31412c],_0x3490de=_0x2c41cd-_0x36e881[_0x46e576(0x175)];_0x3490de>=_0x36e881[_0x46e576(0x234)]?hitSparks[_0x46e576(0x15d)](_0x31412c,0x1):(_0x36e881['vy']+=HIT_SPARK_GRAVITY,_0x36e881['x']+=_0x36e881['vx'],_0x36e881['y']+=_0x36e881['vy'],_0x36e881[_0x46e576(0x179)]=Math[_0x46e576(0x15a)](0x0,0x1-_0x3490de*HIT_SPARK_FADE_SPEED));}}function moveEntities(){const _0x29e841=_0x33d7d9;try{if(isPaused)return;const _0x56c0ee=Date['now']();}catch(_0x4a098b){console['error'](_0x29e841(0x148),_0x4a098b,_0x4a098b[_0x29e841(0x164)]),isGridSoundPlaying=![],stopSound(gridBackgroundSound),isEntrancePhaseActive=![],stopSound(entranceSound),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(captureSound),stopSound(shipCapturedSound),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0x29e841(0x211))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert('Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.');}}function switchPlayerTurn(){const _0x1eda24=_0x33d7d9;if(!isTwoPlayerMode||selectedGameMode===_0x1eda24(0x13c))return![];stopSound(hiScoreSound);if(currentPlayer===0x1){player1Score=score,player1IsDualShipActive=isDualShipActive;if(player1Score>highScore)highScore=player1Score;}else{player2Score=score,player2IsDualShipActive=isDualShipActive;if(player2Score>highScore)highScore=player2Score;}const _0x398744=currentPlayer===0x1?0x2:0x1,_0x48614=_0x398744===0x1?player1Lives:player2Lives;if(_0x48614<=0x0){const _0x3b3920=currentPlayer===0x1?player1Lives:player2Lives;return _0x3b3920<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x398744,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function firePlayerBullet(_0x5a93e7=null){const _0x32f264=_0x33d7d9,_0x25f206=Date[_0x32f264(0x237)](),_0x431e64=isTwoPlayerMode&&selectedGameMode==='coop'&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x25f206<coopPlayersReadyStartTime+0x1f40;if(_0x431e64)return![];let _0x380754=![],_0x42c4a7=null,_0x231c75=![],_0xa8b0da=0x0,_0x592a5c=_0x37e902=>{},_0x289ebc=_0x3269f2=>{},_0x2163ae=![],_0x4c686a=()=>![],_0x27af89=_0x38570d=>{},_0x5094ad=_0x5a93e7;const _0x409693=!isPaused&&isInGameState&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!showReadyMessage&&!isCsCompletionDelayActive&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x32f264(0x13c)&&(_0x5a93e7===_0x32f264(0x16a)&&isPlayer1ShowingGameOverMessage||_0x5a93e7===_0x32f264(0x178)&&isPlayer2ShowingGameOverMessage));if(!_0x409693)return![];if(isTwoPlayerMode&&selectedGameMode==='coop'){if(_0x5a93e7==='player1'&&ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!player1NeedsRespawnAfterCapture)(!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer1ShipCaptured)&&(_0x42c4a7=ship1,_0x231c75=player1IsDualShipActive,_0xa8b0da=player1LastShotTime,_0x592a5c=_0x437773=>{player1LastShotTime=_0x437773;},_0x289ebc=_0x45683f=>{player1ShotsFired+=_0x45683f;},_0x2163ae=selectedFiringMode===_0x32f264(0x136),_0x4c686a=()=>p1JustFiredSingle,_0x27af89=_0x6453cd=>{p1JustFiredSingle=_0x6453cd;},_0x380754=!![]);else _0x5a93e7===_0x32f264(0x178)&&ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!player2NeedsRespawnAfterCapture&&((!isShowingCaptureMessage||isShowingCaptureMessage&&!isPlayer2ShipCaptured)&&(_0x42c4a7=ship2,_0x231c75=player2IsDualShipActive,_0xa8b0da=player2LastShotTime,_0x592a5c=_0x97347f=>{player2LastShotTime=_0x97347f;},_0x289ebc=_0x20e0ec=>{player2ShotsFired+=_0x20e0ec;},_0x2163ae=selectedFiringMode===_0x32f264(0x136),_0x4c686a=()=>p2JustFiredSingle,_0x27af89=_0x3f502e=>{p2JustFiredSingle=_0x3f502e;},_0x380754=!![]));}else{if(ship&&playerLives>0x0&&!isShipCaptured){_0x42c4a7=ship,_0x231c75=isDualShipActive;isTwoPlayerMode?currentPlayer===0x1?(_0xa8b0da=player1LastShotTime,_0x592a5c=_0x42d856=>{player1LastShotTime=_0x42d856;},_0x289ebc=_0x19a7e7=>{player1ShotsFired+=_0x19a7e7;},_0x2163ae=selectedFiringMode==='single',_0x4c686a=()=>p1JustFiredSingle,_0x27af89=_0x1e7300=>{p1JustFiredSingle=_0x1e7300;}):(_0xa8b0da=player2LastShotTime,_0x592a5c=_0x2f99fc=>{player2LastShotTime=_0x2f99fc;},_0x289ebc=_0x11e3cb=>{player2ShotsFired+=_0x11e3cb;},_0x2163ae=selectedFiringMode===_0x32f264(0x136),_0x4c686a=()=>p2JustFiredSingle,_0x27af89=_0x200333=>{p2JustFiredSingle=_0x200333;}):(_0xa8b0da=player1LastShotTime,_0x592a5c=_0x3724e2=>{player1LastShotTime=_0x3724e2;},_0x289ebc=_0x5028cb=>{player1ShotsFired+=_0x5028cb;},_0x2163ae=selectedFiringMode==='single',_0x4c686a=()=>p1JustFiredSingle,_0x27af89=_0x4286da=>{p1JustFiredSingle=_0x4286da;});if(!_0x5094ad&&isTwoPlayerMode)_0x5094ad=_0x32f264(0x24e)+currentPlayer;else{if(!_0x5094ad)_0x5094ad='player1';}_0x380754=!![];}}_0x5a93e7===null&&!isManualControl&&!isCoopAIDemoActive&&ship&&playerLives>0x0&&!isShipCaptured&&!isShowingCaptureMessage&&(_0x42c4a7=ship,_0x231c75=isDualShipActive,_0xa8b0da=aiLastShotTime,_0x592a5c=_0x449b1e=>{aiLastShotTime=_0x449b1e;},_0x289ebc=_0x1d06a0=>{player1ShotsFired+=_0x1d06a0;},_0x2163ae=![],_0x380754=!![],_0x5094ad='ai');if(!_0x380754||!_0x42c4a7)return![];if(_0x2163ae){let _0x24c094=![];if(_0x5094ad===_0x32f264(0x16a))_0x24c094=p1FireInputWasDown;else{if(_0x5094ad===_0x32f264(0x178))_0x24c094=p2FireInputWasDown;}if(_0x4c686a()){if(_0x24c094&&isManualControl)return![];else _0x27af89(![]);}}else{if(_0x25f206-_0xa8b0da<SHOOT_COOLDOWN)return![];}try{const _0x4d0fe2=_0x42c4a7['y'];let _0x4b8a48=0x0;if(_0x231c75){const _0x1ffed0=_0x42c4a7['x']+_0x42c4a7[_0x32f264(0x1d7)]/0x2,_0x529961=_0x42c4a7['x']+DUAL_SHIP_OFFSET_X+_0x42c4a7[_0x32f264(0x1d7)]/0x2,_0xd2a6e7=_0x1ffed0-PLAYER_BULLET_WIDTH/0x2,_0x58cac2=_0x529961-PLAYER_BULLET_WIDTH/0x2;bullets['push']({'x':_0xd2a6e7,'y':_0x4d0fe2,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x5094ad}),bullets[_0x32f264(0x1e1)]({'x':_0x58cac2,'y':_0x4d0fe2,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x5094ad}),_0x4b8a48=0x2;}else{const _0x119d34=_0x42c4a7['x']+_0x42c4a7[_0x32f264(0x1d7)]/0x2-PLAYER_BULLET_WIDTH/0x2;bullets[_0x32f264(0x1e1)]({'x':_0x119d34,'y':_0x4d0fe2,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x5094ad}),_0x4b8a48=0x1;}if(_0x2163ae)_0x27af89(!![]);return playSound(playerShootSound),_0x289ebc(_0x4b8a48),_0x592a5c(_0x25f206),!![];}catch(_0x4f7d11){return console[_0x32f264(0x1c8)](_0x32f264(0x150),_0x4f7d11),![];}}function handlePlayerInput(){const _0xb0b18f=_0x33d7d9;try{const _0x1aaf2f=Date[_0xb0b18f(0x237)](),_0x2f372a=isTwoPlayerMode&&selectedGameMode===_0xb0b18f(0x13c)&&level===0x1&&coopPlayersReadyStartTime>0x0&&_0x1aaf2f<coopPlayersReadyStartTime+0x1f40;if(isCoopAIDemoActive){leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![];return;}let _0x11f999=isPaused||!isManualControl||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isTwoPlayerMode&&selectedGameMode===_0xb0b18f(0x13c)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage);if(_0x11f999){keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![];return;}let _0x20ed26=![],_0x5a1789=![],_0x4a108a=![],_0x2e5cae=![],_0x4e4f29=![],_0xa7bc0=![];if(connectedGamepadIndex!==null){const _0x59345e=navigator['getGamepads']();if(_0x59345e?.[connectedGamepadIndex]){const _0x297c39=_0x59345e[connectedGamepadIndex],_0x16c977=processSingleController(_0x297c39,previousGameButtonStates);_0x20ed26=_0x16c977[_0xb0b18f(0x1be)],_0x5a1789=_0x16c977[_0xb0b18f(0x24d)],_0x4a108a=_0x16c977[_0xb0b18f(0x1fb)],previousGameButtonStates=_0x16c977[_0xb0b18f(0x1c2)]['slice']();if(_0x16c977[_0xb0b18f(0x19e)]&&!isShowingCaptureMessage){togglePause();return;}if(_0x16c977['back']&&!isShowingCaptureMessage){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates[_0xb0b18f(0x14d)]>0x0)previousGameButtonStates=[];}}else{if(previousGameButtonStates['length']>0x0)previousGameButtonStates=[];}if(isTwoPlayerMode&&connectedGamepadIndexP2!==null&&connectedGamepadIndexP2!==connectedGamepadIndex){const _0x3dc74e=navigator[_0xb0b18f(0x241)]();if(_0x3dc74e?.[connectedGamepadIndexP2]){const _0x57d490=_0x3dc74e[connectedGamepadIndexP2],_0x3546d0=processSingleController(_0x57d490,previousGameButtonStatesP2);_0x2e5cae=_0x3546d0[_0xb0b18f(0x1be)],_0x4e4f29=_0x3546d0[_0xb0b18f(0x24d)],_0xa7bc0=_0x3546d0[_0xb0b18f(0x1fb)],previousGameButtonStatesP2=_0x3546d0[_0xb0b18f(0x1c2)][_0xb0b18f(0x23c)]();}else{if(previousGameButtonStatesP2[_0xb0b18f(0x14d)]>0x0)previousGameButtonStatesP2=[];}}else{if(previousGameButtonStatesP2[_0xb0b18f(0x14d)]>0x0)previousGameButtonStatesP2=[];}p1FireInputWasDown=keyboardP1ShootDown||_0x4a108a,p2FireInputWasDown=keyboardP2ShootDown||_0xa7bc0,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![];if(isTwoPlayerMode&&selectedGameMode===_0xb0b18f(0x13c)){const _0x94a0f6=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture;if(_0x94a0f6){leftPressed=keyboardP1LeftDown||_0x20ed26,rightPressed=keyboardP1RightDown||_0x5a1789,shootPressed=!_0x2f372a&&(keyboardP1ShootDown||_0x4a108a);if(isShowingCaptureMessage&&isPlayer1ShipCaptured)shootPressed=![];}const _0x19a80e=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture;if(_0x19a80e){connectedGamepadIndexP2!==null&&connectedGamepadIndexP2!==connectedGamepadIndex?(p2LeftPressed=keyboardP2LeftDown||_0x2e5cae,p2RightPressed=keyboardP2RightDown||_0x4e4f29,p2ShootPressed=!_0x2f372a&&(keyboardP2ShootDown||_0xa7bc0)):(p2LeftPressed=keyboardP2LeftDown,p2RightPressed=keyboardP2RightDown,p2ShootPressed=!_0x2f372a&&keyboardP2ShootDown);if(isShowingCaptureMessage&&isPlayer2ShipCaptured)p2ShootPressed=![];}}else{if(isTwoPlayerMode&&selectedGameMode==='normal'){const _0x51a378=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;if(_0x51a378){if(currentPlayer===0x1)leftPressed=keyboardP1LeftDown||_0x20ed26,rightPressed=keyboardP1RightDown||_0x5a1789,shootPressed=!isShowingIntro&&(keyboardP1ShootDown||_0x4a108a),p2FireInputWasDown&&!(connectedGamepadIndexP2!==null&&connectedGamepadIndexP2!==connectedGamepadIndex&&keyboardP2ShootDown)&&(p2FireInputWasDown=![]);else{let _0x398a62=![],_0x40c2d7=![],_0x43c38c=![];if(connectedGamepadIndexP2!==null&&connectedGamepadIndexP2!==connectedGamepadIndex)_0x398a62=_0x2e5cae,_0x40c2d7=_0x4e4f29,_0x43c38c=_0xa7bc0,p2FireInputWasDown=keyboardP2ShootDown||_0xa7bc0;else connectedGamepadIndex!==null&&(_0x398a62=_0x20ed26,_0x40c2d7=_0x5a1789,_0x43c38c=_0x4a108a,p2FireInputWasDown=_0x4a108a);leftPressed=keyboardP2LeftDown||_0x398a62,rightPressed=keyboardP2RightDown||_0x40c2d7,shootPressed=!isShowingIntro&&(keyboardP2ShootDown||_0x43c38c),p1FireInputWasDown=![];}if(isShowingCaptureMessage&&isShipCaptured)shootPressed=![];}}else{const _0x44ae23=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;if(_0x44ae23){leftPressed=keyboardP1LeftDown||_0x20ed26,rightPressed=keyboardP1RightDown||_0x5a1789,shootPressed=!isShowingIntro&&(keyboardP1ShootDown||_0x4a108a);if(isShowingCaptureMessage&&isShipCaptured)shootPressed=![];}p2FireInputWasDown=![];}}if(isManualControl){if(isTwoPlayerMode&&selectedGameMode===_0xb0b18f(0x13c))ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture&&shootPressed&&firePlayerBullet('player1'),ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture&&p2ShootPressed&&firePlayerBullet(_0xb0b18f(0x178));else{const _0x4e0cbf=ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;_0x4e0cbf&&shootPressed&&firePlayerBullet(currentPlayer===0x1||!isTwoPlayerMode?_0xb0b18f(0x16a):_0xb0b18f(0x178));}}}catch(_0x34f7b1){console['error']('Error\x20handling\x20player\x20input:',_0x34f7b1),leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![];}}function aiControl(){const _0x209f4d=_0x33d7d9;try{if(isCoopAIDemoActive)return;if(isPaused||isManualControl||playerLives<=0x0||!ship||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isShipCaptured||isShowingCaptureMessage){if(ship)ship[_0x209f4d(0x1a8)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x209f4d(0x1d7)]/0x2:0x0;return;}if(smoothedShipX===undefined&&ship)smoothedShipX=ship['x'];else{if(smoothedShipX===undefined&&!ship){smoothedShipX=gameCanvas?gameCanvas[_0x209f4d(0x1d7)]/0x2:0x0;return;}}const _0x4ffdd4=Date[_0x209f4d(0x237)](),_0xe5035f=gameCanvas[_0x209f4d(0x1d7)],_0x1ef5cd=gameCanvas[_0x209f4d(0x215)];let _0x36e537=ship[_0x209f4d(0x1d7)];isDualShipActive&&(_0x36e537=DUAL_SHIP_OFFSET_X+ship['width']);const _0x31d764=ship['x']+_0x36e537/0x2,_0x270648=ship['y'],_0x54d75c=_0xe5035f/0x2,_0x3e875c=_0x54d75c-_0x36e537/0x2,_0x54c01f=showReadyMessage||showCSClearMessage||showCsHitsMessage||showPerfectMessage||showCsBonusScoreMessage||showExtraLifeMessage||isCsCompletionDelayActive||isShowingCaptureMessage||isShowingIntro;let _0x1a9684=smoothedShipX,_0x386c46=![],_0x5e4a51=![],_0x814252=smoothedShipX,_0x5f2021=null,_0x2a7d29=![];const _0x26994b=isDualShipActive;aiNeedsStabilization&&!_0x54c01f&&(aiStabilizationEndTime=_0x4ffdd4+AI_STABILIZATION_DURATION,aiNeedsStabilization=![],smoothedShipX=ship['x']);if(_0x4ffdd4<aiStabilizationEndTime&&!_0x54c01f)_0x1a9684=_0x3e875c;else{if(!_0x54c01f){_0x5e4a51=![],_0x814252=smoothedShipX;if(!isInvincible){let _0x5e81fb=[];const _0x5c8a9=isChallengingStage?FINAL_DODGE_LOOKAHEAD*0.9:isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_LOOKAHEAD*1.1:FINAL_DODGE_LOOKAHEAD*1.2,_0x10272f=isChallengingStage?FINAL_DODGE_BUFFER_BASE*0.9:isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_BUFFER*1.1:FINAL_DODGE_BUFFER_BASE*1.2,_0x559830={'x':ship['x']-_0x10272f,'y':ship['y']-_0x5c8a9,'width':_0x36e537+_0x10272f*0x2,'height':_0x5c8a9+ship[_0x209f4d(0x215)]};for(const _0x3d99d1 of enemyBullets){if(_0x3d99d1&&_0x3d99d1['y']+_0x3d99d1[_0x209f4d(0x215)]>ship['y']-ship[_0x209f4d(0x215)]*0x2&&_0x3d99d1['y']<_0x1ef5cd){const _0x2f6e81={'x':_0x3d99d1['x'],'y':_0x3d99d1['y'],'width':_0x3d99d1[_0x209f4d(0x1d7)],'height':_0x3d99d1[_0x209f4d(0x215)]};checkCollision(_0x559830,_0x2f6e81)&&_0x5e81fb[_0x209f4d(0x1e1)](_0x3d99d1);}}if(_0x5e81fb['length']>0x0){_0x5e4a51=!![];let _0x378380=smoothedShipX,_0x1bc2e6=-Infinity;for(let _0x32a213=-0x1;_0x32a213<=0x1;_0x32a213+=0x2){const _0x56aef2=_0x36e537*(0x2+Math[_0x209f4d(0x1cc)]()*0.5)+(_0x5e81fb[_0x209f4d(0x14d)]>0x1?_0x36e537*0.5:0x0);let _0x5ee49a=smoothedShipX+_0x32a213*_0x56aef2;_0x5ee49a=Math[_0x209f4d(0x15a)](AI_ANTI_CORNER_BUFFER,Math[_0x209f4d(0x188)](_0xe5035f-_0x36e537-AI_ANTI_CORNER_BUFFER,_0x5ee49a));let _0x175adb=0x0;const _0x2daa69={'x':_0x5ee49a-_0x10272f/0x2,'y':ship['y']-_0x5c8a9,'width':_0x36e537+_0x10272f,'height':_0x5c8a9+ship[_0x209f4d(0x215)]};for(const _0x182bb8 of _0x5e81fb){checkCollision(_0x2daa69,{'x':_0x182bb8['x'],'y':_0x182bb8['y'],'width':_0x182bb8[_0x209f4d(0x1d7)],'height':_0x182bb8[_0x209f4d(0x215)]})&&_0x175adb++;}let _0xf10017=-_0x175adb;if(Math[_0x209f4d(0x1f4)](_0x5ee49a-smoothedShipX)<_0x36e537*0.5)_0xf10017-=0xa;_0xf10017>_0x1bc2e6&&(_0x1bc2e6=_0xf10017,_0x378380=_0x5ee49a);}_0x814252=_0x378380;}if(!_0x5e4a51){const _0x2bed35=AI_COLLISION_LOOKAHEAD*1.5,_0x56f802=FINAL_DODGE_BUFFER_BASE*1.5;for(const _0x5424a6 of enemies){if(_0x5424a6&&(_0x5424a6[_0x209f4d(0x230)]===_0x209f4d(0x21b)||_0x5424a6[_0x209f4d(0x230)]==='diving_to_capture_position'||_0x5424a6[_0x209f4d(0x230)]===_0x209f4d(0x1c1)||_0x5424a6[_0x209f4d(0x230)]===_0x209f4d(0x142))&&_0x5424a6['y']+_0x5424a6[_0x209f4d(0x215)]>ship['y']-_0x2bed35/0x2&&_0x5424a6['y']<ship['y']+ship['height']){const _0x2eacab={'x':ship['x']-_0x56f802,'y':ship['y']-_0x2bed35,'width':_0x36e537+_0x56f802*0x2,'height':_0x2bed35+ship[_0x209f4d(0x215)]},_0x70214f={'x':_0x5424a6['x'],'y':_0x5424a6['y'],'width':_0x5424a6[_0x209f4d(0x1d7)],'height':_0x5424a6[_0x209f4d(0x215)]};if(checkCollision(_0x2eacab,_0x70214f)){_0x5e4a51=!![];const _0x34ffc5=_0x5424a6['x']+_0x5424a6['width']/0x2,_0x31aee3=_0x31d764<_0x34ffc5?-0x1:0x1,_0x32128b=_0x36e537*(2.2+Math['random']()*0.6);_0x814252=smoothedShipX+_0x31aee3*_0x32128b;break;}}}}}if(_0x5e4a51)_0x1a9684=Math['max'](AI_ANTI_CORNER_BUFFER,Math[_0x209f4d(0x188)](_0xe5035f-_0x36e537-AI_ANTI_CORNER_BUFFER,_0x814252)),_0x5f2021=null,_0x386c46=![];else{if(fallingShips[_0x209f4d(0x14d)]>0x0&&!isShipCaptured&&!isWaitingForRespawn&&!isDualShipActive){const _0x3cc121=fallingShips[0x0];if(_0x3cc121){const _0x34dad5=_0x3cc121['x']+_0x3cc121[_0x209f4d(0x1d7)]/0x2;_0x1a9684=_0x34dad5-_0x36e537/0x2,_0x1a9684=Math[_0x209f4d(0x15a)](AI_EDGE_BUFFER,Math[_0x209f4d(0x188)](_0xe5035f-_0x36e537-AI_EDGE_BUFFER,_0x1a9684)),_0x5f2021=null;let _0x1f0958=-Infinity,_0xd675df=null;for(const _0x6caf76 of enemies){if(_0x6caf76&&_0x6caf76['y']<_0x270648){const _0x2b77bc=_0x6caf76['x']+_0x6caf76[_0x209f4d(0x1d7)]/0x2,_0x27d73e=Math['abs'](_0x2b77bc-_0x31d764),_0x268754=_0x270648-(_0x6caf76['y']+_0x6caf76['height']);if(_0x27d73e<_0x36e537*1.5&&_0x268754>0x0){const _0x57080e=_0x1ef5cd-_0x6caf76['y']-_0x27d73e*0x2-_0x268754;_0x57080e>_0x1f0958&&(_0x1f0958=_0x57080e,_0xd675df=_0x6caf76);}}}if(_0xd675df){let _0x19f6a9=!![];const _0x147a2c={'x':ship['x']-ENTRANCE_SHOOT_BULLET_CHECK_BUFFER/0x2,'y':ship['y']-ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD,'width':_0x36e537+ENTRANCE_SHOOT_BULLET_CHECK_BUFFER,'height':ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD+ship[_0x209f4d(0x215)]};for(const _0x19c6a7 of enemyBullets){if(_0x19c6a7&&_0x19c6a7['y']+_0x19c6a7[_0x209f4d(0x215)]>0x0&&_0x19c6a7['y']<_0x1ef5cd){const _0xaa1c38={'x':_0x19c6a7['x'],'y':_0x19c6a7['y'],'width':_0x19c6a7[_0x209f4d(0x1d7)],'height':_0x19c6a7[_0x209f4d(0x215)]};if(checkCollision(_0x147a2c,_0xaa1c38)){_0x19f6a9=![];break;}}}_0x19f6a9&&!(_0xd675df['type']===ENEMY3_TYPE&&(_0xd675df[_0x209f4d(0x230)]==='preparing_capture'||_0xd675df[_0x209f4d(0x230)]==='diving_to_capture_position'||_0xd675df[_0x209f4d(0x230)]==='capturing'))&&(_0x386c46=!![],_0x5f2021=_0xd675df);}}}else{let _0x33b6a0=![],_0x2305d2=null;_0x2a7d29=![];if(!_0x26994b&&!isManualControl&&captureBeamActive&&capturingBossId&&playerLives>0x1&&!isShipCaptured&&!isWaitingForRespawn){_0x2305d2=enemies[_0x209f4d(0x1f7)](_0x274622=>_0x274622['id']===capturingBossId);if(_0x2305d2&&_0x2305d2[_0x209f4d(0x230)]===_0x209f4d(0x1f2)){_0x33b6a0=!![];const _0x1f1262=_0x4ffdd4-_0x2305d2['captureStartTime'];if(_0x1f1262>=AI_CAPTURE_WAIT_DURATION_MS){_0x2a7d29=!![];const _0x5ea3df=_0x2305d2['x']+_0x2305d2[_0x209f4d(0x1d7)]/0x2;_0x1a9684=_0x5ea3df-_0x36e537/0x2,_0x5f2021=null,_0x386c46=![];}}}if(!_0x2a7d29){_0x5f2021=null;if(isEntrancePhaseActive&&!isChallengingStage&&!isFullGridWave){_0x1a9684=_0x3e875c;let _0x5c1a15=-Infinity,_0xd3c388=null;for(const _0x3dfa3f of enemies){if(_0x3dfa3f&&(_0x3dfa3f['state']===_0x209f4d(0x1c1)||_0x3dfa3f['state']===_0x209f4d(0x180))&&_0x3dfa3f['y']<_0x270648){if(_0x26994b&&_0x3dfa3f[_0x209f4d(0x242)]===ENEMY3_TYPE&&(_0x3dfa3f[_0x209f4d(0x230)]===_0x209f4d(0x189)||_0x3dfa3f[_0x209f4d(0x230)]===_0x209f4d(0x146)||_0x3dfa3f['state']===_0x209f4d(0x1f2)))continue;const _0x108ea8=_0x3dfa3f['x']+_0x3dfa3f['width']/0x2,_0x7b8229=_0x3dfa3f['y']+_0x3dfa3f[_0x209f4d(0x215)]/0x2,_0x1ba222=_0x108ea8-_0x31d764,_0x711e7d=_0x270648-_0x7b8229,_0x5bfe4c=Math[_0x209f4d(0x15e)](_0x1ba222*_0x1ba222+_0x711e7d*_0x711e7d),_0x442e3a=Math[_0x209f4d(0x15a)](0x0,_0x36e537*1.5-Math[_0x209f4d(0x1f4)](_0x1ba222)),_0x42dac8=(_0x1ef5cd-_0x3dfa3f['y'])*1.5+_0x442e3a-_0x5bfe4c*0.5;_0x42dac8>_0x5c1a15&&(_0x5c1a15=_0x42dac8,_0xd3c388=_0x3dfa3f);}}if(_0xd3c388){_0x5f2021=_0xd3c388;const _0x45272a=_0x5f2021['x']+_0x5f2021['width']/0x2,_0x360e5e=Math[_0x209f4d(0x1f4)](_0x31d764-_0x45272a),_0x18980e=_0x36e537*ENTRANCE_SHOOT_ALIGNMENT_FACTOR;let _0x766366=!![];const _0x32df27={'x':ship['x']-ENTRANCE_SHOOT_BULLET_CHECK_BUFFER/0x2,'y':ship['y']-ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD,'width':_0x36e537+ENTRANCE_SHOOT_BULLET_CHECK_BUFFER,'height':ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD+ship[_0x209f4d(0x215)]};for(const _0x1ec9c1 of enemyBullets){if(_0x1ec9c1&&_0x1ec9c1['y']+_0x1ec9c1[_0x209f4d(0x215)]>0x0&&_0x1ec9c1['y']<_0x1ef5cd){const _0x7353f8={'x':_0x1ec9c1['x'],'y':_0x1ec9c1['y'],'width':_0x1ec9c1[_0x209f4d(0x1d7)],'height':_0x1ec9c1['height']};if(checkCollision(_0x32df27,_0x7353f8)){_0x766366=![];break;}}}if(_0x766366&&_0x360e5e<_0x18980e){if(_0x5f2021[_0x209f4d(0x242)]===ENEMY3_TYPE&&(_0x5f2021[_0x209f4d(0x230)]===_0x209f4d(0x189)||_0x5f2021[_0x209f4d(0x230)]===_0x209f4d(0x146)||_0x5f2021[_0x209f4d(0x230)]===_0x209f4d(0x1f2)))_0x386c46=![];else(isDualShipActive||_0x5f2021[_0x209f4d(0x242)]!==ENEMY3_TYPE||captureAttemptMadeThisLevel||isShipCaptured)&&(_0x386c46=!![]);}}}else{if(isChallengingStage){let _0x481eba=Infinity;_0x5f2021=null;for(const _0x2e64f of enemies){if(_0x2e64f&&_0x2e64f['state']===_0x209f4d(0x142)&&_0x2e64f['y']<_0x270648){const _0x553503=_0x2e64f['x']+_0x2e64f[_0x209f4d(0x1d7)]/0x2,_0x4c4556=Math[_0x209f4d(0x1f4)](_0x553503-_0x31d764),_0x8216c0=(0x1-Math['min'](0x1,_0x2e64f['y']/_0x270648))*0x2,_0x2327a7=_0x4c4556/_0xe5035f*0.5,_0x59d9ff=_0x8216c0+_0x2327a7;_0x59d9ff<_0x481eba&&(_0x481eba=_0x59d9ff,_0x5f2021=_0x2e64f);}}let _0x51b09e=_0x31d764;if(_0x5f2021){const _0x17e9ca=_0x5f2021['x']+_0x5f2021['width']/0x2,_0x33d678=_0x5f2021['y']+_0x5f2021[_0x209f4d(0x215)]/0x2,_0x5607bf=_0x270648-_0x33d678;let _0x29a0f6=_0x17e9ca;const _0x56f95a=_0x5f2021[_0x209f4d(0x1cb)]===0x2||_0x5f2021[_0x209f4d(0x1cb)]===0x3;if(!_0x56f95a&&_0x5607bf>0x0&&PLAYER_BULLET_SPEED>0.1){const _0x102fac=Math[_0x209f4d(0x188)](MAX_PREDICTION_TIME_CS,_0x5607bf/PLAYER_BULLET_SPEED),_0x5c4d98=0.4,_0x191f3e=(_0x5f2021[_0x209f4d(0x135)]||0x0)*_0x102fac;_0x29a0f6=_0x17e9ca+_0x191f3e*_0x5c4d98,_0x29a0f6=Math[_0x209f4d(0x15a)](_0x5f2021['width']/0x2,Math[_0x209f4d(0x188)](_0xe5035f-_0x5f2021[_0x209f4d(0x1d7)]/0x2,_0x29a0f6));}_0x51b09e=_0x29a0f6,_0x1a9684=_0x51b09e-_0x36e537/0x2,_0x1a9684=Math['max'](AI_EDGE_BUFFER,Math[_0x209f4d(0x188)](_0xe5035f-_0x36e537-AI_EDGE_BUFFER,_0x1a9684));const _0x27d686=_0x36e537*1.5,_0x45e3e1=Math['abs'](_0x31d764-_0x51b09e);_0x45e3e1<_0x27d686&&(_0x386c46=!![]);}else{const _0x13847d=Math[_0x209f4d(0x222)](_0x4ffdd4/AI_WIGGLE_PERIOD*0x2*Math['PI'])*AI_WIGGLE_AMPLITUDE*0.5;_0x1a9684=_0x3e875c+_0x13847d,_0x1a9684=Math[_0x209f4d(0x15a)](AI_EDGE_BUFFER,Math[_0x209f4d(0x188)](_0xe5035f-_0x36e537-AI_EDGE_BUFFER,_0x1a9684));}}else{let _0x1c53b6=-Infinity;_0x5f2021=null;const _0x459c59=_0x33b6a0&&!_0x2a7d29;for(const _0x3380c6 of enemies){if(!_0x3380c6)continue;if(_0x459c59&&_0x3380c6['id']===capturingBossId)continue;if(_0x26994b&&_0x3380c6['type']===ENEMY3_TYPE&&(_0x3380c6[_0x209f4d(0x230)]===_0x209f4d(0x189)||_0x3380c6[_0x209f4d(0x230)]===_0x209f4d(0x146)||_0x3380c6['state']==='capturing'))continue;let _0x3934b0=![],_0x562b72=0x0;switch(_0x3380c6[_0x209f4d(0x230)]){case'in_grid':_0x3934b0=!![],_0x562b72=_0x459c59?0x4e20:0x4650;break;case _0x209f4d(0x180):case _0x209f4d(0x1bd):_0x3934b0=!![],_0x562b72=0x2328;break;case _0x209f4d(0x1c5):_0x3934b0=!![],_0x562b72=0x1b58;break;case _0x209f4d(0x21b):_0x3934b0=!![],_0x562b72=0x1770;break;case'preparing_capture':_0x3934b0=!![],_0x562b72=0x61a8;break;}if(_0x3934b0){let _0x34773a=_0x562b72,_0x48bc71=_0x3380c6['isDamaged']&&_0x3380c6[_0x209f4d(0x242)]===ENEMY3_TYPE?0x1388:0x0,_0x3924b1=(_0x1ef5cd-_0x3380c6['y'])*0x2,_0x95dc4c=Math[_0x209f4d(0x15a)](0x0,_0x36e537*0x1-Math['abs'](_0x3380c6['x']+_0x3380c6['width']/0x2-_0x31d764))*0x1;_0x34773a+=_0x3924b1+_0x48bc71+_0x95dc4c,_0x34773a>_0x1c53b6&&(_0x1c53b6=_0x34773a,_0x5f2021=_0x3380c6);}}let _0x32e0f7=_0x3e875c+_0x36e537/0x2;if(_0x5f2021){const _0x27591c=_0x5f2021['x']+_0x5f2021[_0x209f4d(0x1d7)]/0x2,_0x23020d=_0x5f2021['y']+_0x5f2021[_0x209f4d(0x215)]/0x2,_0x2eea2f=_0x270648-_0x23020d;let _0x13de2e=_0x27591c;if(_0x5f2021[_0x209f4d(0x230)]!=='in_grid'&&_0x5f2021[_0x209f4d(0x230)]!==_0x209f4d(0x189)){if(_0x2eea2f>0x0&&PLAYER_BULLET_SPEED>0.1){const _0x3528d6=Math[_0x209f4d(0x188)](MAX_PREDICTION_TIME,_0x2eea2f/PLAYER_BULLET_SPEED);let _0x594460=_0x27591c+(_0x5f2021[_0x209f4d(0x135)]||0x0)*_0x3528d6;_0x13de2e=Math[_0x209f4d(0x15a)](_0x5f2021[_0x209f4d(0x1d7)]/0x2,Math[_0x209f4d(0x188)](_0xe5035f-_0x5f2021['width']/0x2,_0x594460));}}_0x32e0f7=_0x13de2e,_0x1a9684=_0x32e0f7-_0x36e537/0x2;if(_0x5f2021['state']===_0x209f4d(0x18d)||_0x5f2021[_0x209f4d(0x230)]===_0x209f4d(0x189))_0x1a9684=Math[_0x209f4d(0x15a)](AI_EDGE_BUFFER,Math['min'](_0xe5035f-_0x36e537-AI_EDGE_BUFFER,_0x1a9684));else{const _0x57298f=_0xe5035f*0.6/0x2,_0x396945=_0x54d75c-_0x57298f,_0x25173e=_0x54d75c+_0x57298f-_0x36e537;_0x1a9684=Math[_0x209f4d(0x15a)](_0x396945,Math[_0x209f4d(0x188)](_0x25173e,_0x1a9684)),_0x1a9684=Math[_0x209f4d(0x15a)](AI_EDGE_BUFFER,Math[_0x209f4d(0x188)](_0xe5035f-_0x36e537-AI_EDGE_BUFFER,_0x1a9684));}let _0x5b44d4=![],_0x5461b1=Math[_0x209f4d(0x1f4)](_0x31d764-_0x32e0f7),_0x200370=_0x5f2021[_0x209f4d(0x230)]===_0x209f4d(0x18d)||_0x5f2021['state']==='preparing_capture'?_0x36e537*GRID_SHOOT_ALIGNMENT_FACTOR:_0x36e537*FINAL_SHOOT_ALIGNMENT_THRESHOLD;const _0x35d583=ship['x']<AI_EDGE_BUFFER*AI_EDGE_SHOOT_BUFFER_FACTOR,_0x37a6ff=ship['x']>_0xe5035f-_0x36e537-AI_EDGE_SHOOT_BUFFER_FACTOR,_0x214d06=_0x32e0f7>_0xe5035f*AI_EDGE_SHOOT_TARGET_THRESHOLD_FACTOR,_0x517d9c=_0x32e0f7<_0xe5035f*(0x1-AI_EDGE_SHOOT_TARGET_THRESHOLD_FACTOR);(_0x35d583&&_0x214d06||_0x37a6ff&&_0x517d9c)&&(_0x5b44d4=!![]);if(!_0x5b44d4&&_0x5461b1<_0x200370){let _0x2ef18a=![];if(_0x5f2021[_0x209f4d(0x230)]!==_0x209f4d(0x18d)&&_0x5f2021[_0x209f4d(0x230)]!=='preparing_capture')for(const _0x232f39 of enemies){if(!_0x232f39||_0x232f39===_0x5f2021)continue;if(_0x459c59&&_0x232f39['id']===capturingBossId)continue;if(_0x232f39['y']<_0x270648&&_0x232f39['y']+_0x232f39['height']>_0x5f2021['y']){const _0x3ef60c=_0x232f39['x']-AI_SHOT_CLEARANCE_BUFFER,_0x51bdb5=_0x232f39['x']+_0x232f39['width']+AI_SHOT_CLEARANCE_BUFFER;if(_0x32e0f7>_0x3ef60c&&_0x32e0f7<_0x51bdb5){_0x2ef18a=!![];break;}}}if(!_0x2ef18a){if(_0x5f2021[_0x209f4d(0x242)]===ENEMY3_TYPE&&(_0x5f2021[_0x209f4d(0x230)]===_0x209f4d(0x189)||_0x5f2021['state']===_0x209f4d(0x146)||_0x5f2021[_0x209f4d(0x230)]===_0x209f4d(0x1f2)))_0x386c46=![];else(!_0x459c59||_0x5f2021['id']!==capturingBossId)&&(_0x386c46=!![]);}}}else{const _0x1c1cb0=Math['sin'](_0x4ffdd4/AI_WIGGLE_PERIOD*0x2*Math['PI'])*AI_WIGGLE_AMPLITUDE;_0x1a9684=_0x3e875c+_0x1c1cb0,_0x1a9684=Math[_0x209f4d(0x15a)](AI_EDGE_BUFFER,Math[_0x209f4d(0x188)](_0xe5035f-_0x36e537-AI_EDGE_BUFFER,_0x1a9684));}}}}}}}}typeof smoothedShipX===_0x209f4d(0x18f)?smoothedShipX+=(_0x1a9684-smoothedShipX)*AI_SMOOTHING_FACTOR_MOVE:smoothedShipX=_0x1a9684,ship[_0x209f4d(0x1a8)]=smoothedShipX,_0x386c46&&!_0x5e4a51&&!_0x2a7d29&&!_0x54c01f&&(_0x4ffdd4>=aiCanShootTime&&!isShowingIntro&&firePlayerBullet(null));}catch(_0x37258d){console[_0x209f4d(0x1c8)](_0x209f4d(0x1c7),_0x37258d,_0x37258d['stack']);if(ship)ship[_0x209f4d(0x1a8)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=ship?ship['x']:gameCanvas?gameCanvas[_0x209f4d(0x1d7)]/0x2:0x0;}}function aiControlCoop(){const _0x36d776=_0x33d7d9;if(!isCoopAIDemoActive||isPaused||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0){if(ship1)ship1[_0x36d776(0x1a8)]=ship1['x'];if(ship2)ship2[_0x36d776(0x1a8)]=ship2['x'];return;}const _0x575b3e=Date[_0x36d776(0x237)](),_0x40ad1d=gameCanvas[_0x36d776(0x1d7)],_0x325384=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture,_0x1d967b=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture,_0x59577e=_0x4bbab4=>{const _0x3244f0=_0x4bbab4==='p1'&&isPlayer1ShowingGameOverMessage||_0x4bbab4==='p2'&&isPlayer2ShowingGameOverMessage;return _0x3244f0||showReadyMessage||isCsCompletionDelayActive||isShowingIntro&&!(level===0x1&&coopPlayersReadyStartTime>0x0&&isCoopAIDemoActive);};let _0x3a2df3=!![],_0x4e4c7a=!![];if(coopAICaptureDiveAnticipationActive&&_0x575b3e<coopAICaptureDiveAnticipationEndTime)_0x3a2df3=![],_0x4e4c7a=![];else coopAICaptureDiveAnticipationActive&&(coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0);if(_0x325384&&ship1){if(smoothedShip1X===undefined)smoothedShip1X=ship1['x'];const _0x479d56=_0x59577e('p1');let {desiredTargetX:_0x5aca42,shouldTryShoot:_0x33331d,targetEnemyForAI:_0x9e7d6d}=calculateAIDesiredState(ship1,smoothedShip1X,player1IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer1Invincible,isPlayer1ShipCaptured,isPlayer1WaitingForRespawn,_0x575b3e,_0x40ad1d,_0x479d56,'p1');aiShip1TargetEnemy=_0x9e7d6d,smoothedShip1X+=(_0x5aca42-smoothedShip1X)*AI_SMOOTHING_FACTOR_MOVE,ship1[_0x36d776(0x1a8)]=smoothedShip1X;const _0x3f8247=_0x9e7d6d&&_0x9e7d6d[_0x36d776(0x242)]===ENEMY3_TYPE&&_0x9e7d6d[_0x36d776(0x1c9)]&&_0x9e7d6d['id']===capturedBossIdWithMessage&&isPlayer2ShipCaptured;if(_0x33331d&&_0x3a2df3&&!(isShowingCaptureMessage&&isPlayer1ShipCaptured)){if(_0x3f8247||_0x575b3e>=aiShip1CanShootTime){fireCoopAIBullet(ship1,player1IsDualShipActive,_0x36d776(0x16a));if(!_0x3f8247)aiShip1CanShootTime=_0x575b3e+SHOOT_COOLDOWN;else aiShip1CanShootTime=_0x575b3e+SHOOT_COOLDOWN/0x2;}}}if(_0x1d967b&&ship2){if(smoothedShip2X===undefined)smoothedShip2X=ship2['x'];const _0x518a99=_0x59577e('p2');let {desiredTargetX:_0x38cb3c,shouldTryShoot:_0x9a06ee,targetEnemyForAI:_0xa53c30}=calculateAIDesiredState(ship2,smoothedShip2X,player2IsDualShipActive,enemies,enemyBullets,fallingShips,isPlayer2Invincible,isPlayer2ShipCaptured,isPlayer2WaitingForRespawn,_0x575b3e,_0x40ad1d,_0x518a99,'p2');aiShip2TargetEnemy=_0xa53c30,smoothedShip2X+=(_0x38cb3c-smoothedShip2X)*AI_SMOOTHING_FACTOR_MOVE,ship2[_0x36d776(0x1a8)]=smoothedShip2X;const _0x1ea3bb=_0xa53c30&&_0xa53c30[_0x36d776(0x242)]===ENEMY3_TYPE&&_0xa53c30['hasCapturedShip']&&_0xa53c30['id']===capturedBossIdWithMessage&&isPlayer1ShipCaptured;if(_0x9a06ee&&_0x4e4c7a&&!(isShowingCaptureMessage&&isPlayer2ShipCaptured)){if(_0x1ea3bb||_0x575b3e>=aiShip2CanShootTime){fireCoopAIBullet(ship2,player2IsDualShipActive,_0x36d776(0x178));if(!_0x1ea3bb)aiShip2CanShootTime=_0x575b3e+SHOOT_COOLDOWN;else aiShip2CanShootTime=_0x575b3e+SHOOT_COOLDOWN/0x2;}}}}function fireCoopAIBullet(_0x50deb1,_0x2d6e20,_0x5a827d){const _0x4f80bc=_0x33d7d9;if(!_0x50deb1)return![];const _0x4b256a=Date[_0x4f80bc(0x237)]();let _0x275d85=![];if(_0x5a827d===_0x4f80bc(0x16a)&&isPlayer1ShowingGameOverMessage)_0x275d85=!![];if(_0x5a827d==='player2'&&isPlayer2ShowingGameOverMessage)_0x275d85=!![];let _0x5c3ba3=isPaused||!isInGameState||gameOverSequenceStartTime>0x0||_0x275d85;if(_0x5c3ba3)return![];if(_0x5a827d===_0x4f80bc(0x16a)&&isPlayer1ShipCaptured)return![];if(_0x5a827d===_0x4f80bc(0x178)&&isPlayer2ShipCaptured)return![];try{const _0x4b432d=_0x50deb1['y'];let _0x11824f=0x0;const _0x25628a=_0x5a827d;if(_0x2d6e20){const _0x4e64d5=_0x50deb1['x']+_0x50deb1[_0x4f80bc(0x1d7)]/0x2,_0x219997=_0x50deb1['x']+DUAL_SHIP_OFFSET_X+_0x50deb1['width']/0x2,_0x147c26=_0x4e64d5-PLAYER_BULLET_WIDTH/0x2,_0x4af3c7=_0x219997-PLAYER_BULLET_WIDTH/0x2;bullets[_0x4f80bc(0x1e1)]({'x':_0x147c26,'y':_0x4b432d,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x25628a}),bullets['push']({'x':_0x4af3c7,'y':_0x4b432d,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x25628a}),_0x11824f=0x2;}else{const _0x31d25a=_0x50deb1['x']+_0x50deb1[_0x4f80bc(0x1d7)]/0x2-PLAYER_BULLET_WIDTH/0x2;bullets[_0x4f80bc(0x1e1)]({'x':_0x31d25a,'y':_0x4b432d,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED,'playerId':_0x25628a}),_0x11824f=0x1;}playSound(playerShootSound);if(_0x5a827d===_0x4f80bc(0x16a))player1ShotsFired+=_0x11824f,player1LastShotTime=_0x4b256a,aiShip1LastShotTime=_0x4b256a;else _0x5a827d==='player2'&&(player2ShotsFired+=_0x11824f,player2LastShotTime=_0x4b256a,aiShip2LastShotTime=_0x4b256a);return!![];}catch(_0x1d268e){return console[_0x4f80bc(0x1c8)](_0x4f80bc(0x1b9)+_0x5a827d+':',_0x1d268e),![];}}function calculateAIDesiredState(_0x3b5677,_0x3178ce,_0x36d021,_0x27ded9,_0xcd5297,_0x65d955,_0x16800b,_0x13fc9d,_0x4efdd5,_0x4ba561,_0x1a4b2d,_0x5aeb58,_0x228310){const _0x1988de=_0x33d7d9;let _0x42b039=_0x3178ce,_0x2a4363=![],_0x23f75e=null,_0x3b5823=![],_0x50743f=![],_0x2dbbbf=![],_0x1df3fe=![];const _0x371f51=gameCanvas[_0x1988de(0x215)],_0xa44610=_0x3b5677[_0x1988de(0x1d7)]+(_0x36d021?DUAL_SHIP_OFFSET_X:0x0),_0x3a646e=_0x3b5677['x']+_0xa44610/0x2,_0x3bfcc5=_0x3b5677['y'],_0x43dcba=_0x228310==='p1'?player1Lives:player2Lives;let _0x376b38=_0x1a4b2d/0x2;if(_0x228310==='p1')_0x376b38=_0x1a4b2d*0.25+Math[_0x1988de(0x222)](_0x4ba561/(AI_WIGGLE_PERIOD*1.1))*(AI_WIGGLE_AMPLITUDE*0.8);else _0x228310==='p2'&&(_0x376b38=_0x1a4b2d*0.75+Math[_0x1988de(0x233)](_0x4ba561/(AI_WIGGLE_PERIOD*0.9))*(AI_WIGGLE_AMPLITUDE*0.8));let _0x26fb28=_0x376b38-_0xa44610/0x2;if(_0x5aeb58||_0x13fc9d||_0x4efdd5||_0x228310==='p1'&&player1NeedsRespawnAfterCapture||_0x228310==='p2'&&player2NeedsRespawnAfterCapture)return _0x42b039=_0x26fb28,(_0x13fc9d||_0x4efdd5||_0x228310==='p1'&&player1NeedsRespawnAfterCapture||_0x228310==='p2'&&player2NeedsRespawnAfterCapture)&&(_0x42b039=_0x3b5677['x']),{'desiredTargetX':_0x42b039,'shouldTryShoot':![],'targetEnemyForAI':null};const _0xe0dbe6=_0x228310==='p1'?'p2':'p1',_0x121339=_0xe0dbe6==='p1'&&isPlayer1ShipCaptured||_0xe0dbe6==='p2'&&isPlayer2ShipCaptured,_0x12d580=_0xe0dbe6==='p1'&&isPlayer1ShowingGameOverMessage||_0xe0dbe6==='p2'&&isPlayer2ShowingGameOverMessage;let _0x5e8b15=null;if(_0x121339&&!_0x12d580&&capturedBossIdWithMessage){let _0x23e5e2=!![];if(isCoopAIDemoActive){const _0x59a186=_0xe0dbe6==='p1'?coopPartner1CapturedTime:coopPartner2CapturedTime;_0x59a186>0x0&&_0x4ba561-_0x59a186<COOP_AI_SAVE_PARTNER_DELAY_MS&&(_0x23e5e2=![]);}_0x23e5e2&&(_0x5e8b15=_0x27ded9[_0x1988de(0x1f7)](_0x2efe5d=>_0x2efe5d['id']===capturedBossIdWithMessage&&_0x2efe5d[_0x1988de(0x242)]===ENEMY3_TYPE&&_0x2efe5d['hasCapturedShip']));}if(_0x5e8b15&&!_0x36d021){_0x2dbbbf=!![],_0x23f75e=_0x5e8b15;const _0x88d18e=_0x5e8b15['x']+_0x5e8b15[_0x1988de(0x1d7)]/0x2;_0x42b039=_0x88d18e-_0xa44610/0x2,_0x2a4363=!![],_0x3b5823=![];if(!_0x16800b){let _0x5e0ad5=[];const _0x6e9fef=FINAL_DODGE_LOOKAHEAD*0.4,_0xe45cd5=FINAL_DODGE_BUFFER_BASE*0.3,_0x23c2ef={'x':Math['min'](_0x3a646e,_0x88d18e)-_0xe45cd5,'y':_0x3b5677['y']-_0x6e9fef,'width':Math[_0x1988de(0x1f4)](_0x3a646e-_0x88d18e)+_0xa44610+_0xe45cd5*0x2,'height':_0x6e9fef+_0x3b5677[_0x1988de(0x215)]};for(const _0x4ce0e3 of _0xcd5297){if(_0x4ce0e3&&_0x4ce0e3['y']+_0x4ce0e3['height']>_0x3b5677['y']-_0x3b5677[_0x1988de(0x215)]&&_0x4ce0e3['y']<_0x371f51){const _0x269021={'x':_0x4ce0e3['x'],'y':_0x4ce0e3['y'],'width':_0x4ce0e3['width'],'height':_0x4ce0e3['height']};checkCollision(_0x23c2ef,_0x269021)&&_0x5e0ad5[_0x1988de(0x1e1)](_0x4ce0e3);}}if(_0x5e0ad5[_0x1988de(0x14d)]>0x0){_0x3b5823=!![];const _0x3bafb9=_0x3178ce<_0x1a4b2d/0x2?-0x1:0x1;_0x42b039=_0x3178ce+_0x3bafb9*(_0xa44610*0.6),_0x2a4363=![];}}return _0x42b039=Math[_0x1988de(0x15a)](AI_EDGE_BUFFER,Math[_0x1988de(0x188)](_0x1a4b2d-_0xa44610-AI_EDGE_BUFFER,_0x42b039)),{'desiredTargetX':_0x42b039,'shouldTryShoot':_0x2a4363,'targetEnemyForAI':_0x23f75e};}if(!_0x16800b){let _0x5ced62=[];const _0x3a4ae5=FINAL_DODGE_LOOKAHEAD*(isCoopAIDemoActive?1.6:0.8),_0x4001bb=FINAL_DODGE_BUFFER_BASE*(isCoopAIDemoActive?1.7:0.8),_0x5275ef={'x':_0x3b5677['x']-_0x4001bb,'y':_0x3b5677['y']-_0x3a4ae5,'width':_0xa44610+_0x4001bb*0x2,'height':_0x3a4ae5+_0x3b5677[_0x1988de(0x215)]};for(const _0x35f12d of _0xcd5297){if(_0x35f12d&&_0x35f12d['y']+_0x35f12d[_0x1988de(0x215)]>_0x3b5677['y']-_0x3b5677[_0x1988de(0x215)]*1.5&&_0x35f12d['y']<_0x371f51){const _0x15e287={'x':_0x35f12d['x'],'y':_0x35f12d['y'],'width':_0x35f12d['width'],'height':_0x35f12d[_0x1988de(0x215)]};checkCollision(_0x5275ef,_0x15e287)&&_0x5ced62[_0x1988de(0x1e1)](_0x35f12d);}}if(_0x5ced62[_0x1988de(0x14d)]>0x0){_0x3b5823=!![];let _0x16cb42=_0x3178ce;const _0x22f5b4=_0xa44610*(isCoopAIDemoActive?0x3:0x2);let _0x3d8a33=0x0,_0x1727fc=0x0,_0x5545bf=0x0;const _0x34577b=_0x3b5677['x']+_0xa44610/0x2;for(const _0x2f28a9 of _0x5ced62){if(_0x2f28a9['x']<_0x34577b-_0xa44610*0.5)_0x1727fc++;else{if(_0x2f28a9['x']>_0x34577b+_0xa44610*0.5)_0x5545bf++;else _0x3d8a33++;}}if(_0x1727fc<=_0x5545bf&&_0x1727fc<=_0x3d8a33)_0x16cb42=_0x3178ce-_0x22f5b4-Math[_0x1988de(0x1cc)]()*_0xa44610*0.4;else{if(_0x5545bf<=_0x1727fc&&_0x5545bf<=_0x3d8a33)_0x16cb42=_0x3178ce+_0x22f5b4+Math[_0x1988de(0x1cc)]()*_0xa44610*0.4;else{if(_0x3178ce<_0x376b38)_0x16cb42=_0x376b38+_0x22f5b4+Math['random']()*_0xa44610*0.7;else _0x16cb42=_0x376b38-_0x22f5b4-Math[_0x1988de(0x1cc)]()*_0xa44610*0.7;}}_0x42b039=_0x16cb42;}if(!_0x3b5823){const _0x178fdf=AI_COLLISION_LOOKAHEAD*(isCoopAIDemoActive?0x1:0.75),_0x5d85cd=AI_COLLISION_BUFFER*(isCoopAIDemoActive?0x1:0.8);for(const _0x1cc266 of _0x27ded9){if(!_0x1cc266)continue;if((_0x1cc266[_0x1988de(0x230)]===_0x1988de(0x21b)||_0x1cc266[_0x1988de(0x230)]===_0x1988de(0x146))&&_0x1cc266['y']+_0x1cc266['height']>_0x3bfcc5-_0x178fdf&&_0x1cc266['y']<_0x3bfcc5+_0x3b5677[_0x1988de(0x215)]*1.5){const _0x49377c={'x':_0x3b5677['x']-_0x5d85cd,'y':_0x3b5677['y']-_0x178fdf,'width':_0xa44610+_0x5d85cd*0x2,'height':_0x178fdf+_0x3b5677[_0x1988de(0x215)]},_0x319c50={'x':_0x1cc266['x'],'y':_0x1cc266['y'],'width':_0x1cc266[_0x1988de(0x1d7)],'height':_0x1cc266['height']};if(checkCollision(_0x49377c,_0x319c50)){_0x3b5823=!![],_0x23f75e=null,_0x2a4363=![];const _0xd86368=_0x1cc266['x']+_0x1cc266[_0x1988de(0x1d7)]/0x2;_0x42b039=_0x3178ce+(_0x3a646e<_0xd86368?-0x1:0x1)*(_0xa44610*(isCoopAIDemoActive?2.2:1.9));break;}}}}}if(!_0x3b5823&&!_0x2dbbbf&&!_0x36d021&&captureBeamActive&&capturingBossId&&!_0x13fc9d){if(aiPlayerActivelySeekingCaptureById===null||aiPlayerActivelySeekingCaptureById===_0x228310){const _0x314b79=_0x27ded9[_0x1988de(0x1f7)](_0x2880d6=>_0x2880d6['id']===capturingBossId);if(_0x314b79&&_0x314b79[_0x1988de(0x230)]==='capturing'){aiPlayerActivelySeekingCaptureById===null&&(aiPlayerActivelySeekingCaptureById=_0x228310);if(aiPlayerActivelySeekingCaptureById===_0x228310){if(_0x4ba561-(_0x314b79['captureStartTime']||0x0)>=AI_CAPTURE_BEAM_APPROACH_DELAY_MS&&_0x43dcba>0x1){_0x1df3fe=!![];const _0x4a431f=_0x314b79['x']+(_0x314b79['type']===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH)/0x2;_0x42b039=_0x4a431f-_0xa44610/0x2,_0x2a4363=![],_0x23f75e=null;}else _0x42b039=_0x26fb28,_0x2a4363=![],_0x23f75e=null;}}else aiPlayerActivelySeekingCaptureById===_0x228310&&(aiPlayerActivelySeekingCaptureById=null);}}else aiPlayerActivelySeekingCaptureById===_0x228310&&!(captureBeamActive&&capturingBossId&&!_0x13fc9d)&&(aiPlayerActivelySeekingCaptureById=null);if(!_0x3b5823&&!_0x2dbbbf&&!_0x1df3fe&&!_0x36d021){const _0x27c177=_0x65d955[_0x1988de(0x1f7)](_0x1191f1=>_0x1191f1[_0x1988de(0x1cd)]===_0x228310&&!_0x1191f1[_0x1988de(0x239)]);_0x27c177&&(_0x50743f=!![],_0x42b039=_0x27c177['x']+_0x27c177[_0x1988de(0x1d7)]/0x2-_0xa44610/0x2,_0x2a4363=![],_0x23f75e=null);}if(!_0x3b5823&&!_0x1df3fe&&!_0x50743f&&!_0x2dbbbf){let _0x4a7fcc=-Infinity,_0x49a195=![],_0x428d20=null;for(const _0x2e487f of _0x27ded9){if(!_0x2e487f)continue;const _0x13370b=_0x43dcba>0x1&&!_0x36d021;if(_0x2e487f[_0x1988de(0x242)]===ENEMY3_TYPE&&!_0x2e487f[_0x1988de(0x1c9)]&&!captureAttemptMadeThisLevel&&!isFullGridWave&&(_0x2e487f[_0x1988de(0x230)]==='preparing_capture'||_0x2e487f[_0x1988de(0x230)]===_0x1988de(0x146)||_0x2e487f[_0x1988de(0x230)]===_0x1988de(0x1f2)||_0x2e487f['id']===capturingBossId&&captureBeamActive)&&_0x13370b)continue;let _0x28b42a=![];if(_0x2e487f['type']===ENEMY3_TYPE&&_0x2e487f[_0x1988de(0x1c9)]&&_0x43dcba<=0x1){const _0x2caa22=_0x2e487f['id']===capturedBossIdWithMessage&&_0x121339;!_0x2caa22&&(_0x28b42a=!![]);}let _0x1c5e4e=0x0;const _0x2c2b22=_0x2e487f['x']+_0x2e487f[_0x1988de(0x1d7)]/0x2,_0x446397=_0x2c2b22-_0x3a646e,_0x3f9391=_0x3bfcc5-(_0x2e487f['y']+_0x2e487f[_0x1988de(0x215)]);if(_0x3f9391<0x0&&_0x2e487f[_0x1988de(0x230)]!==_0x1988de(0x21b)&&_0x2e487f['state']!==_0x1988de(0x146)&&_0x2e487f[_0x1988de(0x230)]!==_0x1988de(0x142))continue;let _0xbd0d93=0x0;if(_0x228310==='p1'&&_0x2c2b22<_0x1a4b2d/0x2)_0xbd0d93=0x1388;else{if(_0x228310==='p2'&&_0x2c2b22>=_0x1a4b2d/0x2)_0xbd0d93=0x1388;}_0x1c5e4e=_0xbd0d93+(_0x371f51-_0x2e487f['y'])*0x2-Math[_0x1988de(0x1f4)](_0x446397)*0x3-_0x3f9391;if(_0x2e487f[_0x1988de(0x230)]===_0x1988de(0x21b)||_0x2e487f['state']==='diving_to_capture_position')_0x1c5e4e+=0xbb8;if(_0x2e487f[_0x1988de(0x242)]===ENEMY3_TYPE&&!_0x2e487f['isDamaged'])_0x1c5e4e+=0x7d0;if(_0x2e487f[_0x1988de(0x242)]===ENEMY3_TYPE&&_0x2e487f[_0x1988de(0x231)])_0x1c5e4e+=0xfa0;_0x2e487f[_0x1988de(0x242)]===ENEMY3_TYPE&&_0x2e487f[_0x1988de(0x1c9)]&&(!_0x28b42a?_0x1c5e4e+=0x1388:_0x1c5e4e-=0x2710);if(_0x1c5e4e>_0x4a7fcc){_0x4a7fcc=_0x1c5e4e,_0x428d20=_0x2e487f;let _0x737f0f=![];_0x428d20['type']===ENEMY3_TYPE&&!_0x428d20['hasCapturedShip']&&!captureAttemptMadeThisLevel&&!isFullGridWave&&_0x13370b&&(_0x737f0f=!![]);if(_0x28b42a&&_0x428d20===_0x2e487f)Math[_0x1988de(0x1f4)](_0x3a646e-(_0x428d20['x']+_0x428d20[_0x1988de(0x1d7)]/0x2))<_0xa44610*1.1?_0x49a195=!![]:_0x49a195=![];else{if(_0x737f0f)_0x49a195=![];else Math[_0x1988de(0x1f4)](_0x3a646e-(_0x428d20['x']+_0x428d20[_0x1988de(0x1d7)]/0x2))<_0xa44610*0.9?_0x49a195=!![]:_0x49a195=![];}}}_0x23f75e=_0x428d20,_0x2a4363=_0x49a195;if(isCoopAIDemoActive&&_0x36d021&&_0x23f75e){const _0x5ef3f0=_0x228310==='p1'?'p2':'p1';let _0x524219=![];_0x5ef3f0==='p1'?_0x524219=ship1&&player1Lives>0x0&&!player1IsDualShipActive&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture:_0x524219=ship2&&player2Lives>0x0&&!player2IsDualShipActive&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture;if(_0x524219){const _0x3b2fba=_0x23f75e[_0x1988de(0x242)]===ENEMY3_TYPE&&_0x23f75e['hasCapturedShip']&&_0x23f75e['id']===capturedBossIdWithMessage&&(_0x5ef3f0==='p1'&&isPlayer1ShipCaptured||_0x5ef3f0==='p2'&&isPlayer2ShipCaptured);if(!_0x3b2fba){const _0x40fd50=_0x23f75e[_0x1988de(0x242)]===ENEMY3_TYPE&&!_0x23f75e[_0x1988de(0x1c9)]&&!isFullGridWave;if(_0x40fd50){let _0x5286e6=![];(captureBeamActive&&capturingBossId===_0x23f75e['id']&&aiPlayerActivelySeekingCaptureById===_0x228310||(_0x23f75e[_0x1988de(0x230)]===_0x1988de(0x146)||_0x23f75e['state']===_0x1988de(0x189))&&_0x23f75e['id']===capturingBossId&&aiPlayerActivelySeekingCaptureById===_0x228310)&&(_0x5286e6=!![]),!_0x5286e6&&(_0x2a4363=![]);}}}}if(_0x23f75e){let _0x48eda1=![];if(_0x23f75e[_0x1988de(0x242)]===ENEMY3_TYPE&&_0x23f75e[_0x1988de(0x1c9)]&&_0x43dcba<=0x1){const _0x399b83=_0x23f75e['id']===capturedBossIdWithMessage&&_0x121339;!_0x399b83&&(_0x48eda1=!![]);}if(_0x48eda1)_0x42b039=_0x26fb28;else{const _0x1c11ec=_0x23f75e['x']+_0x23f75e[_0x1988de(0x1d7)]/0x2;_0x42b039=_0x1c11ec-_0xa44610/0x2;}}else _0x42b039=_0x26fb28,_0x2a4363=![];}return _0x42b039=Math[_0x1988de(0x15a)](AI_EDGE_BUFFER,Math[_0x1988de(0x188)](_0x1a4b2d-_0xa44610-AI_EDGE_BUFFER,_0x42b039)),{'desiredTargetX':_0x42b039,'shouldTryShoot':_0x2a4363,'targetEnemyForAI':_0x23f75e};}function findAndDetachEnemy(){const _0x56c0f4=_0x33d7d9;try{let _0x4275e5=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x4275e5=isPlayer1ShipCaptured||isPlayer2ShipCaptured:_0x4275e5=isShipCaptured;if(!isFullGridWave&&_0x4275e5){const _0x3c0fa2=enemies['find'](_0x4fec5e=>_0x4fec5e&&_0x4fec5e[_0x56c0f4(0x242)]===ENEMY3_TYPE&&_0x4fec5e['hasCapturedShip']&&_0x4fec5e[_0x56c0f4(0x230)]==='in_grid');if(_0x3c0fa2){_0x3c0fa2[_0x56c0f4(0x22b)]=!![],_0x3c0fa2['attackType']=_0x56c0f4(0x1fe);const _0x47a9ba=new Set([_0x3c0fa2['id']]);return resetJustReturnedFlags(_0x47a9ba),[_0x3c0fa2];}}if(isEntrancePhaseActive)return null;let _0x322599=enemies[_0x56c0f4(0x1a9)](_0x2e83fe=>_0x2e83fe&&_0x2e83fe[_0x56c0f4(0x230)]===_0x56c0f4(0x18d)&&!_0x2e83fe[_0x56c0f4(0x22b)]);if(_0x322599[_0x56c0f4(0x14d)]===0x0){_0x322599=enemies[_0x56c0f4(0x1a9)](_0x41f1f3=>_0x41f1f3&&_0x41f1f3[_0x56c0f4(0x230)]===_0x56c0f4(0x18d));if(_0x322599[_0x56c0f4(0x14d)]===0x0)return null;}if(_0x322599[_0x56c0f4(0x14d)]===0x0)return null;_0x322599[_0x56c0f4(0x13d)]((_0x46ce8f,_0x44ba28)=>(_0x44ba28[_0x56c0f4(0x1d5)]||0x0)-(_0x46ce8f[_0x56c0f4(0x1d5)]||0x0));const _0x2692c0=_0x322599[_0x56c0f4(0x14d)]<=0x3;let _0x322fbc=[];const _0x443cf6='normal';gridJustCompleted&&(gridJustCompleted=![]);let _0x460ec1=![];if(level>0x1&&!_0x2692c0&&_0x322599['length']>=0x3){const _0x46bcd2=_0x322599[_0x56c0f4(0x1a9)](_0x4a4c35=>_0x4a4c35[_0x56c0f4(0x242)]===ENEMY3_TYPE&&!_0x4a4c35[_0x56c0f4(0x1c9)]);for(const _0x583d8b of _0x46bcd2){const _0x17c4a8=_0x322599['find'](_0x3e152a=>_0x3e152a[_0x56c0f4(0x242)]===ENEMY2_TYPE&&_0x3e152a[_0x56c0f4(0x1d5)]===_0x583d8b['gridRow']&&_0x3e152a['gridCol']===_0x583d8b[_0x56c0f4(0x13f)]-0x1),_0x29a082=_0x322599[_0x56c0f4(0x1f7)](_0x5ac0d3=>_0x5ac0d3[_0x56c0f4(0x242)]===ENEMY2_TYPE&&_0x5ac0d3[_0x56c0f4(0x1d5)]===_0x583d8b[_0x56c0f4(0x1d5)]&&_0x5ac0d3['gridCol']===_0x583d8b[_0x56c0f4(0x13f)]+0x1);if(_0x17c4a8&&_0x29a082){_0x322fbc=[_0x583d8b,_0x17c4a8,_0x29a082],_0x460ec1=!![];break;}}}if(!_0x460ec1&&!_0x2692c0){const _0x7850cb=_0x322599[_0x56c0f4(0x1a9)](_0x5b9faf=>_0x5b9faf[_0x56c0f4(0x242)]===ENEMY1_TYPE),_0x3ed1e3=scaleValue(level,BASE_BEE_GROUP_ATTACK_PROBABILITY,MAX_BEE_GROUP_ATTACK_PROBABILITY)*1.2;if(_0x7850cb['length']>=0x2&&Math['random']()<_0x3ed1e3){const _0x3efdf8=scaleValue(level,BASE_BEE_TRIPLE_ATTACK_PROBABILITY,MAX_BEE_TRIPLE_ATTACK_PROBABILITY)*1.1,_0x120515=_0x7850cb[_0x56c0f4(0x14d)]>=0x3&&Math[_0x56c0f4(0x1cc)]()<_0x3efdf8?0x3:0x2;let _0x2bb58c=![];_0x7850cb[_0x56c0f4(0x13d)](()=>Math[_0x56c0f4(0x1cc)]()-0.5);for(let _0x1a35fe=0x0;_0x1a35fe<_0x7850cb[_0x56c0f4(0x14d)];_0x1a35fe++){const _0x3f020a=_0x7850cb[_0x1a35fe];let _0x5d9924=[_0x3f020a];const _0x36e3b0=_0x7850cb[_0x56c0f4(0x1a9)](_0x3efdeb=>_0x3efdeb['id']!==_0x3f020a['id']&&_0x3efdeb[_0x56c0f4(0x1d5)]===_0x3f020a['gridRow']);_0x36e3b0[_0x56c0f4(0x13d)]((_0x5a5975,_0x443263)=>Math[_0x56c0f4(0x1f4)](_0x5a5975['gridCol']-_0x3f020a[_0x56c0f4(0x13f)])-Math[_0x56c0f4(0x1f4)](_0x443263[_0x56c0f4(0x13f)]-_0x3f020a[_0x56c0f4(0x13f)]));for(let _0x5904a3=0x0;_0x5904a3<_0x36e3b0[_0x56c0f4(0x14d)]&&_0x5d9924['length']<_0x120515;_0x5904a3++){_0x5d9924['push'](_0x36e3b0[_0x5904a3]);}if(_0x5d9924[_0x56c0f4(0x14d)]===_0x120515){_0x322fbc=_0x5d9924,_0x460ec1=!![],_0x2bb58c=!![];break;}}!_0x2bb58c&&_0x7850cb['length']>=_0x120515&&(_0x322fbc=_0x7850cb['slice'](0x0,_0x120515),_0x460ec1=!![]);}}if(!_0x460ec1&&!_0x2692c0){const _0x4bc869=_0x322599[_0x56c0f4(0x1a9)](_0x1feffd=>_0x1feffd[_0x56c0f4(0x242)]===ENEMY2_TYPE),_0x465944=0.2;if(_0x4bc869[_0x56c0f4(0x14d)]>=0x2&&Math[_0x56c0f4(0x1cc)]()<_0x465944){const _0x405be5=0x2;let _0x512841=![];_0x4bc869['sort'](()=>Math['random']()-0.5);for(let _0x544740=0x0;_0x544740<_0x4bc869[_0x56c0f4(0x14d)];_0x544740++){const _0x1037ce=_0x4bc869[_0x544740];let _0x3d7d4d=[_0x1037ce];const _0x4400bb=_0x4bc869['filter'](_0x47375a=>_0x47375a['id']!==_0x1037ce['id']&&_0x47375a['gridRow']===_0x1037ce['gridRow']);_0x4400bb[_0x56c0f4(0x13d)]((_0x523257,_0x1db43f)=>Math['abs'](_0x523257[_0x56c0f4(0x13f)]-_0x1037ce[_0x56c0f4(0x13f)])-Math[_0x56c0f4(0x1f4)](_0x1db43f[_0x56c0f4(0x13f)]-_0x1037ce['gridCol']));for(let _0x121da0=0x0;_0x121da0<_0x4400bb['length']&&_0x3d7d4d['length']<_0x405be5;_0x121da0++){_0x3d7d4d['push'](_0x4400bb[_0x121da0]);}if(_0x3d7d4d[_0x56c0f4(0x14d)]===_0x405be5){_0x322fbc=_0x3d7d4d,_0x460ec1=!![],_0x512841=!![];break;}}!_0x512841&&_0x4bc869['length']>=_0x405be5&&(_0x322fbc=_0x4bc869[_0x56c0f4(0x23c)](0x0,_0x405be5),_0x460ec1=!![]);}}if(!_0x460ec1&&_0x322599[_0x56c0f4(0x14d)]>0x0){const _0x9e1a3b=_0x322599[0x0];_0x322fbc[_0x56c0f4(0x1e1)](_0x9e1a3b);if(_0x322599['length']>0x1&&!_0x2692c0&&Math[_0x56c0f4(0x1cc)]()<0.2){const _0x151602=_0x322599[_0x56c0f4(0x1f7)](_0x46369b=>_0x46369b['id']!==_0x9e1a3b['id']&&_0x46369b[_0x56c0f4(0x1d5)]===_0x9e1a3b[_0x56c0f4(0x1d5)]&&_0x46369b[_0x56c0f4(0x13f)]===_0x9e1a3b['gridCol']-0x1),_0xa4adfb=_0x322599['find'](_0x16dff8=>_0x16dff8['id']!==_0x9e1a3b['id']&&_0x16dff8[_0x56c0f4(0x1d5)]===_0x9e1a3b[_0x56c0f4(0x1d5)]&&_0x16dff8[_0x56c0f4(0x13f)]===_0x9e1a3b[_0x56c0f4(0x13f)]+0x1),_0x4c33cc=_0x151602||_0xa4adfb;if(_0x4c33cc){const _0x3c0e7d=_0x9e1a3b[_0x56c0f4(0x242)]===ENEMY3_TYPE&&_0x4c33cc['type']===ENEMY3_TYPE;!_0x3c0e7d&&_0x322fbc[_0x56c0f4(0x1e1)](_0x4c33cc);}}_0x460ec1=!![];}if(_0x322fbc[_0x56c0f4(0x14d)]>0x0){_0x322fbc=_0x322fbc[_0x56c0f4(0x1a9)](_0x241b3b=>_0x241b3b);if(_0x322fbc['length']===0x0)return null;_0x322fbc[_0x56c0f4(0x229)](_0x15a6be=>{const _0x2fcd23=_0x56c0f4;_0x15a6be&&(_0x15a6be['justReturned']=!![],_0x15a6be[_0x2fcd23(0x158)]=_0x443cf6);});const _0x5019d5=new Set(_0x322fbc[_0x56c0f4(0x196)](_0x289b2f=>_0x289b2f['id']));return resetJustReturnedFlags(_0x5019d5),_0x322fbc;}return null;}catch(_0x3cb8dd){return console['error']('Error\x20in\x20findAndDetachEnemy:',_0x3cb8dd),null;}}function triggerImmediateCaptureDive(){const _0x14ce1c=_0x33d7d9;try{let _0x4041b8=![],_0x3cb3ba=null;if(isTwoPlayerMode&&selectedGameMode===_0x14ce1c(0x13c)){const _0x3a74d3=ship1&&player1Lives>0x1&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn,_0x57e287=ship2&&player2Lives>0x1&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn;if((_0x3a74d3||_0x57e287)&&!captureAttemptMadeThisLevel){_0x4041b8=!![];if(_0x3a74d3&&_0x57e287)_0x3cb3ba=Math[_0x14ce1c(0x1cc)]()<0.5?ship1:ship2;else{if(_0x3a74d3)_0x3cb3ba=ship1;else _0x57e287&&(_0x3cb3ba=ship2);}}}else playerLives>0x1&&ship&&!isShipCaptured&&!isWaitingForRespawn&&!captureAttemptMadeThisLevel&&(_0x4041b8=!![],_0x3cb3ba=ship);if(isChallengingStage||!_0x4041b8||!_0x3cb3ba)return;const _0x3cd969=enemies['filter'](_0x2842e2=>_0x2842e2&&_0x2842e2[_0x14ce1c(0x230)]===_0x14ce1c(0x18d)&&_0x2842e2[_0x14ce1c(0x242)]===ENEMY3_TYPE&&!_0x2842e2[_0x14ce1c(0x1c9)]&&!_0x2842e2['isPreparingForImmediateCapture']);if(_0x3cd969[_0x14ce1c(0x14d)]>0x0){const _0x2b58e0=_0x3cd969[Math[_0x14ce1c(0x1a7)](Math[_0x14ce1c(0x1cc)]()*_0x3cd969['length'])],_0x28d309=Date[_0x14ce1c(0x237)]();_0x2b58e0[_0x14ce1c(0x1d9)]=!![],_0x2b58e0[_0x14ce1c(0x22b)]=!![];const _0xc9a102=new Set([_0x2b58e0['id']]);resetJustReturnedFlags(_0xc9a102);const _0x272fc1=_0x3cb3ba['x']+_0x3cb3ba['width']/0x2,_0x40d4f3=_0x272fc1<gameCanvas[_0x14ce1c(0x1d7)]/0x2?_0x14ce1c(0x24d):'left',_0x4e4eb0=_0x40d4f3==='left'?gameCanvas[_0x14ce1c(0x1d7)]*CAPTURE_DIVE_SIDE_MARGIN_FACTOR:gameCanvas['width']*(0x1-CAPTURE_DIVE_SIDE_MARGIN_FACTOR)-BOSS_WIDTH,_0xc8d6e0=gameCanvas[_0x14ce1c(0x215)]*CAPTURE_DIVE_BOTTOM_HOVER_Y_FACTOR;_0x2b58e0['state']=_0x14ce1c(0x189),_0x2b58e0[_0x14ce1c(0x1a8)]=_0x4e4eb0,_0x2b58e0[_0x14ce1c(0x183)]=_0xc8d6e0,_0x2b58e0[_0x14ce1c(0x1b8)]=_0x28d309,playSound(bossGalagaDiveSound);const _0x47b9e7=_0x2b58e0['id'];_0x2b58e0[_0x14ce1c(0x18b)]=setTimeout(()=>{const _0x580d24=_0x14ce1c,_0x3f8e5e=enemies[_0x580d24(0x1f7)](_0x150d8d=>_0x150d8d?.['id']===_0x47b9e7);_0x3f8e5e&&_0x3f8e5e[_0x580d24(0x230)]===_0x580d24(0x189)&&(_0x3f8e5e['state']=_0x580d24(0x146));if(_0x3f8e5e)_0x3f8e5e['capturePrepareTimeout']=null;const _0x1e2d05=enemySpawnTimeouts[_0x580d24(0x1f6)](_0x299c3e=>_0x299c3e===_0x2b58e0[_0x580d24(0x18b)]);if(_0x1e2d05>-0x1)enemySpawnTimeouts['splice'](_0x1e2d05,0x1);},0x12c),enemySpawnTimeouts['push'](_0x2b58e0[_0x14ce1c(0x18b)]);}}catch(_0x35b16d){console['error']('Error\x20in\x20triggerImmediateCaptureDive:',_0x35b16d);}}function resetJustReturnedFlags(_0x3829d4){const _0x3f51a7=_0x33d7d9;enemies[_0x3f51a7(0x229)](_0x21f55f=>{const _0x143ffb=_0x3f51a7;let _0x3c14cd=![];if(_0x3829d4 instanceof Set)_0x3c14cd=_0x3829d4[_0x143ffb(0x14c)](_0x21f55f['id']);else typeof _0x3829d4===_0x143ffb(0x23f)&&(_0x3c14cd=_0x21f55f['id']===_0x3829d4);_0x21f55f&&_0x21f55f[_0x143ffb(0x230)]==='in_grid'&&_0x21f55f['justReturned']&&!_0x3c14cd&&(_0x21f55f[_0x143ffb(0x22b)]=![]);});}function updateFloatingScores(){const _0x2c6819=_0x33d7d9;if(isPaused)return;try{const _0x4d10c4=Date['now']();floatingScores=floatingScores[_0x2c6819(0x1a9)](_0x1f4b9=>_0x4d10c4-_0x1f4b9[_0x2c6819(0x175)]<FLOATING_SCORE_DURATION+FLOATING_SCORE_APPEAR_DELAY);}catch(_0x16733b){console[_0x2c6819(0x1c8)](_0x2c6819(0x1d4),_0x16733b),floatingScores=[];}}function updateExplosions(){const _0x8905d0=_0x33d7d9;if(isPaused)return;try{const _0x40416a=Date['now']();for(let _0x4c5ecd=explosions['length']-0x1;_0x4c5ecd>=0x0;_0x4c5ecd--){const _0x4b283b=explosions[_0x4c5ecd],_0x1381b1=_0x40416a-_0x4b283b[_0x8905d0(0x175)];if(_0x1381b1>_0x4b283b['duration']){explosions[_0x8905d0(0x15d)](_0x4c5ecd,0x1);continue;}_0x4b283b['particles']['forEach'](_0x2bbdc3=>{const _0x26cfc6=_0x8905d0;_0x2bbdc3['x']+=_0x2bbdc3['vx'],_0x2bbdc3['y']+=_0x2bbdc3['vy'],_0x2bbdc3['alpha']=Math[_0x26cfc6(0x15a)](0x0,0x1-_0x1381b1/_0x4b283b[_0x26cfc6(0x192)]*EXPLOSION_FADE_SPEED);});}}catch(_0x56a5fc){console[_0x8905d0(0x1c8)]('Error\x20updating\x20explosions:',_0x56a5fc),explosions=[];}}function moveEntities(){const _0x54f85f=_0x33d7d9;if(isPaused)return;try{const _0x174e8a=Date['now'](),_0x1c9d3b=gameCanvas?gameCanvas[_0x54f85f(0x215)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;if(gameCanvas){if(isManualControl){if(isTwoPlayerMode&&selectedGameMode===_0x54f85f(0x13c)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x475338=ship1[_0x54f85f(0x1d7)]+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(leftPressed&&ship1['x']>0x0)ship1['x']-=ship1['speed'];else{if(rightPressed&&ship1['x']<gameCanvas['width']-_0x475338)ship1['x']+=ship1[_0x54f85f(0x15f)];}ship1[_0x54f85f(0x1a8)]=ship1['x'];}if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0x36808f=ship2[_0x54f85f(0x1d7)]+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(p2LeftPressed&&ship2['x']>0x0)ship2['x']-=ship2[_0x54f85f(0x15f)];else{if(p2RightPressed&&ship2['x']<gameCanvas['width']-_0x36808f)ship2['x']+=ship2[_0x54f85f(0x15f)];}ship2[_0x54f85f(0x1a8)]=ship2['x'];}}else{if(ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){const _0x16167f=ship[_0x54f85f(0x1d7)]+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);if(leftPressed&&ship['x']>0x0)ship['x']-=ship[_0x54f85f(0x15f)];else{if(rightPressed&&ship['x']<gameCanvas['width']-_0x16167f)ship['x']+=ship[_0x54f85f(0x15f)];}ship[_0x54f85f(0x1a8)]=ship['x'];}}}else{if(isCoopAIDemoActive){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture){const _0x58603d=ship1['targetX']-ship1['x'];let _0xf9362c=ship1['speed']*AI_POSITION_MOVE_SPEED_FACTOR;if(Math[_0x54f85f(0x1f4)](_0x58603d)>AI_MOVEMENT_DEADZONE)ship1['x']+=Math[_0x54f85f(0x1db)](_0x58603d)*Math[_0x54f85f(0x188)](Math[_0x54f85f(0x1f4)](_0x58603d),_0xf9362c);const _0x5c9e68=ship1['width']+(player1IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship1['x']=Math[_0x54f85f(0x15a)](0x0,Math[_0x54f85f(0x188)](gameCanvas[_0x54f85f(0x1d7)]-_0x5c9e68,ship1['x']));}if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture){const _0xa44487=ship2[_0x54f85f(0x1a8)]-ship2['x'];let _0x3b2821=ship2['speed']*AI_POSITION_MOVE_SPEED_FACTOR;if(Math[_0x54f85f(0x1f4)](_0xa44487)>AI_MOVEMENT_DEADZONE)ship2['x']+=Math[_0x54f85f(0x1db)](_0xa44487)*Math[_0x54f85f(0x188)](Math[_0x54f85f(0x1f4)](_0xa44487),_0x3b2821);const _0x324afa=ship2[_0x54f85f(0x1d7)]+(player2IsDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship2['x']=Math[_0x54f85f(0x15a)](0x0,Math[_0x54f85f(0x188)](gameCanvas[_0x54f85f(0x1d7)]-_0x324afa,ship2['x']));}}else{if(ship){if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){const _0x3f7787=ship[_0x54f85f(0x1a8)]-ship['x'];let _0x1eef40=ship['speed']*AI_POSITION_MOVE_SPEED_FACTOR;if(Math[_0x54f85f(0x1f4)](_0x3f7787)>AI_MOVEMENT_DEADZONE)ship['x']+=Math[_0x54f85f(0x1db)](_0x3f7787)*Math[_0x54f85f(0x188)](Math[_0x54f85f(0x1f4)](_0x3f7787),_0x1eef40);const _0x2d3da9=ship['width']+(isDualShipActive?DUAL_SHIP_OFFSET_X:0x0);ship['x']=Math[_0x54f85f(0x15a)](0x0,Math[_0x54f85f(0x188)](gameCanvas[_0x54f85f(0x1d7)]-_0x2d3da9,ship['x']));}}}}}if(isTwoPlayerMode&&selectedGameMode===_0x54f85f(0x13c)){if(isPlayer1WaitingForRespawn&&_0x174e8a>=player1RespawnTime)isPlayer1WaitingForRespawn=![];if(isPlayer1Invincible&&_0x174e8a>=player1InvincibilityEndTime)isPlayer1Invincible=![];if(isPlayer2WaitingForRespawn&&_0x174e8a>=player2RespawnTime)isPlayer2WaitingForRespawn=![];if(isPlayer2Invincible&&_0x174e8a>=player2InvincibilityEndTime)isPlayer2Invincible=![];}else{if(isWaitingForRespawn&&_0x174e8a>=respawnTime)isWaitingForRespawn=![];if(isInvincible&&_0x174e8a>=invincibilityEndTime)isInvincible=![];}for(let _0x5572f0=bullets[_0x54f85f(0x14d)]-0x1;_0x5572f0>=0x0;_0x5572f0--){const _0x64e7a6=bullets[_0x5572f0];if(!_0x64e7a6){bullets['splice'](_0x5572f0,0x1);continue;}_0x64e7a6['y']-=_0x64e7a6[_0x54f85f(0x15f)];if(_0x64e7a6['y']+PLAYER_BULLET_HEIGHT<0x0){bullets[_0x54f85f(0x15d)](_0x5572f0,0x1);continue;}for(let _0x15b37e=enemies[_0x54f85f(0x14d)]-0x1;_0x15b37e>=0x0;_0x15b37e--){const _0x5b782d=enemies[_0x15b37e];if(!_0x5b782d){enemies[_0x54f85f(0x15d)](_0x15b37e,0x1);continue;}const _0x5a4405={'x':_0x5b782d['x'],'y':_0x5b782d['y'],'width':_0x5b782d[_0x54f85f(0x242)]===ENEMY3_TYPE?BOSS_WIDTH:_0x5b782d[_0x54f85f(0x242)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,'height':_0x5b782d[_0x54f85f(0x242)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x5b782d[_0x54f85f(0x242)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT},_0x583185={'x':_0x64e7a6['x'],'y':_0x64e7a6['y'],'width':_0x64e7a6['width'],'height':_0x64e7a6[_0x54f85f(0x215)]};if(checkCollision(_0x583185,_0x5a4405)){bullets[_0x54f85f(0x15d)](_0x5572f0,0x1);const _0x1c9bb9=handleEnemyHit(_0x5b782d,_0x64e7a6[_0x54f85f(0x193)]);if(_0x1c9bb9[_0x54f85f(0x21a)])enemies['splice'](_0x15b37e,0x1);break;}}}for(let _0x38fe10=enemyBullets[_0x54f85f(0x14d)]-0x1;_0x38fe10>=0x0;_0x38fe10--){const _0x439f33=enemyBullets[_0x38fe10];if(!_0x439f33){enemyBullets[_0x54f85f(0x15d)](_0x38fe10,0x1);continue;}_0x439f33['x']+=_0x439f33['vx'],_0x439f33['y']+=_0x439f33['vy'],(_0x439f33['y']>gameCanvas[_0x54f85f(0x215)]||_0x439f33['y']<-ENEMY_BULLET_HEIGHT||_0x439f33['x']<-ENEMY_BULLET_WIDTH||_0x439f33['x']>gameCanvas[_0x54f85f(0x1d7)])&&enemyBullets[_0x54f85f(0x15d)](_0x38fe10,0x1);}const _0x241e07=gameCanvas?gameCanvas[_0x54f85f(0x215)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4,_0x4b7cb8=0x2;for(let _0x343302=fallingShips[_0x54f85f(0x14d)]-0x1;_0x343302>=0x0;_0x343302--){const _0x19e806=fallingShips[_0x343302];if(!_0x19e806){fallingShips[_0x54f85f(0x15d)](_0x343302,0x1);continue;}let _0x3ae043=![];if(!_0x19e806[_0x54f85f(0x239)]){_0x19e806['y']+=FALLING_SHIP_SPEED;if(_0x19e806['y']>=_0x241e07){_0x19e806['y']=_0x241e07,_0x19e806[_0x54f85f(0x239)]=!![],_0x19e806[_0x54f85f(0x16e)]=_0x174e8a;!_0x19e806[_0x54f85f(0x24c)]&&(_0x19e806['rotation']=0x0,_0x19e806[_0x54f85f(0x24c)]=!![]);let _0x964855=null,_0x2af717=()=>{},_0x189766=![],_0x5e2bf4=![],_0x2b2eee=![],_0x1dba4d=null;if(isCoopAIDemoActive){if(_0x19e806[_0x54f85f(0x1cd)]===_0x54f85f(0x16a)&&ship1&&player1Lives>0x0)_0x964855=ship1,_0x189766=player1IsDualShipActive,_0x2af717=()=>{player1IsDualShipActive=!![];},_0x2b2eee=!![],_0x1dba4d='player1';else _0x19e806[_0x54f85f(0x1cd)]===_0x54f85f(0x178)&&ship2&&player2Lives>0x0&&(_0x964855=ship2,_0x189766=player2IsDualShipActive,_0x2af717=()=>{player2IsDualShipActive=!![];},_0x2b2eee=!![],_0x1dba4d=_0x54f85f(0x178));}else{if(isTwoPlayerMode&&selectedGameMode==='coop'){if(_0x19e806[_0x54f85f(0x1cd)]==='player1'&&ship1&&player1Lives>0x0)_0x964855=ship1,_0x189766=player1IsDualShipActive,_0x5e2bf4=isPlayer1ShipCaptured,_0x2af717=()=>{player1IsDualShipActive=!![],isPlayer1ShipCaptured=![];},_0x2b2eee=!![],_0x1dba4d='player1';else _0x19e806[_0x54f85f(0x1cd)]===_0x54f85f(0x178)&&ship2&&player2Lives>0x0&&(_0x964855=ship2,_0x189766=player2IsDualShipActive,_0x5e2bf4=isPlayer2ShipCaptured,_0x2af717=()=>{player2IsDualShipActive=!![],isPlayer2ShipCaptured=![];},_0x2b2eee=!![],_0x1dba4d=_0x54f85f(0x178));}else ship&&playerLives>0x0&&(_0x964855=ship,_0x189766=isDualShipActive,_0x5e2bf4=isShipCaptured,_0x2af717=()=>{const _0x292ed4=_0x54f85f;isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode===_0x292ed4(0x1fe)){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}isShipCaptured=![];},_0x2b2eee=!![],_0x1dba4d=isTwoPlayerMode&&selectedGameMode===_0x54f85f(0x1fe)?String(currentPlayer):_0x54f85f(0x16a));}if(_0x2b2eee&&!_0x189766){_0x2af717(),playSound(dualShipSound);if(_0x5e2bf4&&!isCoopAIDemoActive){if(_0x1dba4d===_0x54f85f(0x16a)&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x174e8a+INVINCIBILITY_DURATION_MS;else{if(_0x1dba4d===_0x54f85f(0x178)&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x174e8a+INVINCIBILITY_DURATION_MS;else ship&&(isInvincible=!![],invincibilityEndTime=_0x174e8a+INVINCIBILITY_DURATION_MS);}}fallingShips[_0x54f85f(0x15d)](_0x343302,0x1),_0x3ae043=!![];continue;}else{if(_0x2b2eee&&_0x189766){fallingShips[_0x54f85f(0x15d)](_0x343302,0x1),_0x3ae043=!![];continue;}else{fallingShips[_0x54f85f(0x15d)](_0x343302,0x1),_0x3ae043=!![];continue;}}}}if(_0x3ae043)continue;const _0x4498da=_0x174e8a-_0x19e806[_0x54f85f(0x175)];if(_0x4498da<FALLING_SHIP_FADE_DURATION_MS)_0x19e806[_0x54f85f(0x131)]=Math['max'](0x0,0x1-_0x4498da/FALLING_SHIP_FADE_DURATION_MS);else _0x19e806['tintProgress']=0x0;if(_0x19e806[_0x54f85f(0x24c)])_0x19e806[_0x54f85f(0x1eb)]=0x0;else{if(!_0x19e806[_0x54f85f(0x239)]&&typeof _0x19e806['rotationDirection']===_0x54f85f(0x18f)&&typeof FALLING_SHIP_ROTATION_SPEED==='number'&&FALLING_SHIP_ROTATION_SPEED>0x0){const _0x154f62=FALLING_SHIP_ROTATION_SPEED*_0x19e806[_0x54f85f(0x1b2)];_0x19e806[_0x54f85f(0x1eb)]+=_0x154f62,_0x19e806['totalRotation']+=Math[_0x54f85f(0x1f4)](_0x154f62);if(_0x19e806[_0x54f85f(0x167)]>=_0x4b7cb8*0x2*Math['PI'])_0x19e806['rotation']=0x0,_0x19e806[_0x54f85f(0x24c)]=!![];else{if(_0x19e806[_0x54f85f(0x1eb)]>Math['PI']*0x2)_0x19e806[_0x54f85f(0x1eb)]-=Math['PI']*0x2;if(_0x19e806[_0x54f85f(0x1eb)]<0x0)_0x19e806[_0x54f85f(0x1eb)]+=Math['PI']*0x2;}}else _0x19e806['rotation']=_0x19e806[_0x54f85f(0x1eb)]||0x0;}if(!_0x19e806[_0x54f85f(0x239)]){let _0x27ddf2=null,_0x454a81=()=>{},_0x18927a=0x0,_0x31f4d1=![],_0x4aa0eb=![];if(isCoopAIDemoActive){if(_0x19e806[_0x54f85f(0x1cd)]==='player1'&&ship1&&player1Lives>0x0)_0x27ddf2=ship1,_0x4aa0eb=player1IsDualShipActive,_0x454a81=()=>{if(!_0x4aa0eb)player1IsDualShipActive=!![];},_0x18927a=0x1;else _0x19e806[_0x54f85f(0x1cd)]===_0x54f85f(0x178)&&ship2&&player2Lives>0x0&&(_0x27ddf2=ship2,_0x4aa0eb=player2IsDualShipActive,_0x454a81=()=>{if(!_0x4aa0eb)player2IsDualShipActive=!![];},_0x18927a=0x2);}else{if(isTwoPlayerMode&&selectedGameMode==='coop'){if(_0x19e806[_0x54f85f(0x1cd)]==='player1'&&ship1&&player1Lives>0x0)_0x27ddf2=ship1,_0x31f4d1=isPlayer1ShipCaptured,_0x4aa0eb=player1IsDualShipActive,_0x454a81=()=>{if(!_0x4aa0eb)player1IsDualShipActive=!![];isPlayer1ShipCaptured=![];},_0x18927a=0x1;else _0x19e806[_0x54f85f(0x1cd)]===_0x54f85f(0x178)&&ship2&&player2Lives>0x0&&(_0x27ddf2=ship2,_0x31f4d1=isPlayer2ShipCaptured,_0x4aa0eb=player2IsDualShipActive,_0x454a81=()=>{if(!_0x4aa0eb)player2IsDualShipActive=!![];isPlayer2ShipCaptured=![];},_0x18927a=0x2);}else ship&&playerLives>0x0&&(_0x27ddf2=ship,_0x31f4d1=isShipCaptured,_0x4aa0eb=isDualShipActive,_0x454a81=()=>{const _0x37a542=_0x54f85f;if(!_0x4aa0eb){isDualShipActive=!![];if(isTwoPlayerMode&&selectedGameMode===_0x37a542(0x1fe)){if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];}else{if(!isTwoPlayerMode)player1IsDualShipActive=!![];}}isShipCaptured=![];},_0x18927a=isTwoPlayerMode&&selectedGameMode===_0x54f85f(0x1fe)?currentPlayer:0x1);}if(_0x27ddf2&&!_0x4aa0eb){const _0x3013cd={'x':_0x19e806['x'],'y':_0x19e806['y'],'width':_0x19e806[_0x54f85f(0x1d7)],'height':_0x19e806[_0x54f85f(0x215)]},_0x48268f={'x':_0x27ddf2['x'],'y':_0x27ddf2['y'],'width':_0x27ddf2['width'],'height':_0x27ddf2['height']};if(checkCollision(_0x3013cd,_0x48268f)){_0x454a81();if(_0x31f4d1&&!isCoopAIDemoActive){playSound(dualShipSound);if(_0x18927a===0x1&&ship1)isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x174e8a+INVINCIBILITY_DURATION_MS;else{if(_0x18927a===0x2&&ship2)isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x174e8a+INVINCIBILITY_DURATION_MS;else _0x18927a!==0x0&&ship&&(isInvincible=!![],invincibilityEndTime=_0x174e8a+INVINCIBILITY_DURATION_MS);}}else playSound(dualShipSound);fallingShips[_0x54f85f(0x15d)](_0x343302,0x1);continue;}}}if(!_0x19e806[_0x54f85f(0x239)]&&_0x19e806['y']>=gameCanvas[_0x54f85f(0x215)])fallingShips['splice'](_0x343302,0x1);}let _0x302e70=0x0;const _0x5cb8b5=enemies[_0x54f85f(0x21c)](_0x2086ae=>_0x2086ae?.['state']===_0x54f85f(0x18d)),_0x58593c=!isChallengingStage&&!isWaveTransitioning&&_0x5cb8b5&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode==='coop'&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage));if(_0x58593c){!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound));const _0x1dc8a3=enemies[_0x54f85f(0x1a9)](_0x379097=>_0x379097?.[_0x54f85f(0x230)]===_0x54f85f(0x18d));if(_0x1dc8a3[_0x54f85f(0x14d)]>0x0){let _0x2ea12a=gameCanvas[_0x54f85f(0x1d7)],_0x57b97c=0x0;_0x1dc8a3[_0x54f85f(0x229)](_0x36e153=>{const _0x1fa40c=_0x54f85f;_0x36e153&&(_0x2ea12a=Math[_0x1fa40c(0x188)](_0x2ea12a,_0x36e153['x']),_0x57b97c=Math[_0x1fa40c(0x15a)](_0x57b97c,_0x36e153['x']+_0x36e153[_0x1fa40c(0x1d7)]));});const _0xa218ae=gameCanvas[_0x54f85f(0x1d7)]*GRID_HORIZONTAL_MARGIN_PERCENT,_0x334dd5=gameCanvas[_0x54f85f(0x1d7)]*(0x1-GRID_HORIZONTAL_MARGIN_PERCENT);if(gridMoveDirection===0x1&&_0x57b97c>=_0x334dd5)gridMoveDirection=-0x1;else{if(gridMoveDirection===-0x1&&_0x2ea12a<=_0xa218ae)gridMoveDirection=0x1;}const _0x1db82e=scaleValue(level,BASE_GRID_MOVE_SPEED,MAX_GRID_MOVE_SPEED);_0x302e70=_0x1db82e*gridMoveDirection,currentGridOffsetX+=_0x302e70,enemies['forEach'](_0x179b27=>{const _0x4b147f=_0x54f85f;if(_0x179b27&&(_0x179b27['state']===_0x4b147f(0x1bd)||_0x179b27[_0x4b147f(0x230)]===_0x4b147f(0x18d)||_0x179b27['state']===_0x4b147f(0x180)))try{const _0x272c66=_0x179b27[_0x4b147f(0x242)]===ENEMY3_TYPE?BOSS_WIDTH:_0x179b27['type']===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x123229,y:_0x5e140d}=getCurrentGridSlotPosition(_0x179b27[_0x4b147f(0x1d5)],_0x179b27[_0x4b147f(0x13f)],_0x272c66);_0x179b27['targetGridX']=_0x123229,_0x179b27[_0x4b147f(0x1dd)]=_0x5e140d;}catch(_0x5fd205){console[_0x4b147f(0x1c8)](_0x4b147f(0x155)+_0x179b27?.['id']+_0x4b147f(0x1a2)+_0x179b27?.[_0x4b147f(0x230)]+_0x4b147f(0x1fc),_0x5fd205);}});}}else isGridSoundPlaying&&(stopSound(gridBackgroundSound),isGridSoundPlaying=![]),_0x302e70=0x0;for(let _0x3e0282=enemies[_0x54f85f(0x14d)]-0x1;_0x3e0282>=0x0;_0x3e0282--){let _0x237fbd=enemies[_0x3e0282];if(!_0x237fbd){enemies['splice'](_0x3e0282,0x1);continue;}const _0x1b3a66=_0x237fbd['id'];if(_0x237fbd[_0x54f85f(0x18b)]&&_0x237fbd['state']!==_0x54f85f(0x189)){clearTimeout(_0x237fbd[_0x54f85f(0x18b)]);const _0x5cdba5=enemySpawnTimeouts[_0x54f85f(0x1ec)](_0x237fbd[_0x54f85f(0x18b)]);if(_0x5cdba5>-0x1)enemySpawnTimeouts[_0x54f85f(0x15d)](_0x5cdba5,0x1);_0x237fbd[_0x54f85f(0x18b)]=null;}const _0x5bf901=_0x237fbd[_0x54f85f(0x242)]===ENEMY3_TYPE?BOSS_WIDTH:_0x237fbd[_0x54f85f(0x242)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x223f29=_0x237fbd[_0x54f85f(0x242)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x237fbd[_0x54f85f(0x242)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT;switch(_0x237fbd['state']){case _0x54f85f(0x142):{let _0x2ca0b7=CS_ENTRANCE_PATH_SPEED;const _0x440a1a=_0x237fbd['pathSpeedMultiplier']||0x1;_0x2ca0b7*=_0x440a1a;if(!isChallengingStage){enemies['splice'](_0x3e0282,0x1),_0x237fbd=null;break;}let _0x19c0ab=challengingStagePaths,_0x5656b5=_0x19c0ab[_0x237fbd[_0x54f85f(0x20e)]];if(!_0x5656b5||_0x237fbd[_0x54f85f(0x240)]>=_0x5656b5[_0x54f85f(0x14d)]){enemies[_0x54f85f(0x15d)](_0x3e0282,0x1),_0x237fbd=null;break;}const _0x58e601=_0x5656b5[_0x237fbd[_0x54f85f(0x240)]];if(!_0x58e601||!_0x58e601['p0']||!_0x58e601['p1']||!_0x58e601['p2']||!_0x58e601['p3']){console[_0x54f85f(0x1c8)](_0x54f85f(0x17b)+_0x237fbd['pathSegmentIndex']+_0x54f85f(0x232)+_0x237fbd['entrancePathId']+_0x54f85f(0x1a6)+_0x237fbd['id']),enemies[_0x54f85f(0x15d)](_0x3e0282,0x1),_0x237fbd=null;break;}_0x237fbd[_0x54f85f(0x22a)]+=_0x2ca0b7;let _0x195d03,_0x4866fc,_0x502433=_0x237fbd['x'],_0x385599=_0x237fbd['y'];if(_0x237fbd[_0x54f85f(0x22a)]>=0x1){_0x237fbd['pathT']=0x0,_0x237fbd[_0x54f85f(0x240)]++;if(_0x237fbd[_0x54f85f(0x240)]>=_0x5656b5[_0x54f85f(0x14d)])enemies['splice'](_0x3e0282,0x1),_0x237fbd=null;else{const _0x5df74b=_0x5656b5[_0x237fbd[_0x54f85f(0x240)]];_0x5df74b?.['p0']?(_0x195d03=_0x5df74b['p0']['x'],_0x4866fc=_0x5df74b['p0']['y']):(console['error'](_0x54f85f(0x18a)+_0x237fbd[_0x54f85f(0x240)]+'\x20for\x20path\x20'+_0x237fbd[_0x54f85f(0x20e)]+_0x54f85f(0x1a6)+_0x1b3a66),enemies['splice'](_0x3e0282,0x1),_0x237fbd=null);}}else try{_0x195d03=calculateBezierPoint(_0x237fbd[_0x54f85f(0x22a)],_0x58e601['p0']['x'],_0x58e601['p1']['x'],_0x58e601['p2']['x'],_0x58e601['p3']['x']),_0x4866fc=calculateBezierPoint(_0x237fbd[_0x54f85f(0x22a)],_0x58e601['p0']['y'],_0x58e601['p1']['y'],_0x58e601['p2']['y'],_0x58e601['p3']['y']);}catch(_0xa6d4cb){console[_0x54f85f(0x1c8)]('Error\x20calculating\x20CS\x20Bezier\x20point\x20for\x20enemy\x20'+_0x1b3a66+':',_0xa6d4cb),enemies[_0x54f85f(0x15d)](_0x3e0282,0x1),_0x237fbd=null;}_0x237fbd&&(isNaN(_0x195d03)||isNaN(_0x4866fc)?(console['error']('NaN\x20detected\x20in\x20CS\x20path\x20calculation\x20for\x20enemy\x20'+_0x1b3a66+_0x54f85f(0x16d)),enemies['splice'](_0x3e0282,0x1),_0x237fbd=null):(_0x237fbd['velocityX']=_0x195d03-_0x502433,_0x237fbd[_0x54f85f(0x166)]=_0x4866fc-_0x385599,_0x237fbd['x']=_0x195d03,_0x237fbd['y']=_0x4866fc));break;}case _0x54f85f(0x1c1):{if(isChallengingStage){enemies[_0x54f85f(0x15d)](_0x3e0282,0x1),_0x237fbd=null;break;}let _0x982a5a=normalWaveEntrancePaths,_0x2e5808=_0x982a5a[_0x237fbd['entrancePathId']],_0x4cd4f6;_0x237fbd[_0x54f85f(0x20e)]===_0x54f85f(0x1b4)||_0x237fbd[_0x54f85f(0x20e)]===_0x54f85f(0x19d)?_0x4cd4f6=BOSS_LOOP_ENTRANCE_PATH_SPEED:_0x4cd4f6=NORMAL_ENTRANCE_PATH_SPEED;if(!_0x2e5808){console[_0x54f85f(0x1b0)](_0x54f85f(0x144)+_0x1b3a66+'\x20missing\x20SHARED\x20path\x20'+_0x237fbd[_0x54f85f(0x20e)]+_0x54f85f(0x1cf));try{_0x237fbd[_0x54f85f(0x171)]=_0x237fbd[_0x54f85f(0x171)]??gameCanvas[_0x54f85f(0x1d7)]/0x2,_0x237fbd[_0x54f85f(0x1dd)]=_0x237fbd['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x5e3907){console['error']('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x1b3a66+_0x54f85f(0x16b),_0x5e3907),_0x237fbd[_0x54f85f(0x171)]=gameCanvas[_0x54f85f(0x1d7)]/0x2,_0x237fbd[_0x54f85f(0x1dd)]=ENEMY_TOP_MARGIN;}_0x237fbd[_0x54f85f(0x230)]=_0x54f85f(0x180),_0x237fbd['pathT']=0x0,_0x237fbd['pathSegmentIndex']=0x0,_0x237fbd['velocityX']=0x0,_0x237fbd['velocityY']=0x0;_0x237fbd['squadronId']!==undefined&&squadronCompletionStatus[_0x237fbd['squadronId']]&&squadronCompletionStatus[_0x237fbd[_0x54f85f(0x1cb)]]['completed']++;break;}if(_0x237fbd[_0x54f85f(0x240)]>=_0x2e5808['length']){console[_0x54f85f(0x1b0)](_0x54f85f(0x144)+_0x1b3a66+_0x54f85f(0x235)+_0x237fbd[_0x54f85f(0x240)]+'\x20out\x20of\x20bounds\x20for\x20SHARED\x20path\x20'+_0x237fbd[_0x54f85f(0x20e)]+_0x54f85f(0x1cf));try{_0x237fbd['targetGridX']=_0x237fbd[_0x54f85f(0x171)]??gameCanvas[_0x54f85f(0x1d7)]/0x2,_0x237fbd[_0x54f85f(0x1dd)]=_0x237fbd[_0x54f85f(0x1dd)]??ENEMY_TOP_MARGIN;}catch(_0x4cb236){console[_0x54f85f(0x1c8)](_0x54f85f(0x1d8)+_0x1b3a66+_0x54f85f(0x1d3),_0x4cb236),_0x237fbd[_0x54f85f(0x171)]=gameCanvas[_0x54f85f(0x1d7)]/0x2,_0x237fbd['targetGridY']=ENEMY_TOP_MARGIN;}_0x237fbd[_0x54f85f(0x230)]=_0x54f85f(0x180),_0x237fbd[_0x54f85f(0x22a)]=0x0,_0x237fbd[_0x54f85f(0x240)]=0x0,_0x237fbd[_0x54f85f(0x135)]=0x0,_0x237fbd[_0x54f85f(0x166)]=0x0;_0x237fbd['squadronId']!==undefined&&squadronCompletionStatus[_0x237fbd['squadronId']]&&squadronCompletionStatus[_0x237fbd[_0x54f85f(0x1cb)]][_0x54f85f(0x23a)]++;break;}const _0x1fb0d1=_0x2e5808[_0x237fbd[_0x54f85f(0x240)]];if(!_0x1fb0d1||!_0x1fb0d1['p0']||!_0x1fb0d1['p1']||!_0x1fb0d1['p2']||!_0x1fb0d1['p3']){console[_0x54f85f(0x1c8)](_0x54f85f(0x1b6)+_0x237fbd[_0x54f85f(0x240)]+_0x54f85f(0x13b)+_0x237fbd[_0x54f85f(0x20e)]+_0x54f85f(0x1a6)+_0x1b3a66+_0x54f85f(0x1cf));try{_0x237fbd[_0x54f85f(0x171)]=_0x237fbd[_0x54f85f(0x171)]??gameCanvas[_0x54f85f(0x1d7)]/0x2,_0x237fbd[_0x54f85f(0x1dd)]=_0x237fbd['targetGridY']??ENEMY_TOP_MARGIN+_0x237fbd[_0x54f85f(0x1d5)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}catch(_0x34729f){console[_0x54f85f(0x1c8)](_0x54f85f(0x1d8)+_0x1b3a66+_0x54f85f(0x1e7),_0x34729f),_0x237fbd['targetGridX']=gameCanvas[_0x54f85f(0x1d7)]/0x2,_0x237fbd[_0x54f85f(0x1dd)]=ENEMY_TOP_MARGIN;}_0x237fbd[_0x54f85f(0x230)]=_0x54f85f(0x180),_0x237fbd[_0x54f85f(0x22a)]=0x0,_0x237fbd[_0x54f85f(0x240)]=0x0,_0x237fbd[_0x54f85f(0x135)]=0x0,_0x237fbd[_0x54f85f(0x166)]=0x0;_0x237fbd[_0x54f85f(0x1cb)]!==undefined&&squadronCompletionStatus[_0x237fbd[_0x54f85f(0x1cb)]]&&squadronCompletionStatus[_0x237fbd[_0x54f85f(0x1cb)]][_0x54f85f(0x23a)]++;break;}_0x237fbd['pathT']+=_0x4cd4f6;let _0x45e05d,_0x2ea875,_0x4ae9b6=_0x237fbd['x'],_0x9d5028=_0x237fbd['y'];if(_0x237fbd[_0x54f85f(0x22a)]>=0x1){_0x237fbd[_0x54f85f(0x22a)]=0x0,_0x237fbd[_0x54f85f(0x240)]++;if(_0x237fbd[_0x54f85f(0x240)]>=_0x2e5808[_0x54f85f(0x14d)]){let _0x3d8ec0,_0x3f2dc2;try{_0x3d8ec0=calculateBezierPoint(0x1,_0x1fb0d1['p0']['x'],_0x1fb0d1['p1']['x'],_0x1fb0d1['p2']['x'],_0x1fb0d1['p3']['x']),_0x3f2dc2=calculateBezierPoint(0x1,_0x1fb0d1['p0']['y'],_0x1fb0d1['p1']['y'],_0x1fb0d1['p2']['y'],_0x1fb0d1['p3']['y']);}catch(_0x210636){console['error']('Error\x20calculating\x20final\x20bezier\x20point\x20for\x20'+_0x1b3a66+_0x54f85f(0x1c4)+_0x237fbd[_0x54f85f(0x20e)],_0x210636),_0x3d8ec0=_0x1fb0d1['p3']['x'],_0x3f2dc2=_0x1fb0d1['p3']['y'];}_0x237fbd['x']=_0x3d8ec0,_0x237fbd['y']=_0x3f2dc2;try{_0x237fbd['targetGridX']=_0x237fbd['targetGridX']??gameCanvas[_0x54f85f(0x1d7)]/0x2,_0x237fbd[_0x54f85f(0x1dd)]=_0x237fbd['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x5c9cb8){console[_0x54f85f(0x1c8)]('Error\x20getting\x20target\x20grid\x20pos\x20for\x20'+_0x1b3a66+_0x54f85f(0x1c4)+_0x237fbd[_0x54f85f(0x20e)],_0x5c9cb8),_0x237fbd[_0x54f85f(0x171)]=_0x237fbd['x'],_0x237fbd[_0x54f85f(0x1dd)]=ENEMY_TOP_MARGIN+_0x237fbd[_0x54f85f(0x1d5)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x8fd053=_0x237fbd['state'];_0x237fbd[_0x54f85f(0x230)]=_0x54f85f(0x180),_0x237fbd[_0x54f85f(0x135)]=0x0,_0x237fbd[_0x54f85f(0x166)]=0x0,_0x237fbd[_0x54f85f(0x240)]=0x0;_0x8fd053===_0x54f85f(0x1c1)&&_0x237fbd[_0x54f85f(0x1cb)]!==undefined&&squadronCompletionStatus[_0x237fbd['squadronId']]&&squadronCompletionStatus[_0x237fbd[_0x54f85f(0x1cb)]]['completed']++;break;}else{const _0x47c199=_0x2e5808[_0x237fbd[_0x54f85f(0x240)]];if(_0x47c199?.['p0'])_0x45e05d=_0x47c199['p0']['x'],_0x2ea875=_0x47c199['p0']['y'];else{console[_0x54f85f(0x1c8)]('Invalid\x20next\x20Normal\x20Bezier\x20segment\x20'+_0x237fbd[_0x54f85f(0x240)]+'\x20for\x20SHARED\x20path\x20'+_0x237fbd[_0x54f85f(0x20e)]+_0x54f85f(0x1a6)+_0x1b3a66+_0x54f85f(0x1cf));try{_0x237fbd['targetGridX']=_0x237fbd[_0x54f85f(0x171)]??gameCanvas[_0x54f85f(0x1d7)]/0x2,_0x237fbd[_0x54f85f(0x1dd)]=_0x237fbd[_0x54f85f(0x1dd)]??ENEMY_TOP_MARGIN;}catch(_0x5e50a3){console[_0x54f85f(0x1c8)](_0x54f85f(0x1d8)+_0x1b3a66+'\x20after\x20bad\x20next\x20segment',_0x5e50a3),_0x237fbd[_0x54f85f(0x171)]=gameCanvas[_0x54f85f(0x1d7)]/0x2,_0x237fbd[_0x54f85f(0x1dd)]=ENEMY_TOP_MARGIN;}_0x237fbd[_0x54f85f(0x230)]=_0x54f85f(0x180),_0x237fbd[_0x54f85f(0x22a)]=0x0,_0x237fbd[_0x54f85f(0x240)]=0x0,_0x237fbd[_0x54f85f(0x135)]=0x0,_0x237fbd[_0x54f85f(0x166)]=0x0;_0x237fbd['squadronId']!==undefined&&squadronCompletionStatus[_0x237fbd[_0x54f85f(0x1cb)]]&&squadronCompletionStatus[_0x237fbd[_0x54f85f(0x1cb)]][_0x54f85f(0x23a)]++;break;}}}else try{_0x45e05d=calculateBezierPoint(_0x237fbd[_0x54f85f(0x22a)],_0x1fb0d1['p0']['x'],_0x1fb0d1['p1']['x'],_0x1fb0d1['p2']['x'],_0x1fb0d1['p3']['x']),_0x2ea875=calculateBezierPoint(_0x237fbd[_0x54f85f(0x22a)],_0x1fb0d1['p0']['y'],_0x1fb0d1['p1']['y'],_0x1fb0d1['p2']['y'],_0x1fb0d1['p3']['y']);}catch(_0xffe272){console['error'](_0x54f85f(0x152)+_0x1b3a66+':',_0xffe272);try{_0x237fbd['targetGridX']=_0x237fbd[_0x54f85f(0x171)]??gameCanvas[_0x54f85f(0x1d7)]/0x2,_0x237fbd[_0x54f85f(0x1dd)]=_0x237fbd[_0x54f85f(0x1dd)]??ENEMY_TOP_MARGIN;}catch(_0x3e6fdc){console[_0x54f85f(0x1c8)](_0x54f85f(0x1d8)+_0x1b3a66+_0x54f85f(0x1f0),_0x3e6fdc),_0x237fbd['targetGridX']=gameCanvas[_0x54f85f(0x1d7)]/0x2,_0x237fbd[_0x54f85f(0x1dd)]=ENEMY_TOP_MARGIN;}_0x237fbd[_0x54f85f(0x230)]='moving_to_grid',_0x237fbd[_0x54f85f(0x22a)]=0x0,_0x237fbd['pathSegmentIndex']=0x0,_0x237fbd['velocityX']=0x0,_0x237fbd[_0x54f85f(0x166)]=0x0;_0x237fbd[_0x54f85f(0x1cb)]!==undefined&&squadronCompletionStatus[_0x237fbd[_0x54f85f(0x1cb)]]&&squadronCompletionStatus[_0x237fbd[_0x54f85f(0x1cb)]][_0x54f85f(0x23a)]++;break;}if(_0x237fbd&&_0x237fbd['state']===_0x54f85f(0x1c1)){if(isNaN(_0x45e05d)||isNaN(_0x2ea875)){console[_0x54f85f(0x1c8)]('NaN\x20detected\x20in\x20Normal\x20path\x20calculation\x20for\x20enemy\x20'+_0x1b3a66+_0x54f85f(0x1cf));try{_0x237fbd[_0x54f85f(0x171)]=_0x237fbd[_0x54f85f(0x171)]??gameCanvas[_0x54f85f(0x1d7)]/0x2,_0x237fbd[_0x54f85f(0x1dd)]=_0x237fbd['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x16e8b6){console[_0x54f85f(0x1c8)](_0x54f85f(0x1d8)+_0x1b3a66+'\x20after\x20NaN',_0x16e8b6),_0x237fbd[_0x54f85f(0x171)]=gameCanvas[_0x54f85f(0x1d7)]/0x2,_0x237fbd[_0x54f85f(0x1dd)]=ENEMY_TOP_MARGIN;}_0x237fbd[_0x54f85f(0x230)]=_0x54f85f(0x180),_0x237fbd[_0x54f85f(0x22a)]=0x0,_0x237fbd[_0x54f85f(0x240)]=0x0,_0x237fbd[_0x54f85f(0x135)]=0x0,_0x237fbd['velocityY']=0x0,_0x237fbd[_0x54f85f(0x1cb)]!==undefined&&squadronCompletionStatus[_0x237fbd[_0x54f85f(0x1cb)]]&&squadronCompletionStatus[_0x237fbd[_0x54f85f(0x1cb)]][_0x54f85f(0x23a)]++;}else{let _0x4fab77=_0x45e05d;const _0x3951ee=currentWavePatternIndex===0x1&&(_0x237fbd['squadronId']===0x2||_0x237fbd[_0x54f85f(0x1cb)]===0x3),_0x5d42c4=typeof _0x237fbd[_0x54f85f(0x205)]===_0x54f85f(0x18f)&&_0x237fbd['squadronEnemyIndex']%0x2!==0x0;if(_0x3951ee&&_0x5d42c4){const _0x389f0d=_0x5bf901+ENTRANCE_PAIR_HORIZONTAL_GAP;_0x4fab77=_0x45e05d+_0x389f0d;}_0x237fbd['velocityX']=_0x4fab77-_0x4ae9b6,_0x237fbd[_0x54f85f(0x166)]=_0x2ea875-_0x9d5028,_0x237fbd['x']=_0x4fab77,_0x237fbd['y']=_0x2ea875;}}break;}case _0x54f85f(0x180):{if(_0x237fbd['targetGridX']==null||_0x237fbd['targetGridY']==null){console[_0x54f85f(0x1b0)]('Enemy\x20'+_0x1b3a66+_0x54f85f(0x143));try{const {x:_0x2fcff6,y:_0x25dfd8}=getCurrentGridSlotPosition(_0x237fbd[_0x54f85f(0x1d5)],_0x237fbd[_0x54f85f(0x13f)],_0x5bf901);_0x237fbd['targetGridX']=_0x2fcff6,_0x237fbd[_0x54f85f(0x1dd)]=_0x25dfd8;}catch(_0x9740a5){console[_0x54f85f(0x1c8)](_0x54f85f(0x1d8)+_0x1b3a66+_0x54f85f(0x13a),_0x9740a5),_0x237fbd[_0x54f85f(0x230)]=_0x54f85f(0x18d),_0x237fbd['x']=gameCanvas[_0x54f85f(0x1d7)]/0x2,_0x237fbd['y']=ENEMY_TOP_MARGIN;break;}}const _0x311836=_0x237fbd[_0x54f85f(0x171)],_0x5b4061=_0x237fbd[_0x54f85f(0x1dd)],_0x347185=_0x311836-_0x237fbd['x'],_0x2aca7d=_0x5b4061-_0x237fbd['y'],_0x4c36f9=Math[_0x54f85f(0x15e)](_0x347185*_0x347185+_0x2aca7d*_0x2aca7d),_0x2da0b2=ENTRANCE_SPEED*1.2,_0x4e47a9=_0x2da0b2*0.5;if(_0x4c36f9>_0x4e47a9)_0x237fbd[_0x54f85f(0x135)]=_0x347185/_0x4c36f9*_0x2da0b2,_0x237fbd[_0x54f85f(0x166)]=_0x2aca7d/_0x4c36f9*_0x2da0b2,_0x237fbd['x']+=_0x237fbd[_0x54f85f(0x135)],_0x237fbd['y']+=_0x237fbd['velocityY'];else{_0x237fbd['x']=_0x311836,_0x237fbd['y']=_0x5b4061,_0x237fbd[_0x54f85f(0x135)]=0x0,_0x237fbd[_0x54f85f(0x166)]=0x0;const _0x1c4f22=_0x237fbd[_0x54f85f(0x230)];_0x237fbd[_0x54f85f(0x230)]=_0x54f85f(0x18d),_0x237fbd[_0x54f85f(0x22b)]=![];!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound));GRID_BREATH_ENABLED&&!isGridBreathingActive&&!isChallengingStage&&(isGridBreathingActive=!![],gridBreathStartTime=_0x174e8a,currentGridBreathFactor=0x0);!firstEnemyLanded&&!isFullGridWave&&!isChallengingStage&&(lastGridFireCheckTime=Date['now'](),firstEnemyLanded=!![]);if(_0x1c4f22==='moving_to_grid'&&!isChallengingStage&&!isFullGridWave&&_0x237fbd[_0x54f85f(0x1cb)]!==undefined){const _0x4aab89=_0x237fbd[_0x54f85f(0x1cb)],_0x23f0f2=squadronCompletionStatus[_0x4aab89];if(_0x23f0f2&&!_0x23f0f2['hasFiredPostLanding']){const _0x17da65=enemies[_0x54f85f(0x195)](_0x2cb75e=>{const _0x11745d=_0x54f85f;if(_0x2cb75e&&_0x2cb75e['squadronId']===_0x4aab89)return _0x2cb75e[_0x11745d(0x230)]===_0x11745d(0x18d)||!enemies[_0x11745d(0x21c)](_0x21ccca=>_0x21ccca['id']===_0x2cb75e['id']);return!![];});if(_0x17da65){_0x23f0f2[_0x54f85f(0x1dc)]=!![];const _0x520a70=enemies[_0x54f85f(0x1a9)](_0x5a69d1=>_0x5a69d1&&_0x5a69d1[_0x54f85f(0x1cb)]===_0x4aab89&&_0x5a69d1[_0x54f85f(0x230)]==='in_grid'&&(_0x5a69d1[_0x54f85f(0x242)]===ENEMY2_TYPE||_0x5a69d1[_0x54f85f(0x242)]===ENEMY3_TYPE)&&!(_0x5a69d1['type']===ENEMY3_TYPE&&_0x5a69d1['hasCapturedShip']));if(_0x520a70[_0x54f85f(0x14d)]>0x0){const _0x7e1a20=_0x520a70[Math[_0x54f85f(0x1a7)](Math[_0x54f85f(0x1cc)]()*_0x520a70[_0x54f85f(0x14d)])],_0x3d1cf7=_0x7e1a20['id'],_0x5876c7=0xc8+Math[_0x54f85f(0x1cc)]()*0x190,_0x186bb1=setTimeout(()=>{const _0x3a6721=_0x54f85f;try{const _0xab04c2=enemySpawnTimeouts[_0x3a6721(0x1ec)](_0x186bb1);if(_0xab04c2>-0x1)enemySpawnTimeouts['splice'](_0xab04c2,0x1);if(isPaused||!isInGameState||playerLives<=0x0&&(!isTwoPlayerMode||player1Lives<=0x0&&player2Lives<=0x0)||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x5e04c5=enemies[_0x3a6721(0x1f7)](_0x484866=>_0x484866&&_0x484866['id']===_0x3d1cf7);_0x5e04c5&&_0x5e04c5[_0x3a6721(0x230)]===_0x3a6721(0x18d)&&(createBulletSimple(_0x5e04c5)&&(playSound(enemyShootSound),_0x5e04c5['lastFiredTime']=Date[_0x3a6721(0x237)]()));}catch(_0x4832c9){console[_0x3a6721(0x1c8)](_0x3a6721(0x21f)+_0x3d1cf7+':',_0x4832c9);}},_0x5876c7);enemySpawnTimeouts['push'](_0x186bb1);}}}}}break;}case'in_grid':{try{const _0x4e5c95=_0x237fbd[_0x54f85f(0x242)]===ENEMY3_TYPE?BOSS_WIDTH:_0x237fbd[_0x54f85f(0x242)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x77a35,y:_0x2f548f}=getCurrentGridSlotPosition(_0x237fbd[_0x54f85f(0x1d5)],_0x237fbd['gridCol'],_0x4e5c95);typeof _0x77a35==='number'&&!isNaN(_0x77a35)&&(_0x237fbd['x']=_0x77a35),typeof _0x2f548f===_0x54f85f(0x18f)&&!isNaN(_0x2f548f)&&(_0x237fbd['y']=_0x2f548f),_0x237fbd[_0x54f85f(0x171)]=_0x77a35,_0x237fbd[_0x54f85f(0x1dd)]=_0x2f548f;}catch(_0x5f2a48){console[_0x54f85f(0x1c8)](_0x54f85f(0x212)+_0x237fbd['id']+':',_0x5f2a48);}_0x237fbd['velocityX']=_0x58593c?_0x302e70:0x0,_0x237fbd[_0x54f85f(0x166)]=0x0;_0x237fbd[_0x54f85f(0x242)]===ENEMY3_TYPE&&_0x237fbd[_0x54f85f(0x1c9)]&&_0x237fbd[_0x54f85f(0x18c)]&&(_0x237fbd[_0x54f85f(0x1a3)]=_0x237fbd['x']+CAPTURED_SHIP_OFFSET_X,_0x237fbd['capturedShipY']=_0x237fbd['y']+CAPTURED_SHIP_OFFSET_Y);break;}case'preparing_attack':{_0x237fbd[_0x54f85f(0x135)]=0x0,_0x237fbd[_0x54f85f(0x166)]=0x0;break;}case _0x54f85f(0x189):{_0x237fbd['velocityX']=0x0,_0x237fbd[_0x54f85f(0x166)]=0x0;break;}case _0x54f85f(0x146):{let _0x244ce6=isTwoPlayerMode&&selectedGameMode==='coop'?isPlayer1ShipCaptured||isPlayer2ShipCaptured:isShipCaptured;if(_0x244ce6){_0x237fbd[_0x54f85f(0x230)]=_0x54f85f(0x1bd);try{const {x:_0x4165ad,y:_0x52ad2f}=getCurrentGridSlotPosition(_0x237fbd['gridRow'],_0x237fbd[_0x54f85f(0x13f)],_0x5bf901);_0x237fbd['targetGridX']=_0x4165ad,_0x237fbd[_0x54f85f(0x1dd)]=_0x52ad2f;}catch(_0x347e29){console[_0x54f85f(0x1c8)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20'+_0x237fbd['id']+':',_0x347e29),_0x237fbd[_0x54f85f(0x171)]=gameCanvas[_0x54f85f(0x1d7)]/0x2,_0x237fbd[_0x54f85f(0x1dd)]=ENEMY_TOP_MARGIN;}break;}const _0x45c5e1=_0x237fbd['targetX'],_0x5a672d=_0x237fbd[_0x54f85f(0x183)];if(_0x45c5e1==null||_0x5a672d==null){console[_0x54f85f(0x1c8)](_0x54f85f(0x1e4)+_0x237fbd['id']+'\x20diving\x20to\x20capture\x20without\x20targetX/Y!\x20Aborting.'),_0x237fbd['state']=_0x54f85f(0x1bd);try{const {x:_0x4e96ad,y:_0xde14f5}=getCurrentGridSlotPosition(_0x237fbd[_0x54f85f(0x1d5)],_0x237fbd[_0x54f85f(0x13f)],_0x5bf901);_0x237fbd[_0x54f85f(0x171)]=_0x4e96ad,_0x237fbd['targetGridY']=_0xde14f5;}catch(_0x3e8d15){console[_0x54f85f(0x1c8)](_0x54f85f(0x132)+_0x237fbd['id']+':',_0x3e8d15),_0x237fbd[_0x54f85f(0x171)]=gameCanvas[_0x54f85f(0x1d7)]/0x2,_0x237fbd[_0x54f85f(0x1dd)]=ENEMY_TOP_MARGIN;}break;}const _0x122ea5=_0x45c5e1-_0x237fbd['x'],_0x1c31ad=_0x5a672d-_0x237fbd['y'],_0x68c216=Math[_0x54f85f(0x15e)](_0x122ea5*_0x122ea5+_0x1c31ad*_0x1c31ad),_0x1be299=BOSS_CAPTURE_DIVE_SPEED_FACTOR*BASE_ENEMY_ATTACK_SPEED,_0x4afc1e=_0x1be299*0.6;_0x68c216>_0x4afc1e?(_0x237fbd[_0x54f85f(0x135)]=_0x122ea5/_0x68c216*_0x1be299,_0x237fbd[_0x54f85f(0x166)]=_0x1c31ad/_0x68c216*_0x1be299,_0x237fbd['x']+=_0x237fbd[_0x54f85f(0x135)],_0x237fbd['y']+=_0x237fbd[_0x54f85f(0x166)]):(_0x237fbd['x']=_0x45c5e1,_0x237fbd['y']=_0x5a672d,_0x237fbd[_0x54f85f(0x135)]=0x0,_0x237fbd['velocityY']=0x0,_0x237fbd[_0x54f85f(0x230)]=_0x54f85f(0x1f2),_0x237fbd[_0x54f85f(0x15c)]=_0x174e8a,capturingBossId=_0x237fbd['id'],captureBeamActive=!![],captureBeamSource={'x':_0x237fbd['x']+_0x5bf901/0x2,'y':_0x237fbd['y']+_0x223f29},captureBeamTargetY=_0x237fbd['y'],captureBeamProgress=0x0,playSound(captureSound),_0x237fbd['isPreparingForImmediateCapture']&&(captureAttemptMadeThisLevel=!![],delete _0x237fbd['isPreparingForImmediateCapture']));break;}case _0x54f85f(0x1f2):{_0x237fbd[_0x54f85f(0x135)]=0x0,_0x237fbd['velocityY']=0x0;_0x237fbd[_0x54f85f(0x1d9)]&&!captureAttemptMadeThisLevel&&(captureAttemptMadeThisLevel=!![],delete _0x237fbd[_0x54f85f(0x1d9)]);let _0x478c89=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x478c89=isPlayer1ShipCaptured&&capturedBossIdWithMessage===_0x237fbd['id']||isPlayer2ShipCaptured&&capturedBossIdWithMessage===_0x237fbd['id']:_0x478c89=isShipCaptured&&capturedBossIdWithMessage===_0x237fbd['id'];if(_0x478c89){captureBeamActive=![];if(capturingBossId===_0x237fbd['id'])capturingBossId=null;_0x237fbd[_0x54f85f(0x230)]=_0x54f85f(0x1bd),stopSound(captureSound);break;}const _0xe90afe=_0x174e8a-_0x237fbd[_0x54f85f(0x15c)],_0x233008=CAPTURE_BEAM_ANIMATION_DURATION_MS/0x2,_0x27bf33=CAPTURE_BEAM_DURATION_MS;if(_0xe90afe<_0x233008)captureBeamProgress=_0xe90afe/_0x233008;else{if(_0xe90afe<_0x27bf33-_0x233008)captureBeamProgress=0x1;else{if(_0xe90afe<_0x27bf33)captureBeamProgress=0x1-(_0xe90afe-(_0x27bf33-_0x233008))/_0x233008;else{captureBeamProgress=0x0,captureBeamActive=![],capturingBossId=null,stopSound(captureSound),_0x237fbd[_0x54f85f(0x230)]='attacking',_0x237fbd['attackPathSegments']=generateAttackPathInternal(_0x237fbd),_0x237fbd[_0x54f85f(0x19c)]=0x0,_0x237fbd[_0x54f85f(0x214)]=0x0,_0x237fbd[_0x54f85f(0x15f)]=BASE_ENEMY_ATTACK_SPEED*ENEMY3_ATTACK_SPEED_FACTOR,_0x237fbd[_0x54f85f(0x17d)]=0x0,_0x237fbd[_0x54f85f(0x21d)]=!![],_0x237fbd[_0x54f85f(0x139)]=0x0,_0x237fbd[_0x54f85f(0x22d)]=null;break;}}}captureBeamProgress=Math[_0x54f85f(0x15a)](0x0,Math[_0x54f85f(0x188)](0x1,captureBeamProgress));if(captureBeamActive&&captureBeamProgress>=0.95){const _0x5cdd2d=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x2b2123=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR,_0x58c9c5=_0x237fbd['x']+_0x5bf901/0x2,_0x5bfaf9=_0x237fbd['y']+_0x223f29,_0xbf86d1=gameCanvas[_0x54f85f(0x215)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x5a9330=Math[_0x54f85f(0x15a)](_0x5cdd2d,_0x2b2123),_0x36d325=_0x58c9c5-_0x5a9330/0x2,_0x53bff3=_0x5bfaf9,_0x1b0905=_0xbf86d1-_0x5bfaf9;if(_0x1b0905>0x0){const _0x265178={'x':_0x36d325,'y':_0x53bff3,'width':_0x5a9330,'height':_0x1b0905};let _0x28b373=null,_0x3ca5ba=0x0;if(isTwoPlayerMode&&selectedGameMode==='coop'){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&checkCollision(ship1,_0x265178))_0x28b373=ship1,_0x3ca5ba=0x1;else ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&checkCollision(ship2,_0x265178)&&(_0x28b373=ship2,_0x3ca5ba=0x2);}else ship&&playerLives>0x0&&!isShipCaptured&&checkCollision(ship,_0x265178)&&(_0x28b373=ship,_0x3ca5ba=currentPlayer);if(_0x28b373){_0x237fbd['capturedShipDimensions']={'width':_0x28b373['width'],'height':_0x28b373[_0x54f85f(0x215)]},_0x237fbd[_0x54f85f(0x1c9)]=!![],stopSound(captureSound),_0x237fbd[_0x54f85f(0x230)]='showing_capture_message',_0x237fbd[_0x54f85f(0x171)]=null,_0x237fbd[_0x54f85f(0x1dd)]=null,_0x237fbd[_0x54f85f(0x209)]=_0x28b373['y'],_0x237fbd[_0x54f85f(0x210)]=0x0,isShowingCaptureMessage=!![],captureMessageStartTime=_0x174e8a,capturedBossIdWithMessage=_0x237fbd['id'],playSound(shipCapturedSound),csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,handlePlayerShipCollision(_0x3ca5ba,![],_0x174e8a,!![]);if(isCoopAIDemoActive&&aiPlayerActivelySeekingCaptureById)aiPlayerActivelySeekingCaptureById=null;break;}}}break;}case'showing_capture_message':{_0x237fbd[_0x54f85f(0x135)]=0x0,_0x237fbd[_0x54f85f(0x166)]=0x0;if(_0x237fbd[_0x54f85f(0x1c9)]&&_0x237fbd[_0x54f85f(0x18c)]&&typeof _0x237fbd['initialCaptureAnimationY']===_0x54f85f(0x18f)){const _0x33376e=_0x174e8a-captureMessageStartTime,_0x5a1e7f=Math[_0x54f85f(0x188)](0x1,_0x33376e/CAPTURE_MESSAGE_DURATION),_0x401c9e=_0x237fbd['y']+CAPTURED_SHIP_OFFSET_Y,_0x18e588=_0x237fbd[_0x54f85f(0x209)];_0x237fbd['capturedShipY']=_0x18e588+(_0x401c9e-_0x18e588)*_0x5a1e7f,_0x237fbd[_0x54f85f(0x1a3)]=_0x237fbd['x']+CAPTURED_SHIP_OFFSET_X;}else _0x237fbd['capturedShipX']=_0x237fbd['x']+CAPTURED_SHIP_OFFSET_X,_0x237fbd[_0x54f85f(0x190)]=_0x237fbd['y']+CAPTURED_SHIP_OFFSET_Y;break;}case _0x54f85f(0x21b):{if(isEntrancePhaseActive)break;const _0x37772e=_0x237fbd[_0x54f85f(0x198)],_0x4c29ec=3.8;if(!_0x37772e||_0x37772e[_0x54f85f(0x14d)]===0x0){console[_0x54f85f(0x1c8)]('Enemy\x20'+_0x1b3a66+'\x20attacking\x20without\x20path!\x20Returning.'),_0x237fbd[_0x54f85f(0x230)]='returning';try{const {x:_0x473553,y:_0x10b770}=getCurrentGridSlotPosition(_0x237fbd['gridRow'],_0x237fbd[_0x54f85f(0x13f)],_0x5bf901);_0x237fbd[_0x54f85f(0x171)]=_0x473553,_0x237fbd[_0x54f85f(0x1dd)]=_0x10b770;}catch(_0x2fe4ab){console[_0x54f85f(0x1c8)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x1b3a66+_0x54f85f(0x1a4),_0x2fe4ab),_0x237fbd[_0x54f85f(0x171)]=gameCanvas['width']/0x2,_0x237fbd[_0x54f85f(0x1dd)]=ENEMY_TOP_MARGIN;}break;}if(_0x237fbd['attackPathSegmentIndex']>=_0x37772e[_0x54f85f(0x14d)]){console[_0x54f85f(0x1b0)](_0x54f85f(0x144)+_0x1b3a66+_0x54f85f(0x23b)+_0x237fbd[_0x54f85f(0x19c)]+'\x20out\x20of\x20bounds\x20('+_0x37772e[_0x54f85f(0x14d)]+_0x54f85f(0x149)),_0x237fbd[_0x54f85f(0x230)]=_0x54f85f(0x1bd);try{const {x:_0x1ab088,y:_0x2d0902}=getCurrentGridSlotPosition(_0x237fbd[_0x54f85f(0x1d5)],_0x237fbd[_0x54f85f(0x13f)],_0x5bf901);_0x237fbd[_0x54f85f(0x171)]=_0x1ab088,_0x237fbd[_0x54f85f(0x1dd)]=_0x2d0902;}catch(_0x48a408){console[_0x54f85f(0x1c8)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x1b3a66+_0x54f85f(0x220),_0x48a408),_0x237fbd['targetGridX']=gameCanvas['width']/0x2,_0x237fbd['targetGridY']=ENEMY_TOP_MARGIN;}break;}const _0x2909b3=_0x37772e[_0x237fbd[_0x54f85f(0x19c)]];if(!_0x2909b3||!_0x2909b3['p0']||!_0x2909b3['p1']||!_0x2909b3['p2']||!_0x2909b3['p3']){console[_0x54f85f(0x1c8)](_0x54f85f(0x144)+_0x1b3a66+'\x20attacking,\x20invalid\x20segment\x20'+_0x237fbd[_0x54f85f(0x19c)]+'!\x20Returning.'),_0x237fbd[_0x54f85f(0x230)]=_0x54f85f(0x1bd);try{const {x:_0x30ca2e,y:_0x2a44de}=getCurrentGridSlotPosition(_0x237fbd[_0x54f85f(0x1d5)],_0x237fbd['gridCol'],_0x5bf901);_0x237fbd['targetGridX']=_0x30ca2e,_0x237fbd[_0x54f85f(0x1dd)]=_0x2a44de;}catch(_0x39bfcc){console[_0x54f85f(0x1c8)](_0x54f85f(0x1d1)+_0x1b3a66+'\x20(invalid\x20attack\x20segment):',_0x39bfcc),_0x237fbd['targetGridX']=gameCanvas['width']/0x2,_0x237fbd[_0x54f85f(0x1dd)]=ENEMY_TOP_MARGIN;}break;}const _0x4a0803=_0x237fbd[_0x54f85f(0x15f)]/0x3e8*_0x4c29ec;_0x237fbd[_0x54f85f(0x214)]+=_0x4a0803;let _0x1225e8,_0x26a7af;const _0x3c4c79=_0x237fbd['x'],_0x48e65d=_0x237fbd['y'];if(_0x237fbd[_0x54f85f(0x214)]>=0x1){try{_0x1225e8=calculateBezierPoint(0x1,_0x2909b3['p0']['x'],_0x2909b3['p1']['x'],_0x2909b3['p2']['x'],_0x2909b3['p3']['x']),_0x26a7af=calculateBezierPoint(0x1,_0x2909b3['p0']['y'],_0x2909b3['p1']['y'],_0x2909b3['p2']['y'],_0x2909b3['p3']['y']);}catch(_0x5994be){console['error']('Error\x20calculating\x20FINAL\x20bezier\x20point\x20for\x20attack\x20'+_0x237fbd['id']+':',_0x5994be),_0x1225e8=_0x237fbd['x'],_0x26a7af=_0x237fbd['y'],_0x237fbd[_0x54f85f(0x230)]=_0x54f85f(0x1bd);try{const {x:_0x3c4af2,y:_0x1890c5}=getCurrentGridSlotPosition(_0x237fbd[_0x54f85f(0x1d5)],_0x237fbd[_0x54f85f(0x13f)],_0x5bf901);_0x237fbd[_0x54f85f(0x171)]=_0x3c4af2,_0x237fbd[_0x54f85f(0x1dd)]=_0x1890c5;}catch(_0x524108){console['error'](_0x54f85f(0x219)+_0x237fbd['id']+':',_0x524108),_0x237fbd[_0x54f85f(0x171)]=gameCanvas['width']/0x2,_0x237fbd['targetGridY']=ENEMY_TOP_MARGIN;}break;}_0x237fbd[_0x54f85f(0x214)]=0x0,_0x237fbd[_0x54f85f(0x19c)]++;if(_0x237fbd['attackPathSegmentIndex']>=_0x37772e[_0x54f85f(0x14d)]){_0x237fbd[_0x54f85f(0x230)]=_0x54f85f(0x1bd),_0x237fbd[_0x54f85f(0x17d)]=0x0,_0x237fbd[_0x54f85f(0x139)]=0x0,_0x237fbd[_0x54f85f(0x22d)]=null;try{const {x:_0x3b4b34,y:_0x17fcc8}=getCurrentGridSlotPosition(_0x237fbd[_0x54f85f(0x1d5)],_0x237fbd['gridCol'],_0x5bf901);_0x237fbd[_0x54f85f(0x171)]=_0x3b4b34,_0x237fbd[_0x54f85f(0x1dd)]=_0x17fcc8;}catch(_0xfe2898){console['error'](_0x54f85f(0x1d1)+_0x1b3a66+'\x20after\x20attack:',_0xfe2898),_0x237fbd[_0x54f85f(0x171)]=gameCanvas[_0x54f85f(0x1d7)]/0x2,_0x237fbd[_0x54f85f(0x1dd)]=ENEMY_TOP_MARGIN;}}else{const _0x5a4010=_0x37772e[_0x237fbd[_0x54f85f(0x19c)]];if(!_0x5a4010?.['p0']){console[_0x54f85f(0x1c8)](_0x54f85f(0x144)+_0x1b3a66+_0x54f85f(0x23e)+_0x237fbd[_0x54f85f(0x19c)]+_0x54f85f(0x1e2)),_0x1225e8=_0x237fbd['x'],_0x26a7af=_0x237fbd['y'],_0x237fbd[_0x54f85f(0x230)]=_0x54f85f(0x1bd);try{const {x:_0x3a9258,y:_0x207895}=getCurrentGridSlotPosition(_0x237fbd[_0x54f85f(0x1d5)],_0x237fbd['gridCol'],_0x5bf901);_0x237fbd['targetGridX']=_0x3a9258,_0x237fbd[_0x54f85f(0x1dd)]=_0x207895;}catch(_0x4fbbed){console['error'](_0x54f85f(0x19a)+_0x237fbd['id']+':',_0x4fbbed),_0x237fbd[_0x54f85f(0x171)]=gameCanvas[_0x54f85f(0x1d7)]/0x2,_0x237fbd[_0x54f85f(0x1dd)]=ENEMY_TOP_MARGIN;}break;}}}else try{_0x1225e8=calculateBezierPoint(_0x237fbd[_0x54f85f(0x214)],_0x2909b3['p0']['x'],_0x2909b3['p1']['x'],_0x2909b3['p2']['x'],_0x2909b3['p3']['x']),_0x26a7af=calculateBezierPoint(_0x237fbd['attackPathT'],_0x2909b3['p0']['y'],_0x2909b3['p1']['y'],_0x2909b3['p2']['y'],_0x2909b3['p3']['y']);}catch(_0x2a3fe6){console[_0x54f85f(0x1c8)](_0x54f85f(0x1b5)+_0x237fbd['id']+':',_0x2a3fe6),_0x1225e8=_0x237fbd['x'],_0x26a7af=_0x237fbd['y'],_0x237fbd['state']='returning';try{const {x:_0x33c328,y:_0x1dff8a}=getCurrentGridSlotPosition(_0x237fbd['gridRow'],_0x237fbd['gridCol'],_0x5bf901);_0x237fbd[_0x54f85f(0x171)]=_0x33c328,_0x237fbd['targetGridY']=_0x1dff8a;}catch(_0x4a1ef2){console[_0x54f85f(0x1c8)]('Error\x20getting\x20grid\x20pos\x20after\x20bezier\x20error\x20for\x20'+_0x237fbd['id']+':',_0x4a1ef2),_0x237fbd[_0x54f85f(0x171)]=gameCanvas[_0x54f85f(0x1d7)]/0x2,_0x237fbd['targetGridY']=ENEMY_TOP_MARGIN;}break;}if(_0x237fbd&&_0x237fbd[_0x54f85f(0x230)]===_0x54f85f(0x21b)){const _0x51873d=_0x237fbd['attackFormationOffsetX']||0x0,_0x1b6815=_0x1225e8+_0x51873d,_0x2588dd=_0x26a7af;_0x237fbd[_0x54f85f(0x135)]=_0x1b6815-_0x3c4c79,_0x237fbd['velocityY']=_0x2588dd-_0x48e65d,_0x237fbd['x']=_0x1b6815,_0x237fbd['y']=_0x2588dd;if(_0x237fbd['y']>gameCanvas[_0x54f85f(0x215)]+_0x223f29*1.5){_0x237fbd[_0x54f85f(0x230)]=_0x54f85f(0x1bd),_0x237fbd[_0x54f85f(0x19c)]=0x0,_0x237fbd[_0x54f85f(0x214)]=0x0,_0x237fbd[_0x54f85f(0x17d)]=0x0,_0x237fbd[_0x54f85f(0x139)]=0x0,_0x237fbd['attackGroupId']=null,_0x237fbd['y']=-_0x223f29*(1.1+Math[_0x54f85f(0x1cc)]()*0.4),_0x237fbd['x']=Math[_0x54f85f(0x1cc)]()*(gameCanvas[_0x54f85f(0x1d7)]-_0x5bf901),_0x237fbd[_0x54f85f(0x135)]=0x0,_0x237fbd['velocityY']=0x0;try{const {x:_0x3e9bf7,y:_0x548756}=getCurrentGridSlotPosition(_0x237fbd[_0x54f85f(0x1d5)],_0x237fbd[_0x54f85f(0x13f)],_0x5bf901);_0x237fbd[_0x54f85f(0x171)]=_0x3e9bf7,_0x237fbd['targetGridY']=_0x548756;}catch(_0x10feb2){console['error'](_0x54f85f(0x1d1)+_0x1b3a66+_0x54f85f(0x248),_0x10feb2),_0x237fbd[_0x54f85f(0x171)]=gameCanvas['width']/0x2,_0x237fbd[_0x54f85f(0x1dd)]=ENEMY_TOP_MARGIN;}}}break;}case _0x54f85f(0x1bd):{if(isEntrancePhaseActive)break;if(_0x237fbd[_0x54f85f(0x171)]==null||_0x237fbd[_0x54f85f(0x1dd)]==null){console[_0x54f85f(0x1b0)](_0x54f85f(0x144)+_0x1b3a66+'\x20returning\x20without\x20target\x20coords.\x20Recalculating.');try{const {x:_0x5a6e91,y:_0x5cb92a}=getCurrentGridSlotPosition(_0x237fbd[_0x54f85f(0x1d5)],_0x237fbd[_0x54f85f(0x13f)],_0x5bf901);_0x237fbd[_0x54f85f(0x171)]=_0x5a6e91,_0x237fbd[_0x54f85f(0x1dd)]=_0x5cb92a;}catch(_0x41e2fd){console[_0x54f85f(0x1c8)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x1b3a66+'\x20in\x20returning',_0x41e2fd),_0x237fbd['state']='in_grid',_0x237fbd['x']=gameCanvas[_0x54f85f(0x1d7)]/0x2,_0x237fbd['y']=ENEMY_TOP_MARGIN;break;}}const _0x3de7eb=_0x237fbd[_0x54f85f(0x171)],_0x447e42=_0x237fbd[_0x54f85f(0x1dd)],_0x281ee5=_0x3de7eb-_0x237fbd['x'],_0x24cd71=_0x447e42-_0x237fbd['y'],_0x3477c5=Math[_0x54f85f(0x15e)](_0x281ee5*_0x281ee5+_0x24cd71*_0x24cd71),_0x3012a2=scaleValue(level,BASE_RETURN_SPEED_FACTOR,MAX_RETURN_SPEED_FACTOR),_0x5efff4=BASE_RETURN_SPEED*_0x3012a2,_0xe1ac46=_0x5efff4*0.5;_0x3477c5>_0xe1ac46?(_0x237fbd[_0x54f85f(0x135)]=_0x281ee5/_0x3477c5*_0x5efff4,_0x237fbd['velocityY']=_0x24cd71/_0x3477c5*_0x5efff4,_0x237fbd['x']+=_0x237fbd[_0x54f85f(0x135)],_0x237fbd['y']+=_0x237fbd[_0x54f85f(0x166)]):(_0x237fbd['x']=_0x3de7eb,_0x237fbd['y']=_0x447e42,_0x237fbd[_0x54f85f(0x135)]=0x0,_0x237fbd[_0x54f85f(0x166)]=0x0,_0x237fbd['state']='in_grid',_0x237fbd[_0x54f85f(0x22b)]=!![],_0x237fbd[_0x54f85f(0x139)]=0x0,_0x237fbd[_0x54f85f(0x22d)]=null,_0x237fbd['hasOwnProperty'](_0x54f85f(0x1af))&&delete _0x237fbd[_0x54f85f(0x1af)],!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound)));break;}}if(_0x237fbd&&!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode==='coop'&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){const _0xab097d=[_0x54f85f(0x21b),_0x54f85f(0x1c1),'following_bezier_path',_0x54f85f(0x146)];if(_0xab097d['includes'](_0x237fbd[_0x54f85f(0x230)])){let _0x529171=[];if(isTwoPlayerMode&&selectedGameMode===_0x54f85f(0x13c)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x529171[_0x54f85f(0x1e1)]({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x529171[_0x54f85f(0x1e1)]({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(!isManualControl?!isInvincible:!![])&&_0x529171[_0x54f85f(0x1e1)]({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(const _0xbf71fd of _0x529171){const _0x4f707f=_0xbf71fd['shipObj'],_0x41e272={'x':_0x237fbd['x'],'y':_0x237fbd['y'],'width':_0x5bf901,'height':_0x223f29},_0x241a02={'x':_0x4f707f['x'],'y':_0x4f707f['y'],'width':_0x4f707f[_0x54f85f(0x1d7)],'height':_0x4f707f['height']},_0x29c991=_0xbf71fd['dual']?{'x':_0x4f707f['x']+DUAL_SHIP_OFFSET_X,'y':_0x4f707f['y'],'width':_0x4f707f['width'],'height':_0x4f707f[_0x54f85f(0x215)]}:null;let _0x447c01=![],_0xd9ced4=![];if(checkCollision(_0x41e272,_0x241a02))_0x447c01=!![];else _0xbf71fd[_0x54f85f(0x1c0)]&&_0x29c991&&checkCollision(_0x41e272,_0x29c991)&&(_0x447c01=!![],_0xd9ced4=!![]);if(_0x447c01){createExplosion(_0x237fbd['x']+_0x5bf901/0x2,_0x237fbd['y']+_0x223f29/0x2),playSound(lostLifeSound),enemies['splice'](_0x3e0282,0x1),_0x237fbd=null,handlePlayerShipCollision(_0xbf71fd[_0x54f85f(0x1ff)],_0xd9ced4,_0x174e8a,![]);if(_0x237fbd===null)break;}}}}if(!_0x237fbd)continue;}if(!isShowingPlayerGameOverMessage&&!(isTwoPlayerMode&&selectedGameMode===_0x54f85f(0x13c)&&(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage))&&gameOverSequenceStartTime===0x0){let _0x1f575f=[];if(isTwoPlayerMode&&selectedGameMode===_0x54f85f(0x13c)){if(ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1Invincible&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture)_0x1f575f[_0x54f85f(0x1e1)]({'shipObj':ship1,'playerNum':0x1,'dual':player1IsDualShipActive});if(ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2Invincible&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)_0x1f575f['push']({'shipObj':ship2,'playerNum':0x2,'dual':player2IsDualShipActive});}else ship&&playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(!isManualControl?!isInvincible:!![])&&_0x1f575f[_0x54f85f(0x1e1)]({'shipObj':ship,'playerNum':currentPlayer,'dual':isDualShipActive});for(let _0x336fcb=enemyBullets[_0x54f85f(0x14d)]-0x1;_0x336fcb>=0x0;_0x336fcb--){const _0x7f4b7a=enemyBullets[_0x336fcb];if(!_0x7f4b7a){enemyBullets[_0x54f85f(0x15d)](_0x336fcb,0x1);continue;}const _0x115312={'x':_0x7f4b7a['x'],'y':_0x7f4b7a['y'],'width':_0x7f4b7a[_0x54f85f(0x1d7)],'height':_0x7f4b7a[_0x54f85f(0x215)]};let _0xbc526d=![];for(const _0x35c76c of _0x1f575f){const _0x460e21=_0x35c76c[_0x54f85f(0x1fa)],_0x3363ae={'x':_0x460e21['x'],'y':_0x460e21['y'],'width':_0x460e21[_0x54f85f(0x1d7)],'height':_0x460e21[_0x54f85f(0x215)]},_0x16a7d0=_0x35c76c[_0x54f85f(0x1c0)]?{'x':_0x460e21['x']+DUAL_SHIP_OFFSET_X,'y':_0x460e21['y'],'width':_0x460e21[_0x54f85f(0x1d7)],'height':_0x460e21[_0x54f85f(0x215)]}:null;let _0x16a23b=![],_0x1054e0=![];if(checkCollision(_0x115312,_0x3363ae))_0x16a23b=!![];else _0x35c76c[_0x54f85f(0x1c0)]&&_0x16a7d0&&checkCollision(_0x115312,_0x16a7d0)&&(_0x16a23b=!![],_0x1054e0=!![]);if(_0x16a23b){playSound(lostLifeSound),handlePlayerShipCollision(_0x35c76c[_0x54f85f(0x1ff)],_0x1054e0,_0x174e8a,![]),enemyBullets[_0x54f85f(0x15d)](_0x336fcb,0x1),_0xbc526d=!![];break;}}if(_0xbc526d)continue;}}updateHitSparks();}catch(_0x496688){console['error'](_0x54f85f(0x14a),_0x496688,_0x496688[_0x54f85f(0x164)]),isGridSoundPlaying=![],stopSound(gridBackgroundSound),isEntrancePhaseActive=![],stopSound(entranceSound),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(captureSound),stopSound(shipCapturedSound),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0x54f85f(0x211))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x54f85f(0x1d0));}}function handlePlayerShipCollision(_0x3cc011,_0xc97424,_0x47b1e5,_0x3fa509=![]){const _0x9d665c=_0x33d7d9,_0x3cdb5d=_0x47b1e5,_0x2bb9e9=gameCanvas?gameCanvas[_0x9d665c(0x215)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;let _0x34ec9b=0x0,_0x12ff29=null;if(isTwoPlayerMode&&selectedGameMode==='coop'){_0x12ff29=_0x3cc011===0x1?ship1:ship2;if(_0x12ff29){_0x34ec9b=_0x12ff29['x'];if(_0x3fa509){if(_0x3cc011===0x1)player1CaptureRespawnX=_0x12ff29['x'];else{if(_0x3cc011===0x2)player2CaptureRespawnX=_0x12ff29['x'];}}}else{if(_0x3cc011===0x1&&typeof player1CaptureRespawnX===_0x9d665c(0x18f)&&player1CaptureRespawnX!==0x0)_0x34ec9b=player1CaptureRespawnX;else{if(_0x3cc011===0x2&&typeof player2CaptureRespawnX===_0x9d665c(0x18f)&&player2CaptureRespawnX!==0x0)_0x34ec9b=player2CaptureRespawnX;else{if(isCoopAIDemoActive&&gameCanvas)_0x34ec9b=_0x3cc011===0x1?gameCanvas[_0x9d665c(0x1d7)]/0x2-gameCanvas[_0x9d665c(0x1d7)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2:gameCanvas[_0x9d665c(0x1d7)]/0x2+gameCanvas[_0x9d665c(0x1d7)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;else gameCanvas?_0x34ec9b=gameCanvas['width']/0x2-SHIP_WIDTH/0x2:_0x34ec9b=0xc8;}}}}else{_0x12ff29=ship;if(_0x12ff29)_0x34ec9b=_0x12ff29['x'],_0x3fa509&&(capturedShipRespawnX_NormalMode=ship['x']);else _0x3fa509&&capturedShipRespawnX_NormalMode!==0x0?_0x34ec9b=capturedShipRespawnX_NormalMode:_0x34ec9b=gameCanvas?gameCanvas[_0x9d665c(0x1d7)]/0x2-SHIP_WIDTH/0x2:0xc8;}if(isTwoPlayerMode&&selectedGameMode===_0x9d665c(0x13c)){if(_0x3cc011===0x1){if(_0x3fa509){isPlayer1ShipCaptured=!![],player1IsDualShipActive=![],player1Lives--;if(isCoopAIDemoActive)coopPartner1CapturedTime=_0x3cdb5d;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0x3cdb5d,playSound(gameOverSound),ship1=null,player1NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;if(capturedBossIdWithMessage&&enemies['find'](_0x34d503=>_0x34d503['id']===capturedBossIdWithMessage)){const _0x54673e=enemies[_0x9d665c(0x1f7)](_0x54704f=>_0x54704f['id']===capturedBossIdWithMessage);_0x54673e&&(_0x54673e['hasCapturedShip']=![],_0x54673e[_0x9d665c(0x18c)]=null);}}else player1NeedsRespawnAfterCapture=!![],ship1=null;}else{if(player1IsDualShipActive&&ship1){player1IsDualShipActive=![];const _0x12bce1=_0xc97424?ship1['x']+DUAL_SHIP_OFFSET_X+ship1[_0x9d665c(0x1d7)]/0x2:ship1['x']+ship1[_0x9d665c(0x1d7)]/0x2;createExplosion(_0x12bce1,ship1['y']+ship1[_0x9d665c(0x215)]/0x2),ship1['x']=_0x34ec9b,ship1['y']=_0x2bb9e9,ship1[_0x9d665c(0x1a8)]=ship1['x'],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x3cdb5d+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0x3cdb5d+RESPAWN_DELAY_MS;}else{if(ship1)createExplosion(ship1['x']+ship1[_0x9d665c(0x1d7)]/0x2,ship1['y']+ship1[_0x9d665c(0x215)]/0x2);player1Lives--;if(player1Lives<=0x0){player1Lives=0x0,isPlayer1ShowingGameOverMessage=!![],player1GameOverMessageStartTime=_0x3cdb5d,playSound(gameOverSound),ship1=null;if(aiPlayerActivelySeekingCaptureById==='p1')aiPlayerActivelySeekingCaptureById=null;}else isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x3cdb5d+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=!![],player1RespawnTime=_0x3cdb5d+RESPAWN_DELAY_MS,ship1?(ship1['x']=_0x34ec9b,ship1['y']=_0x2bb9e9,ship1['targetX']=ship1['x']):ship1={'x':_0x34ec9b,'y':_0x2bb9e9,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x34ec9b,'id':'p1'};}}}else{if(_0x3cc011===0x2){if(_0x3fa509){isPlayer2ShipCaptured=!![],player2IsDualShipActive=![],player2Lives--;if(isCoopAIDemoActive)coopPartner2CapturedTime=_0x3cdb5d;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0x3cdb5d,playSound(gameOverSound),ship2=null,player2NeedsRespawnAfterCapture=![];if(aiPlayerActivelySeekingCaptureById==='p2')aiPlayerActivelySeekingCaptureById=null;if(capturedBossIdWithMessage&&enemies[_0x9d665c(0x1f7)](_0x97083d=>_0x97083d['id']===capturedBossIdWithMessage)){const _0x2b0046=enemies['find'](_0x3a502e=>_0x3a502e['id']===capturedBossIdWithMessage);_0x2b0046&&(_0x2b0046['hasCapturedShip']=![],_0x2b0046[_0x9d665c(0x18c)]=null);}}else player2NeedsRespawnAfterCapture=!![],ship2=null;}else{if(player2IsDualShipActive&&ship2){player2IsDualShipActive=![];const _0x38ad06=_0xc97424?ship2['x']+DUAL_SHIP_OFFSET_X+ship2[_0x9d665c(0x1d7)]/0x2:ship2['x']+ship2['width']/0x2;createExplosion(_0x38ad06,ship2['y']+ship2[_0x9d665c(0x215)]/0x2),ship2['x']=_0x34ec9b,ship2['y']=_0x2bb9e9,ship2['targetX']=ship2['x'],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x3cdb5d+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0x3cdb5d+RESPAWN_DELAY_MS;}else{if(ship2)createExplosion(ship2['x']+ship2[_0x9d665c(0x1d7)]/0x2,ship2['y']+ship2[_0x9d665c(0x215)]/0x2);player2Lives--;if(player2Lives<=0x0){player2Lives=0x0,isPlayer2ShowingGameOverMessage=!![],player2GameOverMessageStartTime=_0x3cdb5d,playSound(gameOverSound),ship2=null;if(aiPlayerActivelySeekingCaptureById==='p2')aiPlayerActivelySeekingCaptureById=null;}else isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x3cdb5d+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=!![],player2RespawnTime=_0x3cdb5d+RESPAWN_DELAY_MS,ship2?(ship2['x']=_0x34ec9b,ship2['y']=_0x2bb9e9,ship2['targetX']=_0x34ec9b):ship2={'x':_0x34ec9b,'y':_0x2bb9e9,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x34ec9b,'id':'p2'};}}}}player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isDualShipActive&&!_0x3fa509&&_0x12ff29){isDualShipActive=![];if(_0x3cc011===0x1&&isTwoPlayerMode)player1IsDualShipActive=![];else{if(_0x3cc011===0x2&&isTwoPlayerMode)player2IsDualShipActive=![];else{if(!isTwoPlayerMode)player1IsDualShipActive=![];}}const _0x4c4851=_0xc97424?_0x34ec9b+DUAL_SHIP_OFFSET_X+SHIP_WIDTH/0x2:_0x34ec9b+SHIP_WIDTH/0x2;createExplosion(_0x4c4851,_0x2bb9e9+SHIP_HEIGHT/0x2);ship&&(ship['x']=_0x34ec9b,ship['y']=_0x2bb9e9,ship['targetX']=ship['x']);isInvincible=!![],invincibilityEndTime=_0x3cdb5d+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x3cdb5d+RESPAWN_DELAY_MS;if(!isManualControl)aiNeedsStabilization=!![];}else{if(!_0x3fa509&&_0x12ff29)createExplosion(_0x34ec9b+SHIP_WIDTH/0x2,_0x2bb9e9+SHIP_HEIGHT/0x2);if(_0x3fa509){isShipCaptured=!![];if(ship)ship=null;}playerLives--;if(playerLives<=0x0){playerLives=0x0;if(isTwoPlayerMode){if(_0x3cc011===0x1)player1Lives=0x0;else{if(_0x3cc011===0x2)player2Lives=0x0;}isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x3cdb5d,playerWhoIsGameOver=_0x3cc011,playSound(gameOverSound);const _0x318d5c=_0x3cc011===0x1?0x2:0x1,_0x55f424=_0x318d5c===0x1?player1Lives:player2Lives;_0x55f424>0x0?nextActionAfterPlayerGameOver=_0x9d665c(0x1bb):nextActionAfterPlayerGameOver=_0x9d665c(0x197);bullets=[],enemyBullets=[],explosions=[];if(!(_0x55f424>0x0))ship=null;}else player1Lives=0x0,ship=null,playSound(gameOverSound),triggerFinalGameOverSequence();}else{if(isTwoPlayerMode){if(_0x3cc011===0x1)player1Lives=playerLives;else player2Lives=playerLives;}if(!_0x3fa509){isInvincible=!![],invincibilityEndTime=_0x3cdb5d+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x3cdb5d+RESPAWN_DELAY_MS;if(ship&&gameCanvas){ship['x']=_0x34ec9b,ship['y']=_0x2bb9e9,ship[_0x9d665c(0x1a8)]=ship['x'];if(!isManualControl)aiNeedsStabilization=!![];}}else{}if(_0x3fa509)isDualShipActive=![];}}}if(!_0x3fa509)fallingShips=[];}function switchPlayerTurn(){const _0x377dc2=_0x33d7d9;if(!isTwoPlayerMode||selectedGameMode===_0x377dc2(0x13c))return![];stopSound(hiScoreSound);if(currentPlayer===0x1){player1Score=score,player1IsDualShipActive=isDualShipActive;if(player1Score>highScore)highScore=player1Score;}else{player2Score=score,player2IsDualShipActive=isDualShipActive;if(player2Score>highScore)highScore=player2Score;}const _0x39d68c=currentPlayer===0x1?0x2:0x1,_0x19b7d6=_0x39d68c===0x1?player1Lives:player2Lives;if(_0x19b7d6<=0x0){const _0x3d9927=currentPlayer===0x1?player1Lives:player2Lives;return _0x3d9927<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x39d68c,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function triggerGridFiring(){const _0x2e0b6e=_0x33d7d9;if(isPaused||!isInGameState||isChallengingStage||isWaveTransitioning)return;let _0x3a8301=![];isTwoPlayerMode&&selectedGameMode===_0x2e0b6e(0x13c)?(player1Lives>0x0&&ship1&&!isPlayer1ShipCaptured&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&ship2&&!isPlayer2ShipCaptured&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture)&&(_0x3a8301=!![]):playerLives>0x0&&ship&&!isShipCaptured&&!isShowingPlayerGameOverMessage&&(_0x3a8301=!![]);if(!_0x3a8301)return;const _0x1612bd=enemies['filter'](_0x52d48c=>_0x52d48c&&_0x52d48c['state']==='in_grid');if(_0x1612bd[_0x2e0b6e(0x14d)]===0x0)return;const _0x5570eb=Date[_0x2e0b6e(0x237)](),_0x15ba88=scaleValue(level,BASE_GRID_FIRE_INTERVAL,MIN_GRID_FIRE_INTERVAL);if(_0x5570eb-lastGridFireCheckTime<_0x15ba88)return;lastGridFireCheckTime=_0x5570eb;const _0x367bd9=scaleValue(level,BASE_GRID_FIRE_PROBABILITY,MAX_GRID_FIRE_PROBABILITY),_0x5ddfb2=Math[_0x2e0b6e(0x1ed)](scaleValue(level,BASE_GRID_MAX_FIRING_ENEMIES,MAX_GRID_MAX_FIRING_ENEMIES));let _0x1c82ae=0x0;_0x1612bd[_0x2e0b6e(0x13d)](()=>Math[_0x2e0b6e(0x1cc)]()-0.5);for(const _0x5d6b2b of _0x1612bd){if(_0x1c82ae>=_0x5ddfb2)break;if(_0x5d6b2b['type']===ENEMY2_TYPE||_0x5d6b2b[_0x2e0b6e(0x242)]===ENEMY3_TYPE){if(_0x5d6b2b['type']===ENEMY3_TYPE&&_0x5d6b2b[_0x2e0b6e(0x1c9)])continue;Math[_0x2e0b6e(0x1cc)]()<_0x367bd9&&(createBulletSimple(_0x5d6b2b)&&(playSound(enemyShootSound),_0x5d6b2b[_0x2e0b6e(0x17d)]=_0x5570eb,_0x1c82ae++));}}}function runSingleGameUpdate(_0x4ad01d){const _0x475879=_0x33d7d9;try{const _0x30104d=Date[_0x475879(0x237)]();let _0x317075=![];isTwoPlayerMode&&selectedGameMode==='coop'?_0x317075=player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage&&!player1NeedsRespawnAfterCapture||player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage&&!player2NeedsRespawnAfterCapture:_0x317075=playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage;let _0x42553e=![];if(isManualControl&&connectedGamepadIndex!==null){if(isTwoPlayerMode&&selectedGameMode==='coop'){if(player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage)_0x42553e=!![];}else{if(playerLives>0x0&&!isShipCaptured&&!isShowingPlayerGameOverMessage)_0x42553e=!![];}}if(_0x42553e&&gameOverSequenceStartTime===0x0&&!isPaused){const _0x1a0943=navigator[_0x475879(0x241)]();if(_0x1a0943?.[connectedGamepadIndex]){const _0x143024=_0x1a0943[connectedGamepadIndex],_0x29ead4=processSingleController(_0x143024,previousGameButtonStates);previousGameButtonStates=_0x29ead4[_0x475879(0x1c2)]['slice']();if(_0x29ead4[_0x475879(0x243)]){stopGameAndShowMenu();return;}}else{if(previousGameButtonStates[_0x475879(0x14d)]>0x0)previousGameButtonStates=[];}}else connectedGamepadIndex===null&&previousGameButtonStates[_0x475879(0x14d)]>0x0&&(previousGameButtonStates=[]);let _0x2e9452=![];if(isManualControl&&isTwoPlayerMode&&selectedGameMode==='coop'&&connectedGamepadIndexP2!==null){if(player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage)_0x2e9452=!![];}if(_0x2e9452&&gameOverSequenceStartTime===0x0&&!isPaused){const _0x1f6d7c=navigator[_0x475879(0x241)]();if(_0x1f6d7c?.[connectedGamepadIndexP2]){const _0x701234=_0x1f6d7c[connectedGamepadIndexP2],_0x97835d=processSingleController(_0x701234,previousGameButtonStatesP2);previousGameButtonStatesP2=_0x97835d['newButtonStates']['slice']();if(_0x97835d[_0x475879(0x243)]){stopGameAndShowMenu();return;}}else{if(previousGameButtonStatesP2['length']>0x0)previousGameButtonStatesP2=[];}}else connectedGamepadIndexP2===null&&previousGameButtonStatesP2[_0x475879(0x14d)]>0x0&&(previousGameButtonStatesP2=[]);if(isPaused){renderGame();return;}const _0x3503f1=showCsBonusScoreMessage||showPerfectMessage;if(_0x3503f1&&gameCanvas?.[_0x475879(0x1d7)]>0x0){if(isTwoPlayerMode&&selectedGameMode==='coop'){const _0xebb811=ship1&&player1Lives>0x0,_0x387451=ship2&&player2Lives>0x0;if(_0xebb811&&_0x387451){if(isCoopAIDemoActive){const _0x189f32=gameCanvas[_0x475879(0x1d7)]/0x2-gameCanvas[_0x475879(0x1d7)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship1&&(ship1['x']=_0x189f32,ship1[_0x475879(0x1a8)]=_0x189f32,smoothedShip1X=_0x189f32);const _0x3dd8e0=gameCanvas[_0x475879(0x1d7)]/0x2+gameCanvas[_0x475879(0x1d7)]*COOP_SHIP_HORIZONTAL_OFFSET_FACTOR-SHIP_WIDTH/0x2;ship2&&(ship2['x']=_0x3dd8e0,ship2[_0x475879(0x1a8)]=_0x3dd8e0,smoothedShip2X=_0x3dd8e0);}}else{if(_0xebb811&&ship1){const _0x15ab1b=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0xaa50d8=Math[_0x475879(0x1ed)](gameCanvas[_0x475879(0x1d7)]/0x2-_0x15ab1b/0x2);ship1['x']=_0xaa50d8,ship1[_0x475879(0x1a8)]=_0xaa50d8;if(isCoopAIDemoActive)smoothedShip1X=_0xaa50d8;ship2&&isCoopAIDemoActive&&(ship2[_0x475879(0x1a8)]=ship2['x'],smoothedShip2X=ship2['x']);}else{if(_0x387451&&ship2){const _0x37c2e1=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x4873d7=Math[_0x475879(0x1ed)](gameCanvas['width']/0x2-_0x37c2e1/0x2);ship2['x']=_0x4873d7,ship2[_0x475879(0x1a8)]=_0x4873d7;if(isCoopAIDemoActive)smoothedShip2X=_0x4873d7;ship1&&isCoopAIDemoActive&&(ship1[_0x475879(0x1a8)]=ship1['x'],smoothedShip1X=ship1['x']);}}}}else{if(!isManualControl&&!isCoopAIDemoActive&&ship){const _0x52a3ba=isDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH;ship['x']=Math[_0x475879(0x1ed)](gameCanvas[_0x475879(0x1d7)]/0x2-_0x52a3ba/0x2),ship['targetX']=ship['x'];}}}let _0x462a5d=![];if(isTwoPlayerMode&&selectedGameMode==='coop'&&level===0x1&&coopPlayersReadyStartTime>0x0){_0x462a5d=!![];if(isShowingCoopPlayersReady){if(_0x30104d-coopPlayersReadyStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x475879(0x211))updateExplosions();}if(_0x30104d>=coopPlayersReadyStartTime+0xbb8){isShowingCoopPlayersReady=![],explosions=[];if(typeof updateExplosions===_0x475879(0x211))updateExplosions();isCoopAIDemoActive&&(isShowingIntro=!![],introStep=0x2,introDisplayStartTime=_0x30104d);}}if(!isCoopAIDemoActive&&!isShowingCoopPlayersReady&&!isShowingIntro&&_0x30104d>=coopPlayersReadyStartTime+0xfa0){isShowingIntro=!![],introStep=0x2,introDisplayStartTime=_0x30104d,explosions=[];if(typeof updateExplosions===_0x475879(0x211))updateExplosions();}if(isShowingIntro&&introStep===0x2){if(_0x30104d-introDisplayStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x475879(0x211))updateExplosions();}const _0x2a41a6=coopPlayersReadyStartTime+0x1f40;if(_0x30104d>=_0x2a41a6){isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![],explosions=[];if(typeof updateExplosions===_0x475879(0x211))updateExplosions();}}if(isManualControl||isCoopAIDemoActive)handlePlayerInput();if(typeof moveEntities===_0x475879(0x211))moveEntities();renderGame();if(isShowingCoopPlayersReady||isShowingIntro&&introStep===0x2||_0x30104d<coopPlayersReadyStartTime+0x1f40)return;else _0x462a5d=![],coopPlayersReadyStartTime=0x0;}if(isTwoPlayerMode&&selectedGameMode==='coop'&&level===0x1&&!_0x462a5d&&!gameJustStartedAndWaveLaunched&&coopPlayersReadyStartTime===0x0){if(isFullGridWave)startFullGridWave();else{if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition['length']>0x0)scheduleEntranceFlightWave();else isWaveTransitioning=!![],readyForNextWaveReset=!![];}}gameJustStartedAndWaveLaunched=!![];}if(isShowingPlayerGameOverMessage&&isTwoPlayerMode&&selectedGameMode===_0x475879(0x1fe)){if(_0x30104d-playerGameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x475879(0x211))updateExplosions();}if(_0x30104d-playerGameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION){isShowingPlayerGameOverMessage=![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();const _0x158ac7=playerWhoIsGameOver;playerWhoIsGameOver=0x0;if(nextActionAfterPlayerGameOver===_0x475879(0x1bb)){if(switchPlayerTurn()){let _0xe4b7b2=level;_0x158ac7===0x2&&currentPlayer===0x1&&player1CompletedLevel===level&&(level++,player1CompletedLevel=-0x1,_0xe4b7b2=level);if(currentPlayer===0x1&&player1Lives>0x0)player1MaxLevelReached=Math[_0x475879(0x15a)](player1MaxLevelReached,level);else{if(currentPlayer===0x2&&player2Lives>0x0)player2MaxLevelReached=Math[_0x475879(0x15a)](player2MaxLevelReached,level);}resetWaveInternal(),gameJustStartedAndWaveLaunched=![];}else triggerFinalGameOverSequence();}else{if(nextActionAfterPlayerGameOver===_0x475879(0x197))triggerFinalGameOverSequence();else triggerFinalGameOverSequence();}renderGame();return;}else{renderGame();return;}}if(isTwoPlayerMode&&selectedGameMode===_0x475879(0x13c)){let _0x3f5cd8=![],_0x2c9dad=![];if(isPlayer1ShowingGameOverMessage){if(_0x30104d-player1GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x475879(0x211))updateExplosions();}if(_0x30104d-player1GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer1ShowingGameOverMessage=![],_0x3f5cd8=!![],explosions=[];if(typeof updateExplosions===_0x475879(0x211))updateExplosions();}}if(isPlayer2ShowingGameOverMessage){if(_0x30104d-player2GameOverMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x475879(0x211))updateExplosions();}if(_0x30104d-player2GameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION_COOP){isPlayer2ShowingGameOverMessage=![],_0x2c9dad=!![],explosions=[];if(typeof updateExplosions===_0x475879(0x211))updateExplosions();}}if(_0x3f5cd8||_0x2c9dad){player1Lives<=0x0&&player2Lives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();if(isManualControl||isCoopAIDemoActive)handlePlayerInput();if(typeof moveEntities===_0x475879(0x211))moveEntities();renderGame();if(gameOverSequenceStartTime>0x0||player1Lives>0x0||player2Lives>0x0)return;}else{if(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage){if(isManualControl||isCoopAIDemoActive)handlePlayerInput();if(typeof moveEntities===_0x475879(0x211))moveEntities();renderGame();return;}}}if(isShowingCaptureMessage){if(_0x30104d-captureMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x475879(0x211))updateExplosions();}const _0x5b164a=enemies[_0x475879(0x1f7)](_0x58de52=>_0x58de52['id']===capturedBossIdWithMessage);if(_0x5b164a&&_0x5b164a[_0x475879(0x230)]===_0x475879(0x213)){const _0x18b4b5=_0x30104d-captureMessageStartTime,_0x34aff0=Math[_0x475879(0x188)](0x1,_0x18b4b5/CAPTURE_MESSAGE_DURATION);_0x5b164a['captureAnimationRotation']=_0x34aff0*0x2*(0x2*Math['PI']);}else _0x5b164a&&(_0x5b164a[_0x475879(0x210)]=0x0);if(isInGameState&&!isShowingPlayerGameOverMessage&&!isPlayer1ShowingGameOverMessage&&!isPlayer2ShowingGameOverMessage&&gameOverSequenceStartTime===0x0){if(isManualControl||isCoopAIDemoActive)handlePlayerInput();isCoopAIDemoActive&&aiControlCoop();if(typeof moveEntities===_0x475879(0x211))moveEntities();updateExplosions(),updateFloatingScores();}if(_0x30104d-captureMessageStartTime>=CAPTURE_MESSAGE_DURATION){isShowingCaptureMessage=![],explosions=[];if(typeof updateExplosions===_0x475879(0x211))updateExplosions();stopSound(shipCapturedSound),captureBeamActive=![];if(_0x5b164a&&_0x5b164a[_0x475879(0x230)]==='showing_capture_message'){_0x5b164a[_0x475879(0x230)]=_0x475879(0x1bd),_0x5b164a['captureAnimationRotation']=0x0;try{const _0x139d68=_0x5b164a[_0x475879(0x242)]===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH,{x:_0x1c6671,y:_0x213cc9}=getCurrentGridSlotPosition(_0x5b164a[_0x475879(0x1d5)],_0x5b164a['gridCol'],_0x139d68);_0x5b164a[_0x475879(0x171)]=_0x1c6671,_0x5b164a[_0x475879(0x1dd)]=_0x213cc9;}catch(_0xd12341){console[_0x475879(0x1c8)](_0x475879(0x1f3)+_0x5b164a['id']+':',_0xd12341),_0x5b164a[_0x475879(0x171)]=gameCanvas[_0x475879(0x1d7)]/0x2,_0x5b164a[_0x475879(0x1dd)]=ENEMY_TOP_MARGIN;}}else _0x5b164a&&(_0x5b164a[_0x475879(0x210)]=0x0);capturedBossIdWithMessage=null;const _0x54b3e4=gameCanvas?gameCanvas[_0x475879(0x215)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN:0x1f4;if(isTwoPlayerMode&&selectedGameMode==='coop'){if(player1NeedsRespawnAfterCapture&&player1Lives>0x0){ship1={'x':player1CaptureRespawnX,'y':_0x54b3e4,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player1CaptureRespawnX,'id':'p1'},isPlayer1ShipCaptured=![],isPlayer1Invincible=!![],player1InvincibilityEndTime=_0x30104d+INVINCIBILITY_DURATION_MS,isPlayer1WaitingForRespawn=![],player1NeedsRespawnAfterCapture=![],player1CaptureRespawnX=0x0;if(isCoopAIDemoActive)smoothedShip1X=ship1['x'];}if(player2NeedsRespawnAfterCapture&&player2Lives>0x0){ship2={'x':player2CaptureRespawnX,'y':_0x54b3e4,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':player2CaptureRespawnX,'id':'p2'},isPlayer2ShipCaptured=![],isPlayer2Invincible=!![],player2InvincibilityEndTime=_0x30104d+INVINCIBILITY_DURATION_MS,isPlayer2WaitingForRespawn=![],player2NeedsRespawnAfterCapture=![],player2CaptureRespawnX=0x0;if(isCoopAIDemoActive)smoothedShip2X=ship2['x'];}if(player1Lives<=0x0&&player2Lives<=0x0){if(gameOverSequenceStartTime===0x0)triggerFinalGameOverSequence();}}else{if(!isTwoPlayerMode&&!isManualControl){if(isShipCaptured&&playerLives>0x0){let _0x190ede=gameCanvas?gameCanvas['width']/0x2-SHIP_WIDTH/0x2:0xc8;if(typeof smoothedShipX===_0x475879(0x18f))_0x190ede=smoothedShipX;ship={'x':_0x190ede,'y':_0x54b3e4,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x190ede,'id':_0x475879(0x228)},isShipCaptured=![],isInvincible=!![],invincibilityEndTime=_0x30104d+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=![],aiNeedsStabilization=!![];if(smoothedShipX===undefined&&ship)smoothedShipX=ship['x'];}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&triggerFinalGameOverSequence();}else{if(isManualControl){if(isShipCaptured&&playerLives>0x0){let _0x19d4e1=capturedShipRespawnX_NormalMode!==0x0?capturedShipRespawnX_NormalMode:gameCanvas?gameCanvas[_0x475879(0x1d7)]/0x2-SHIP_WIDTH/0x2:0xc8;ship={'x':_0x19d4e1,'y':_0x54b3e4,'width':SHIP_WIDTH,'height':SHIP_HEIGHT,'speed':SHIP_MOVE_SPEED,'targetX':_0x19d4e1,'id':_0x475879(0x228)},isShipCaptured=![],capturedShipRespawnX_NormalMode=0x0,isInvincible=!![],invincibilityEndTime=_0x30104d+INVINCIBILITY_DURATION_MS,isWaitingForRespawn=!![],respawnTime=_0x30104d+RESPAWN_DELAY_MS;}else playerLives<=0x0&&gameOverSequenceStartTime===0x0&&((!isTwoPlayerMode||isTwoPlayerMode&&selectedGameMode==='normal'&&(currentPlayer===0x1&&player2Lives<=0x0||currentPlayer===0x2&&player1Lives<=0x0))&&triggerFinalGameOverSequence());}}}}renderGame();return;}const _0xe79b9a=!(isPlayer1ShowingGameOverMessage||isPlayer2ShowingGameOverMessage||isShowingPlayerGameOverMessage),_0x405422=isShowingIntro&&!_0x462a5d&&!(isTwoPlayerMode&&selectedGameMode==='coop'&&level===0x1);!_0x462a5d&&gameOverSequenceStartTime===0x0&&_0x317075&&!isShowingCaptureMessage&&_0xe79b9a&&(!isManualControl&&isInGameState&&!_0x405422&&(!(_0x3503f1&&!isManualControl)&&(isCoopAIDemoActive?coopAICaptureDiveAnticipationActive&&_0x30104d<coopAICaptureDiveAnticipationEndTime?aiControlCoop():(coopAICaptureDiveAnticipationActive&&(coopAICaptureDiveAnticipationActive=![],coopAICaptureDiveAnticipationEndTime=0x0),aiControlCoop()):aiControl())),isInGameState&&isManualControl&&handlePlayerInput());isTwoPlayerMode&&selectedGameMode===_0x475879(0x13c)?(isPlayer1Invincible&&_0x30104d>=player1InvincibilityEndTime&&(isPlayer1Invincible=![],player1InvincibilityEndTime=0x0),isPlayer2Invincible&&_0x30104d>=player2InvincibilityEndTime&&(isPlayer2Invincible=![],player2InvincibilityEndTime=0x0)):(isInvincible&&_0x30104d>=invincibilityEndTime&&(isInvincible=![],invincibilityEndTime=0x0),isWaitingForRespawn&&_0x30104d>=respawnTime&&(isWaitingForRespawn=![]));const _0x40a76c=showExtraLifeMessage&&_0x30104d-extraLifeMessageStartTime<0x64;if(_0x40a76c&&(isWaveTransitioning||isChallengingStage&&enemies[_0x475879(0x14d)]===0x0)){}if(isCoopAIDemoActive&&isChallengingStage&&enemies['length']===0x0&&!isCsCompletionDelayActive&&!showCsBonusScoreMessage&&!showPerfectMessage&&gameCanvas&&gameCanvas['width']>0x0){const _0xd039de=ship1&&player1Lives>0x0&&!isPlayer1ShipCaptured&&!isPlayer1WaitingForRespawn&&!isPlayer1ShowingGameOverMessage,_0x149da7=ship2&&player2Lives>0x0&&!isPlayer2ShipCaptured&&!isPlayer2WaitingForRespawn&&!isPlayer2ShowingGameOverMessage;if(_0xd039de&&!_0x149da7){const _0x31d3f1=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x44a95e=Math['round'](gameCanvas[_0x475879(0x1d7)]/0x2-_0x31d3f1/0x2);ship1['x']=_0x44a95e,ship1['targetX']=_0x44a95e,smoothedShip1X=_0x44a95e;}else{if(_0x149da7&&!_0xd039de){const _0x5f0914=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x307ed7=Math[_0x475879(0x1ed)](gameCanvas['width']/0x2-_0x5f0914/0x2);ship2['x']=_0x307ed7,ship2[_0x475879(0x1a8)]=_0x307ed7,smoothedShip2X=_0x307ed7;}}}if(isCsCompletionDelayActive&&_0xe79b9a&&gameOverSequenceStartTime===0x0){if(_0x30104d-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY+EXPLOSION_DURATION){isCsCompletionDelayActive=![],csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies;csCompletionResultIsPerfect?(playSound(csPerfectSound),showCsHitsMessage=!![],csHitsMessageStartTime=_0x30104d):(playSound(csClearSound),showCSClearMessage=!![],csClearMessageStartTime=_0x30104d);bullets=[],enemyBullets=[],renderGame();return;}else{if(_0x30104d-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY&&explosions[_0x475879(0x14d)]>0x0){updateExplosions(),renderGame();return;}else{if(_0x30104d-csCompletionDelayStartTime<CS_COMPLETION_MESSAGE_DELAY){renderGame();return;}}}}let _0x23fcbd=![],_0x1358e8=![];if(_0xe79b9a&&gameOverSequenceStartTime===0x0&&!isShowingCoopPlayersReady&&!_0x462a5d){if(showCsHitsMessage){if(_0x30104d-csHitsMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x475879(0x211))updateExplosions();}if(Date[_0x475879(0x237)]()-csHitsMessageStartTime>CS_HITS_MESSAGE_DURATION){showCsHitsMessage=![],showPerfectMessage=!![],perfectMessageStartTime=_0x30104d,explosions=[];if(typeof updateExplosions==='function')updateExplosions();}_0x1358e8=!![];}else{if(showPerfectMessage){if(_0x30104d-perfectMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x475879(0x211))updateExplosions();}if(Date['now']()-perfectMessageStartTime>CS_PERFECT_MESSAGE_DURATION){showPerfectMessage=![],showCsBonusScoreMessage=!![],csBonusScoreMessageStartTime=_0x30104d,explosions=[];if(typeof updateExplosions==='function')updateExplosions();}_0x1358e8=!![];}else{if(showCsBonusScoreMessage){if(_0x30104d-csBonusScoreMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x475879(0x211))updateExplosions();}if(Date['now']()-csBonusScoreMessageStartTime>CS_BONUS_MESSAGE_DURATION){showCsBonusScoreMessage=![],_0x23fcbd=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions===_0x475879(0x211))updateExplosions();}_0x1358e8=!![];}else{if(showCSClearMessage){if(_0x30104d-csClearMessageStartTime<0x64){explosions=[];if(typeof updateExplosions==='function')updateExplosions();}Date[_0x475879(0x237)]()-csClearMessageStartTime>=CS_CLEAR_HITS_DELAY&&!showCsHitsForClearMessage&&(showCsHitsForClearMessage=!![]);Date[_0x475879(0x237)]()-csClearMessageStartTime>=CS_CLEAR_SCORE_DELAY&&!showCsScoreForClearMessage&&(showCsScoreForClearMessage=!![]);if(Date['now']()-csClearMessageStartTime>=CS_CLEAR_DELAY){showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],_0x23fcbd=!![],playLevelUpAfterCSBonus=!![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();}_0x1358e8=!![];}else{if(showExtraLifeMessage)Date[_0x475879(0x237)]()-extraLifeMessageStartTime>EXTRA_LIFE_MESSAGE_DURATION&&(showExtraLifeMessage=![]),_0x1358e8=!![];else{if(showReadyMessage){if(_0x30104d-readyMessageStartTime<0x64){explosions=[];if(typeof updateExplosions===_0x475879(0x211))updateExplosions();}if(Date['now']()-readyMessageStartTime>READY_MESSAGE_DURATION){showReadyMessage=![],_0x23fcbd=!![],explosions=[];if(typeof updateExplosions===_0x475879(0x211))updateExplosions();}_0x1358e8=!![];}}}}}}}if(_0x1358e8&&!_0x23fcbd&&!isShowingCoopPlayersReady&&!_0x462a5d&&!isShowingCaptureMessage&&_0xe79b9a){if(!((_0x3503f1||showCsHitsMessage||showCSClearMessage)&&isManualControl)&&!showExtraLifeMessage){renderGame();return;}}if(_0x405422&&_0xe79b9a&&gameOverSequenceStartTime===0x0){let _0x344f50=![];const _0x5850d4=_0x30104d-introDisplayStartTime,_0x341513=isTwoPlayerMode&&selectedGameMode===_0x475879(0x1fe)&&!isCoopAIDemoActive?TWO_PLAYER_STAGE_INTRO_DURATION:INTRO_DURATION_PER_STEP;let _0x44732e=introStep===0x1?_0x341513:INTRO_DURATION_PER_STEP;if(introStep===0x1){if(_0x5850d4<0x64){explosions=[];if(typeof updateExplosions===_0x475879(0x211))updateExplosions();}let _0x3fcbdc=null;if(level===0x1&&!isTwoPlayerMode&&!initialGameStartSoundPlayedThisSession&&!playerIntroSoundPlayed)_0x3fcbdc=startSound;else{if(level===0x1&&isTwoPlayerMode&&selectedGameMode===_0x475879(0x1fe)&&!initialGameStartSoundPlayedThisSession&&!playerIntroSoundPlayed)_0x3fcbdc=startSound;else isTwoPlayerMode&&selectedGameMode===_0x475879(0x1fe)&&!playerIntroSoundPlayed&&!isCoopAIDemoActive&&(_0x3fcbdc=levelUpSound);}_0x3fcbdc&&(playSound(_0x3fcbdc),playerIntroSoundPlayed=!![],_0x3fcbdc===startSound&&(initialGameStartSoundPlayedThisSession=!![],coopStartSoundPlayedThisSession=!![]));if(_0x5850d4>=_0x44732e){if(isChallengingStage&&level>0x1)introStep=0x3;else introStep=0x2;introDisplayStartTime=_0x30104d,explosions=[];if(typeof updateExplosions===_0x475879(0x211))updateExplosions();}}else{if(introStep===0x2){if(_0x5850d4<0x64){explosions=[];if(typeof updateExplosions===_0x475879(0x211))updateExplosions();}if(!stageIntroSoundPlayed){if(playLevelUpAfterCSBonus&&(isTwoPlayerMode&&selectedGameMode===_0x475879(0x13c)))playSound(levelUpSound),playLevelUpAfterCSBonus=![];else{if(level>0x1||level===0x1&&!isTwoPlayerMode&&!initialGameStartSoundPlayedThisSession&&!playerIntroSoundPlayed){if(level>0x1||level===0x1&&isTwoPlayerMode&&selectedGameMode==='normal'&&!playerIntroSoundPlayed&&!isCoopAIDemoActive&&initialGameStartSoundPlayedThisSession)playSound(levelUpSound);else level===0x1&&!isManualControl&&!isCoopAIDemoActive&&!stageIntroSoundPlayed&&(!initialGameStartSoundPlayedThisSession&&(playSound(startSound),initialGameStartSoundPlayedThisSession=!![],coopStartSoundPlayedThisSession=!![]));}}stageIntroSoundPlayed=!![];}if(_0x5850d4>=_0x44732e){_0x344f50=!![],explosions=[];if(typeof updateExplosions==='function')updateExplosions();}}else{if(introStep===0x3){if(_0x5850d4<0x64){explosions=[];if(typeof updateExplosions===_0x475879(0x211))updateExplosions();}!csIntroSoundPlayed&&(playSound(entranceSound),csIntroSoundPlayed=!![]);if(_0x5850d4>=_0x44732e){_0x344f50=!![],explosions=[];if(typeof updateExplosions===_0x475879(0x211))updateExplosions();}}}}if(isInGameState&&_0xe79b9a&&gameOverSequenceStartTime===0x0){if(isManualControl)handlePlayerInput();if(typeof moveEntities===_0x475879(0x211))moveEntities();updateExplosions(),updateFloatingScores();}if(_0x344f50){isShowingIntro=![],introStep=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],csIntroSoundPlayed=![];isManualControl&&(isShowingDemoText=![]);if(!isChallengingStage)isCoopAIDemoActive?(aiShip1CanShootTime=Date['now']()+0x3e8,aiShip2CanShootTime=Date['now']()+0x4b0):aiCanShootTime=Date['now']()+0xbb8;else{if(isCoopAIDemoActive)aiShip1CanShootTime=0x0,aiShip2CanShootTime=0x0;else aiCanShootTime=0x0;}const _0x3d7cf3=level===0x1&&!(isTwoPlayerMode&&selectedGameMode===_0x475879(0x13c)),_0x2ef391=_0x3d7cf3&&!gameJustStartedAndWaveLaunched||level>0x1||isChallengingStage;if(_0x2ef391){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x475879(0x14d)]>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound(entranceSound);}else isEntrancePhaseActive=![],stopSound(entranceSound),isWaveTransitioning=!![],readyForNextWaveReset=!![],bullets=[],enemyBullets=[],explosions=[],setTimeout(()=>{const _0x180859=_0x475879,_0x486229=isTwoPlayerMode&&selectedGameMode===_0x180859(0x13c)?player1Lives>0x0||player2Lives>0x0:playerLives>0x0;if((isInGameState||!isInGameState&&_0x486229)&&typeof resetWaveInternal===_0x180859(0x211)){if(_0x486229)resetWaveInternal(),gameJustStartedAndWaveLaunched=![];else triggerFinalGameOverSequence();}},0x64);}if(_0x3d7cf3||level>0x1||isChallengingStage)gameJustStartedAndWaveLaunched=!![];}}renderGame();return;}const _0xac5172=!_0x462a5d&&!_0x405422&&!_0x23fcbd&&!isShowingCaptureMessage;if(gameJustStarted&&_0xac5172&&level===0x1&&!(isTwoPlayerMode&&selectedGameMode===_0x475879(0x13c))){if(!gameJustStartedAndWaveLaunched){if(isChallengingStage)startChallengingStageSequence();else{if(currentWaveDefinition&&currentWaveDefinition[_0x475879(0x14d)]>0x0){if(isFullGridWave)startFullGridWave();else scheduleEntranceFlightWave(),playSound(entranceSound);}}gameJustStartedAndWaveLaunched=!![];}}if(gameJustStarted&&_0xac5172)gameJustStarted=![];if(_0xac5172&&isInGameState&&_0xe79b9a&&gameOverSequenceStartTime===0x0){if(!_0x3503f1||_0x3503f1&&isManualControl){if(typeof moveEntities===_0x475879(0x211))moveEntities();updateExplosions(),updateFloatingScores();}else _0x3503f1&&isCoopAIDemoActive&&(updateExplosions(),updateFloatingScores());}if(_0xac5172&&_0xe79b9a&&gameOverSequenceStartTime===0x0){if(GRID_BREATH_ENABLED&&isInGameState&&!isChallengingStage&&!isWaveTransitioning&&_0x317075){const _0x1e61ae=enemies[_0x475879(0x21c)](_0x22dd55=>_0x22dd55?.[_0x475879(0x230)]===_0x475879(0x18d));if(_0x1e61ae&&isGridBreathingActive){const _0x412af5=_0x30104d-gridBreathStartTime,_0x1fb833=scaleValue(level,BASE_GRID_BREATH_CYCLE_MS,MIN_GRID_BREATH_CYCLE_MS),_0x22f9ea=_0x412af5%_0x1fb833;currentGridBreathFactor=(Math['sin'](_0x22f9ea/_0x1fb833*Math['PI']*0x2-Math['PI']/0x2)+0x1)/0x2;}else{if(!_0x1e61ae&&isGridBreathingActive)isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0;else _0x1e61ae&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=_0x30104d,currentGridBreathFactor=0x0);}}else isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if(isEntrancePhaseActive){const _0x5d7b22=enemiesSpawnedThisWave>=totalEnemiesScheduledForWave,_0x131bc5=enemies[_0x475879(0x21c)](_0x34735c=>_0x34735c?.[_0x475879(0x230)]===_0x475879(0x1c1)||_0x34735c?.[_0x475879(0x230)]===_0x475879(0x180)||_0x34735c?.[_0x475879(0x230)]==='following_bezier_path');if(totalEnemiesScheduledForWave>0x0&&_0x5d7b22&&!_0x131bc5){const _0x1a3ffc=isEntrancePhaseActive;isEntrancePhaseActive=![];if(_0x1a3ffc){stopSound(entranceSound),enemiesSpawnedThisWave=0x0,totalEnemiesScheduledForWave=0x0,enemySpawnTimeouts[_0x475879(0x229)](clearTimeout),enemySpawnTimeouts=[],gridJustCompleted=!![];if(!isChallengingStage&&!isFullGridWave){if(isCoopAIDemoActive)coopAICaptureDiveAnticipationActive=!![],coopAICaptureDiveAnticipationEndTime=Date[_0x475879(0x237)]()+COOP_AI_CAPTURE_DIVE_ANTICIPATION_DURATION_MS,typeof triggerImmediateCaptureDive==='function'&&triggerImmediateCaptureDive();else typeof triggerImmediateCaptureDive===_0x475879(0x211)&&triggerImmediateCaptureDive();}}}}if(!isChallengingStage&&!_0x405422&&!isPaused&&!isWaveTransitioning)triggerGridFiring();if(!isWaveTransitioning&&_0x317075&&!_0x405422&&!isShowingCaptureMessage&&!isEntrancePhaseActive){let _0x5a427e=enemies[_0x475879(0x14d)]===0x0,_0xd5437e=fallingShips[_0x475879(0x14d)]===0x0,_0x257781=![];if(isChallengingStage){if(_0x5a427e&&!isEntrancePhaseActive)_0x257781=!![];}else{if(_0x5a427e&&!isEntrancePhaseActive&&_0xd5437e)_0x257781=!![];}if(_0x257781){isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if(isCoopAIDemoActive&&gameCanvas&&gameCanvas[_0x475879(0x1d7)]>0x0){const _0x158d6e=player1Lives,_0x2b4a02=player2Lives,_0xee9dd9=gameCanvas[_0x475879(0x215)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;if(_0x158d6e>0x0&&_0x2b4a02<=0x0&&ship1){const _0x202882=player1IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x1c69a7=Math[_0x475879(0x1ed)](gameCanvas[_0x475879(0x1d7)]/0x2-_0x202882/0x2);ship1['x']=_0x1c69a7,ship1[_0x475879(0x1a8)]=_0x1c69a7,smoothedShip1X=_0x1c69a7,ship1['y']=_0xee9dd9;}else{if(_0x2b4a02>0x0&&_0x158d6e<=0x0&&ship2){const _0x53954b=player2IsDualShipActive?SHIP_WIDTH+DUAL_SHIP_OFFSET_X:SHIP_WIDTH,_0x289c7b=Math['round'](gameCanvas['width']/0x2-_0x53954b/0x2);ship2['x']=_0x289c7b,ship2['targetX']=_0x289c7b,smoothedShip2X=_0x289c7b,ship2['y']=_0xee9dd9;}}}isWaveTransitioning=!![];isGridSoundPlaying&&(stopSound(gridBackgroundSound),isGridSoundPlaying=![]);!isChallengingStage&&(bullets=[],enemyBullets=[]);floatingScores=[],enemySpawnTimeouts[_0x475879(0x229)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0;let _0x399387;if(isChallengingStage){csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,setTimeout(()=>{if(isWaveTransitioning){explosions=[];if(typeof updateExplosions==='function')updateExplosions();isCsCompletionDelayActive=!![],csCompletionDelayStartTime=Date['now']();}},EXPLOSION_DURATION);if(csCompletionResultIsPerfect){let _0x22ef19=0x2710;if(isTwoPlayerMode&&selectedGameMode===_0x475879(0x13c))(player1Lives>0x0||isCoopAIDemoActive&&ship1)&&(player1Score+=_0x22ef19),(player2Lives>0x0||isCoopAIDemoActive&&ship2)&&(player2Score+=_0x22ef19),highScore=Math[_0x475879(0x15a)](highScore,player1Score,player2Score),checkAndAwardExtraLife(null);else{score+=_0x22ef19;if(!isTwoPlayerMode)player1Score=score;else{if(isTwoPlayerMode&&selectedGameMode==='normal'){if(currentPlayer===0x1)player1Score=score;else player2Score=score;}}highScore=Math[_0x475879(0x15a)](highScore,score,player1Score,player2Score),checkAndAwardExtraLife(currentPlayer);}_0x399387=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_HITS_MESSAGE_DURATION+CS_PERFECT_MESSAGE_DURATION+CS_BONUS_MESSAGE_DURATION;}else isTwoPlayerMode&&selectedGameMode===_0x475879(0x13c)?checkAndAwardExtraLife(null):checkAndAwardExtraLife(currentPlayer),_0x399387=EXPLOSION_DURATION+CS_COMPLETION_MESSAGE_DELAY+CS_CLEAR_DELAY;_0x399387+=0x64;}else playSound(waveUpSound),normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,_0x399387=POST_MESSAGE_RESET_DELAY;setTimeout(()=>{const _0x4c6e5f=_0x475879;let _0x44e3e0=![],_0x4e448d=currentPlayer;if(isTwoPlayerMode&&selectedGameMode===_0x4c6e5f(0x1fe)){const _0x2f254c=currentPlayer;if(currentPlayer===0x1)player1Score=score;else player2Score=score;const _0x529db9=switchPlayerTurn();if(_0x529db9){_0x4e448d=currentPlayer;if(_0x2f254c===0x2&&player1CompletedLevel===level)_0x44e3e0=!![],player1CompletedLevel=-0x1;else{_0x44e3e0=![];if(_0x2f254c===0x1)player1CompletedLevel=level;}}else _0x4e448d=_0x2f254c,_0x44e3e0=!![],player1CompletedLevel=-0x1;}else _0x44e3e0=!![],_0x4e448d=isTwoPlayerMode&&selectedGameMode===_0x4c6e5f(0x13c)?0x0:0x1;if(_0x44e3e0){level++;if(isTwoPlayerMode&&selectedGameMode===_0x4c6e5f(0x13c)){if(player1Lives>0x0)player1MaxLevelReached=Math[_0x4c6e5f(0x15a)](player1MaxLevelReached,level);if(player2Lives>0x0)player2MaxLevelReached=Math['max'](player2MaxLevelReached,level);}else{if(isTwoPlayerMode&&selectedGameMode===_0x4c6e5f(0x1fe)){if(_0x4e448d===0x1&&player1Lives>0x0)player1MaxLevelReached=Math[_0x4c6e5f(0x15a)](player1MaxLevelReached,level);else{if(_0x4e448d===0x2&&player2Lives>0x0)player2MaxLevelReached=Math[_0x4c6e5f(0x15a)](player2MaxLevelReached,level);}}else{if(playerLives>0x0)player1MaxLevelReached=Math['max'](player1MaxLevelReached,level);}}}const _0x195b38=player1Lives,_0x167f84=player2Lives;let _0x51c5d6=![];if(isTwoPlayerMode&&selectedGameMode===_0x4c6e5f(0x13c))_0x51c5d6=_0x195b38>0x0||_0x167f84>0x0;else{if(isTwoPlayerMode&&selectedGameMode===_0x4c6e5f(0x1fe))_0x51c5d6=(_0x4e448d===0x1?_0x195b38:_0x167f84)>0x0;else _0x51c5d6=player1Lives>0x0;}_0x51c5d6?(resetWaveInternal(),gameJustStartedAndWaveLaunched=![]):triggerFinalGameOverSequence();},_0x399387),renderGame();return;}if(!isChallengingStage){if(enemies[_0x475879(0x14d)]>0x0){let _0x864dae=null;const _0x2de247=enemies['filter'](_0x4ec051=>_0x4ec051?.[_0x475879(0x230)]==='in_grid'),_0x1cc942=_0x2de247['length']<=0x3,_0x5e25d7=Math[_0x475879(0x15a)](0x1,Math[_0x475879(0x188)](level,LEVEL_CAP_FOR_SCALING)),_0x3a32b3=0x1068,_0x5f54b2=0x320,_0x1817f=(_0x5e25d7-0x1)*((_0x3a32b3-_0x5f54b2)/(LEVEL_CAP_FOR_SCALING-0x1)),_0x486a62=Math[_0x475879(0x15a)](_0x5f54b2,_0x3a32b3-_0x1817f),_0x24ab9c=Math[_0x475879(0x1ed)](scaleValue(level,BASE_MAX_ATTACKING_ENEMIES,MAX_MAX_ATTACKING_ENEMIES)),_0x3f71bf=enemies['filter'](_0x50fa4a=>_0x50fa4a?.[_0x475879(0x230)]==='attacking'||_0x50fa4a?.[_0x475879(0x230)]===_0x475879(0x1c5))[_0x475879(0x14d)];if(_0x1cc942||_0x30104d-lastEnemyDetachTime>_0x486a62&&_0x2de247[_0x475879(0x14d)]>0x0&&_0x3f71bf<_0x24ab9c){_0x864dae=findAndDetachEnemy();if(_0x864dae&&_0x864dae[_0x475879(0x14d)]>0x0){const _0x54dec2=_0x864dae[_0x475879(0x196)](_0x560e1=>enemies[_0x475879(0x1f7)](_0x350428=>_0x350428?.['id']===_0x560e1['id']))[_0x475879(0x1a9)](_0xc1e3d5=>_0xc1e3d5&&_0xc1e3d5[_0x475879(0x230)]==='in_grid');if(_0x54dec2[_0x475879(0x14d)]>0x0){const _0x59636b=_0x54dec2[0x0],_0x58053e=_0x59636b['attackType'];if(!_0x1cc942)lastEnemyDetachTime=_0x30104d;if(_0x58053e===_0x475879(0x1fe)){const _0x4854ef=generateAttackPathInternal(_0x59636b);if(_0x4854ef&&_0x4854ef[_0x475879(0x14d)]>0x0){if(_0x54dec2[_0x475879(0x14d)]===0x3&&_0x59636b['type']===ENEMY3_TYPE&&level!==0x1)playSound(tripleAttackSound);let _0x31b0aa=[..._0x54dec2];const _0x1b9ce3=_0x31b0aa['length'];if(_0x1b9ce3>0x1){let _0x122e5c=null,_0x1444b6=[];_0x31b0aa[_0x475879(0x229)](_0x27236a=>{const _0x2928e6=_0x475879;if(_0x27236a[_0x2928e6(0x242)]===ENEMY3_TYPE)_0x122e5c=_0x27236a;else _0x1444b6['push'](_0x27236a);});if(_0x122e5c&&level!==0x1&&_0x1b9ce3===0x3&&_0x1444b6[_0x475879(0x14d)]===0x2)_0x31b0aa=[_0x1444b6[0x0],_0x122e5c,_0x1444b6[0x1]];else _0x31b0aa[_0x475879(0x13d)]((_0x3a7043,_0xc6d8d6)=>(_0x3a7043?.['gridCol']??0x0)-(_0xc6d8d6?.[_0x475879(0x13f)]??0x0));const _0x29a248=0x5;let _0x232ed7=0x0;_0x31b0aa=_0x31b0aa[_0x475879(0x1a9)](_0x10635e=>_0x10635e&&typeof _0x10635e[_0x475879(0x1d7)]===_0x475879(0x18f));const _0x3e0da9=_0x31b0aa['length'];for(let _0x75e899=0x0;_0x75e899<_0x3e0da9;_0x75e899++){_0x232ed7+=_0x31b0aa[_0x75e899]['width'];if(_0x75e899<_0x3e0da9-0x1)_0x232ed7+=_0x29a248;}const _0x149b27=-_0x232ed7/0x2;let _0x1053d4=_0x149b27;for(let _0x410f1b=0x0;_0x410f1b<_0x3e0da9;_0x410f1b++){const _0x67ce96=_0x31b0aa[_0x410f1b];_0x67ce96[_0x475879(0x139)]=_0x1053d4+_0x67ce96['width']/0x2,_0x1053d4+=_0x67ce96[_0x475879(0x1d7)]+_0x29a248;}}else _0x31b0aa[_0x475879(0x229)](_0x35aad2=>_0x35aad2[_0x475879(0x139)]=0x0);const _0x2aea4e='attack-'+_0x59636b['id']+'-'+_0x30104d;_0x31b0aa[_0x475879(0x229)](_0x4a0065=>{if(_0x4a0065)_0x4a0065['attackGroupId']=_0x2aea4e;});let _0x2ee031=![],_0x3e0483=GROUP_FIRE_BURST_DELAY;if(_0x59636b[_0x475879(0x242)]===ENEMY2_TYPE||_0x59636b[_0x475879(0x242)]===ENEMY3_TYPE){_0x2ee031=!![];if(_0x59636b[_0x475879(0x242)]===ENEMY2_TYPE&&_0x1b9ce3===0x1)_0x3e0483=SOLO_BUTTERFLY_FIRE_DELAY;}else{if(_0x59636b[_0x475879(0x242)]===ENEMY1_TYPE)_0x2ee031=!![];}if(_0x1cc942&&level>0x1)_0x2ee031=![];_0x2ee031&&_0x31b0aa[_0x475879(0x229)](_0x437bf4=>{const _0x20ecf2=_0x475879,_0x2e2c61=_0x437bf4&&!(_0x437bf4[_0x20ecf2(0x242)]===ENEMY3_TYPE&&_0x437bf4[_0x20ecf2(0x1c9)]);if(_0x2e2c61)fireEnemyBurst(_0x437bf4['id'],_0x20ecf2(0x21b),_0x3e0483);}),_0x31b0aa[_0x475879(0x229)]((_0x106593,_0x7223f7)=>{const _0xd99263=_0x475879;_0x106593&&_0x106593[_0xd99263(0x230)]===_0xd99263(0x18d)&&(_0x106593[_0xd99263(0x230)]=_0xd99263(0x1c5),_0x106593['justReturned']=![],_0x106593[_0xd99263(0x135)]=0x0,_0x106593['velocityY']=0x0,_0x106593[_0xd99263(0x21d)]=![],setTimeout(()=>{const _0x5bda99=_0xd99263;if(isPaused)return;const _0x278f32=enemies[_0x5bda99(0x1f7)](_0x363739=>_0x363739?.['id']===_0x106593['id']);if(_0x278f32&&_0x278f32['state']==='preparing_attack')try{const _0x2b3a17=scaleValue(level,BASE_ENEMY_ATTACK_SPEED,MAX_ENEMY_ATTACK_SPEED);let _0x27d046=0x1;if(_0x278f32[_0x5bda99(0x242)]===ENEMY1_TYPE)_0x27d046=ENEMY1_DIVE_SPEED_FACTOR;else{if(_0x278f32['type']===ENEMY2_TYPE)_0x27d046=ENEMY2_DIVE_SPEED_FACTOR;else{if(_0x278f32[_0x5bda99(0x242)]===ENEMY3_TYPE)_0x27d046=ENEMY3_ATTACK_SPEED_FACTOR;}}if(_0x106593[_0x5bda99(0x242)]===ENEMY3_TYPE)playSound(bossGalagaDiveSound);else playSound(butterflyDiveSound);_0x278f32[_0x5bda99(0x230)]='attacking',_0x278f32[_0x5bda99(0x198)]=_0x4854ef,_0x278f32[_0x5bda99(0x19c)]=0x0,_0x278f32[_0x5bda99(0x214)]=0x0,_0x278f32['speed']=_0x2b3a17*_0x27d046,_0x278f32['lastFiredTime']=0x0,_0x278f32[_0x5bda99(0x21d)]=!![];}catch(_0x5b8ff0){console[_0x5bda99(0x1c8)](_0x5bda99(0x12d)+_0x106593['id']+':',_0x5b8ff0);}},_0x7223f7*GROUP_DETACH_DELAY_MS));});}else _0x864dae[_0x475879(0x229)](_0x1b0271=>{if(_0x1b0271)_0x1b0271['justReturned']=![];});}}}}}}enemies[_0x475879(0x229)](_0x3274f6=>{const _0xbdc3a6=_0x475879;if(_0x3274f6&&_0x3274f6[_0xbdc3a6(0x242)]===ENEMY3_TYPE&&_0x3274f6[_0xbdc3a6(0x1c9)]&&_0x3274f6[_0xbdc3a6(0x230)]===_0xbdc3a6(0x21b)&&_0x3274f6['capturedShipDimensions']&&typeof _0x3274f6[_0xbdc3a6(0x14f)]===_0xbdc3a6(0x18f)){if(_0x30104d-_0x3274f6['capturedShipLastFiredTime']>CAPTURED_SHIP_FIRE_COOLDOWN_MS){const _0x4c8f80=_0x3274f6['x']+_0x3274f6[_0xbdc3a6(0x1d7)]/0x2,_0x44b0e7=_0x3274f6['y']+_0x3274f6[_0xbdc3a6(0x215)]+_0x3274f6['capturedShipDimensions'][_0xbdc3a6(0x215)]*0.5,_0x3dc0b1={'x':_0x4c8f80,'y':_0x44b0e7};createBulletSimple(_0x3274f6,_0x3dc0b1)&&(_0x3274f6[_0xbdc3a6(0x14f)]=_0x30104d,playSound(playerShootSound));}}});}}else{if(gameOverSequenceStartTime>0x0){const _0x5976cd=_0x30104d-gameOverSequenceStartTime,_0x15bd85=_0x5976cd>=GAME_OVER_DURATION;if(_0x15bd85&&!isShowingResultsScreen){isShowingResultsScreen=!![],stopSound(gameOverSound),playSound(resultsMusicSound),explosions=[];if(typeof updateExplosions===_0x475879(0x211))updateExplosions();}}}!_0x462a5d&&renderGame();}catch(_0xef7321){console[_0x475879(0x1c8)]('!!!\x20CRITICAL\x20ERROR\x20IN\x20runSingleGameUpdate\x20!!!',_0xef7321,_0xef7321[_0x475879(0x164)]),isPaused=![];mainLoopId&&(cancelAnimationFrame(mainLoopId),mainLoopId=null);isInGameState=![],isPlayer1ShowingGameOverMessage=![],player1GameOverMessageStartTime=0x0,isPlayer2ShowingGameOverMessage=![],player2GameOverMessageStartTime=0x0,isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',alert(_0x475879(0x226)),stopAllGameSoundsInternal(),isGridSoundPlaying=![],isInvincible=![],invincibilityEndTime=0x0;try{typeof showMenuState==='function'&&showMenuState();}catch(_0x113973){console['error'](_0x475879(0x202),_0x113973);}}}function checkAndAwardExtraLife(_0x381fe1=null){const _0x378d81=_0x33d7d9;try{const _0x434e82=[];if(_0x381fe1===0x1){const _0x4123af=isTwoPlayerMode&&selectedGameMode==='coop'?player1Lives:isTwoPlayerMode&&selectedGameMode==='normal'&&currentPlayer===0x1?playerLives:player1Lives,_0x5b4460=isTwoPlayerMode&&selectedGameMode===_0x378d81(0x13c)?player1Score:isTwoPlayerMode&&selectedGameMode===_0x378d81(0x1fe)&&currentPlayer===0x1?score:player1Score;_0x434e82[_0x378d81(0x1e1)]({'num':0x1,'currentLives':_0x4123af,'currentScore':_0x5b4460,'thresholdsMet':player1LifeThresholdsMet});}else{if(_0x381fe1===0x2&&isTwoPlayerMode){const _0x58f849=selectedGameMode===_0x378d81(0x13c)?player2Lives:selectedGameMode===_0x378d81(0x1fe)&&currentPlayer===0x2?playerLives:player2Lives,_0x13187c=selectedGameMode==='coop'?player2Score:selectedGameMode==='normal'&&currentPlayer===0x2?score:player2Score;_0x434e82['push']({'num':0x2,'currentLives':_0x58f849,'currentScore':_0x13187c,'thresholdsMet':player2LifeThresholdsMet});}else{if(isTwoPlayerMode&&selectedGameMode==='coop'&&_0x381fe1===null)_0x434e82['push']({'num':0x1,'currentLives':player1Lives,'currentScore':player1Score,'thresholdsMet':player1LifeThresholdsMet}),_0x434e82[_0x378d81(0x1e1)]({'num':0x2,'currentLives':player2Lives,'currentScore':player2Score,'thresholdsMet':player2LifeThresholdsMet});else{if(!isTwoPlayerMode&&(_0x381fe1===null||_0x381fe1===0x1))_0x434e82[_0x378d81(0x1e1)]({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet});else isTwoPlayerMode&&selectedGameMode===_0x378d81(0x1fe)&&_0x381fe1===currentPlayer&&(currentPlayer===0x1?_0x434e82[_0x378d81(0x1e1)]({'num':0x1,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player1LifeThresholdsMet}):_0x434e82[_0x378d81(0x1e1)]({'num':0x2,'currentLives':playerLives,'currentScore':score,'thresholdsMet':player2LifeThresholdsMet}));}}}_0x434e82[_0x378d81(0x229)](_0x45dcf3=>{const _0x207d74=_0x378d81;let _0xb4dc5=![];while(!![]){let _0x51165a=![],_0x3f3705=-0x1;const _0x3de2ca=_0x45dcf3['thresholdsMet'][_0x207d74(0x216)];if(_0x3de2ca===0x0)_0x3f3705=EXTRA_LIFE_THRESHOLD_1;else{if(_0x3de2ca===0x1&&!_0x45dcf3['thresholdsMet'][_0x207d74(0x14c)](EXTRA_LIFE_THRESHOLD_2))_0x3f3705=EXTRA_LIFE_THRESHOLD_2;else{if(_0x3de2ca>=0x1&&_0x45dcf3[_0x207d74(0x225)]['has'](EXTRA_LIFE_THRESHOLD_1)&&_0x45dcf3[_0x207d74(0x225)][_0x207d74(0x14c)](EXTRA_LIFE_THRESHOLD_2)){let _0x143c98=0x0;_0x45dcf3[_0x207d74(0x225)][_0x207d74(0x229)](_0x3e64fe=>{_0x3e64fe>=EXTRA_LIFE_THRESHOLD_2&&(_0x3e64fe-EXTRA_LIFE_THRESHOLD_2)%RECURRING_EXTRA_LIFE_INTERVAL===0x0&&_0x143c98++;}),_0x3f3705=EXTRA_LIFE_THRESHOLD_2+_0x143c98*RECURRING_EXTRA_LIFE_INTERVAL;}else{if(_0x3de2ca===0x1&&_0x45dcf3[_0x207d74(0x225)][_0x207d74(0x14c)](EXTRA_LIFE_THRESHOLD_1)&&!_0x45dcf3['thresholdsMet'][_0x207d74(0x14c)](EXTRA_LIFE_THRESHOLD_2))_0x3f3705=EXTRA_LIFE_THRESHOLD_2;else _0x3de2ca===0x1&&_0x45dcf3[_0x207d74(0x225)][_0x207d74(0x14c)](EXTRA_LIFE_THRESHOLD_2)&&!_0x45dcf3[_0x207d74(0x225)]['has'](EXTRA_LIFE_THRESHOLD_1)&&(_0x3f3705=EXTRA_LIFE_THRESHOLD_1);}}}if(_0x3f3705!==-0x1&&_0x45dcf3[_0x207d74(0x1a5)]>=_0x3f3705&&!_0x45dcf3[_0x207d74(0x225)]['has'](_0x3f3705)){if(_0x45dcf3[_0x207d74(0x245)]===0x1){if(isTwoPlayerMode&&selectedGameMode===_0x207d74(0x13c))player1Lives++;else playerLives++;player1Lives=isTwoPlayerMode&&selectedGameMode===_0x207d74(0x13c)?player1Lives:playerLives,_0x45dcf3[_0x207d74(0x1a1)]=player1Lives;}else{if(_0x45dcf3[_0x207d74(0x245)]===0x2){if(isTwoPlayerMode&&selectedGameMode===_0x207d74(0x13c))player2Lives++;else playerLives++;player2Lives=isTwoPlayerMode&&selectedGameMode===_0x207d74(0x13c)?player2Lives:playerLives,_0x45dcf3[_0x207d74(0x1a1)]=player2Lives;}}_0x45dcf3[_0x207d74(0x225)][_0x207d74(0x186)](_0x3f3705),_0xb4dc5=!![],_0x51165a=!![];}if(!_0x51165a)break;}_0xb4dc5&&!showExtraLifeMessage&&!showCsBonusScoreMessage&&!showPerfectMessage&&!showCsHitsMessage&&!showCSClearMessage&&!showReadyMessage&&setTimeout(()=>{const _0x5cd94e=_0x207d74;if(isInGameState){explosions=[];if(typeof updateExplosions===_0x5cd94e(0x211))updateExplosions();showExtraLifeMessage=!![],extraLifeMessageStartTime=Date['now'](),playSound(extraLifeSound);}},EXPLOSION_DURATION);});}catch(_0x1f008b){console[_0x378d81(0x1c8)]('Error\x20checking/awarding\x20extra\x20life:',_0x1f008b);}}